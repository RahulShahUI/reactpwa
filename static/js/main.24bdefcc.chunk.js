(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1100:function(e,t,a){e.exports=a.p+"static/media/pdf-test.ff71372d.pdf"},1317:function(e,t,a){},1342:function(e,t){},1357:function(e,t,a){},1359:function(e,t,a){},1360:function(e,t,a){},1361:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(27),l=a.n(r),o=a(11),i=a(13),c=a(17),m=a(15),d=a(16),u=a(77),p=a(35),h=a(141),g=a(656),f=a(1441),E=a(230),v=a.n(E),y=a(1387),b=a(1388),N=a(1389),D=a(1390),k=a(1391),T=a(1392),C=a(1393),w=a(1394),A=a(1395),S=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("usertype");return s.a.createElement("div",{className:this.props.miniActive+" sidebar"},s.a.createElement("div",{className:"sidebar-header"},null!==e&&"BUYERAGENT"===e.toUpperCase()&&s.a.createElement(p.c,{to:"/dashboard",className:"nav-link",activeClassName:"active"},s.a.createElement("img",{src:v.a,alt:""})),null!==e&&"VENDOR"===e.toUpperCase()&&s.a.createElement(p.c,{to:"/dashboard",className:"nav-link",activeClassName:"active"},s.a.createElement("img",{src:v.a,alt:""})),null!==e&&"ADMIN"===e.toUpperCase()&&s.a.createElement(p.c,{to:"/RegistrationRequests",className:"nav-link",activeClassName:"active"},s.a.createElement("img",{src:v.a,alt:""})),null!==e&&"BUYER"===e.toUpperCase()&&s.a.createElement(p.c,{to:"/RegistrationRequests",className:"nav-link",activeClassName:"active"},s.a.createElement("img",{src:v.a,alt:""}))),s.a.createElement("div",{className:"sidebar-content"},null!==e&&"BUYERAGENT"===e.toUpperCase()&&s.a.createElement(f.a,{defaultActiveKey:"/home",className:"flex-column"},s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(p.c,{to:"/dashboard",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(y.a,null)),s.a.createElement("span",{className:"side-label"},"Dashboard"))),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/transactions",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(b.a,null)),s.a.createElement("span",{className:"side-label"},"Transactions"))),s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(p.c,{to:"/calendar",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(N.a,null)),s.a.createElement("span",{className:"side-label"},"Calendar"))),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/contacts",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(D.a,null)),s.a.createElement("span",{className:"side-label"},"Contacts"))),s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(p.c,{to:"/masterTemplate",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(k.a,null)),s.a.createElement("span",{className:"side-label"},"BUYERAGENT"==localStorage.getItem("usertype")?"Master Campaign":"Master Template")))),null!==e&&"ADMIN"===e.toUpperCase()&&s.a.createElement(f.a,{defaultActiveKey:"/home",className:"flex-column"},s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/RegistrationRequests",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(T.a,null)),s.a.createElement("span",{className:"side-label"},"Registration Requests"))),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/BuyerAgent",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(C.a,null)),s.a.createElement("span",{className:"side-label"},"Buyer Agent"))),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/Vendors",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(w.a,null)),s.a.createElement("span",{className:"side-label"},"Vendors"))),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/Buyers",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(A.a,null)),s.a.createElement("span",{className:"side-label"},"Home Buyers"))),s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(p.c,{to:"/masterTemplate",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(k.a,null)),s.a.createElement("span",{className:"side-label"},"Master Template")))),null!==e&&"VENDOR"===e.toUpperCase()&&s.a.createElement(f.a,{defaultActiveKey:"/home",className:"flex-column"},s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/transactions",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(b.a,null)),s.a.createElement("span",{className:"side-label"},"Transactions")))),null!==e&&"BUYER"===e.toUpperCase()&&s.a.createElement(f.a,{defaultActiveKey:"/home",className:"flex-column"},s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/transactions",className:"nav-link",activeClassName:"active"},s.a.createElement("span",{className:"side-icn"},s.a.createElement(b.a,null)),s.a.createElement("span",{className:"side-label"},"Transactions"))))))}}]),t}(s.a.Component),I=a(1444),x=a(629),M=a(1445),O=a(1396),R=a(1397),j=a(1398),U=a(227),Y=a.n(U),L=a(286),P=a.n(L),B=a(21),V="REGISTER_USER",F="LOGIN_USER",_="MY_PROFILE",G="UPDATE_PROFILE",z="LOGOUT",H="FORGOT_PASSWORD",q="REGISTRATION_REQUESTS",W="ACTIVE_USER",K="VALIDATE_RESET_TOKEN",Q="BUYER_AGENT_LIST",Z="ADMIN_INVITE_AGENT",X="ADMIN_GET_MASTER_TEMPLATE_DATA",J="ADMIN_UPDATE_MASTER_TEMPLATE_DATA",$="CREATE_EVENT_COMM_MASTER_TEMPLATE",ee="DELETE_EVENT_COMM_MASTER_TEMPLATE",te="MASTER_TEMPLATE_GET_CAMPAIGN_DATA_BY_ID",ae="CREATE_CAMPAIGN_MASTER_TEMPLATE",ne="COPY_CAMPAIGN_MASTER_TEMPLATE",se="MASTER_TEMPLATE_GET_ALL_VERIABLE_REF",re="UPDATE_DEPENDENT_TASKS",le="BUYER_UPDATE_DEPENDENT_TASKS",oe="GET_CONTINGENCIES",ie="CREATE_TRANSACTION",ce="GET_TRANSACTION",me="UPDATE_TRANSACTION",de="DELETE_TRANSACTION",ue="GET_CONTACT",pe="GET_BY_ID_CONTACT",he="ADD_CONTACT",ge="EDIT_CONTACT",fe="DELETE_CONTACT",Ee="GET_ROLES",ve="ADD_ROLES",ye="BUYER_CREATE_MASTER_TEMPLATE",be="BUYER_CREATE_TASK",Ne="BUYER_DELETE_TASK",De="BUYER_GET_MASTER_TEMPLATE_DATA",ke="BUYER_UPDATE_MASTER_TEMPLATE_DATA",Te="MASTER_TEMPLATE_GET_CAMPAIGN_DATA_BY_ID_BUYER",Ce="GET_ALL_TRANSACTIONS",we="GET_ALL_TASKS",Ae="GET_TASK_DETAILS",Se="DELETE_TASK",Ie="UPDATE_TASK",xe="CREATE_TASK",Me="GET_ACTUAL_VALUES",Oe="ADD_COMMENT",Re="DELETE_COMMENT",je="VENDORS_LIST",Ue="REMOVED_REGISTRATION",Ye="REMOVED_USER",Le="GET_UPCOMING_TASKS_DASHBOARD",Pe="REJECT_REGISTRATION",Be="REJECT_REGISTRATION_LIST",Ve="GET_DEPENDENCY_DATA",Fe="PUT_DEPENDENCY_DATA",_e="GET_ALL_CONTINGENCIES",Ge="GET_DOCS",ze="ADD_DOC",He="UPDATE_DOC",qe="UPLOAD_DOC",We="ARCHIVE_DOC",Ke="REMOVE_DOC",Qe="GET_ALL_VENDOR_TRANSACTIONS",Ze="GET_ALL_VENDOR_TASKS",Xe="TRANSACTION_STATUS",Je="TRANSACTION_DEPEDENDENT_TASK",$e="GET_ALL_BUYER_TRANSACTIONS",et="GET_ALL_BUYER_TASKS",tt="CALENDAR_EVENTS",at="TRANSACTION_ACTIVITY",nt="TRANSACTION_ACTIVITY_USER",st="DASHBOARD_TRANSACTIONS",rt="DASHBOARD_TRANSACTIONS_VALUE",lt="BUYERS_LIST",ot=a(144),it=a.n(ot),ct=new function e(){Object(o.a)(this,e),this.SiteUrl="http://dev.credencys.com/Tellagent-Front/#/",this.BaseUrl="http://dev.credencys.com:3239/api/",this.resetBaseUrl="http://dev.credencys.com:3239/",this.LoginUrl=this.BaseUrl+"auth",this.RegisterUrl=this.BaseUrl+"users",this.RegistrationRequestsUrl=this.BaseUrl+"users/notactive?limit={recordPerPage}&lastsync={modifieddate}",this.ApproveUserAccountUrl=this.BaseUrl+"users/{userID}/admin",this.BuyerAgentListUrl=this.BaseUrl+"users/type/buyeragent",this.VendorsListUrl=this.BaseUrl+"users/type/Vendor",this.BuyerListUrl=this.BaseUrl+"users/type/Buyer",this.MyProfileUrl=this.BaseUrl+"users/me",this.getProfileUrl=this.BaseUrl+"users/",this.AdminGetMaterTemplateUrl=this.BaseUrl+"template",this.setVendorPassword=this.BaseUrl+"users/changePassword",this.AdminUpdateCampMaterTemplateUrl=this.BaseUrl+"template?model={model}&campaignId={campaignId}",this.AdminUpdateBothMaterTemplateUrl=this.BaseUrl+"template?eventtemplateId={eventTempId}&communicationtemplateId={commuId}",this.AdminCreatEventCommMaterTemplateUrl=this.BaseUrl+"template",this.AdminDeleteEventCommMaterTemplateUrl=this.BaseUrl+"template?eventtemplateId={eventtemplateId}",this.AdminGetCampDataByIdMaterTemplateUrl=this.BaseUrl+"template?campaign={campId}",this.AdminCreatCampaignMaterTemplateUrl=this.BaseUrl+"template?model=campaign",this.AdminCopyCampaignMaterTemplateUrl=this.BaseUrl+"copytemplates",this.AdminGetVarriableRefMaterTemplateUrl=this.BaseUrl+"variable",this.AdminGetContingencyUrl=this.BaseUrl+"contingencies",this.AdminCreateTransactionUrl=this.BaseUrl+"transactions",this.GetTransactionUrl=this.BaseUrl+"transactions?id={transactionsId}",this.UpdateTransactionUrl=this.BaseUrl+"transactions?id={transactionsId}",this.DeleteTransactionUrl=this.BaseUrl+"transactions?id={transactionsId}",this.uploadPropertyImage=this.BaseUrl+"transactions/uploadImage",this.addContact=this.BaseUrl+"contact",this.buyerAgentMasterTemplate=this.BaseUrl+"usertemplate",this.userRole=this.BaseUrl+"userrole",this.allContingencies=this.BaseUrl+"contigencymap",this.transactionEvent=this.BaseUrl+"transactionevent",this.comments=this.BaseUrl+"comments?id=",this.forgotpassword=this.BaseUrl+"users/forgot",this.validateResetPasswordToken=this.resetBaseUrl+"reset/",this.removeRegistrationRequest=this.BaseUrl+"users?id=",this.rejectRegistrationRequest=this.BaseUrl+"users/rejectData?id=",this.rejectedRegistrationList=this.BaseUrl+"users/rejectedUser/true",this.setDependency=this.BaseUrl+"dependency?",this.docsUrl=this.BaseUrl+"comments/getAttachment?transactionId={transactionId}",this.addDocUrl=this.BaseUrl+"comments/attachment",this.uploadDocUrl=this.BaseUrl+"comments/uploadDocument?id={transactionId}",this.archiveDocumentUrl=this.BaseUrl+"comments/archeiveDocument?id=",this.viewDocUrl=this.BaseUrl+"transactions/upload?id={transactionId}&img=",this.deleteDocumentFromTask=this.BaseUrl+"comments/deleteAttachment?id=",this.removeFolderUrl=this.BaseUrl+"comments/removeFolder",this.vendorTransactionsUrl=this.BaseUrl+"transactions/vendorTransactionList?id={id}",this.vendorTasksUrl=this.BaseUrl+"transactionevent/vendorTransactionEvents?vendorId={vendorId}&transactionId={transactionId}",this.buyerTasksUrl=this.BaseUrl+"transactionevent/buyerTransactionEvents?transactionId=",this.transactionStatusUrl=this.BaseUrl+"transactions/status?id={transactionId}",this.emailCheckUrl=this.BaseUrl+"users/email",this.uploadDependentTaskURL=this.BaseUrl+"template/dependency?eventtemplateId=",this.updateBuyerDependentTaskURL=this.BaseUrl+"usertemplate/dependency?usereventtemplateId=",this.removeDependencyBuyer=this.BaseUrl+"dependency?id={id}&removeId={removeId}",this.activitiesOfBuyerAgent=this.BaseUrl+"transactionevent/transactionActivity?transactionId=",this.activityUser=this.BaseUrl+"transactionevent/filter?transactionId=",this.buyerTransactionsList=this.BaseUrl+"transactions/buyerTransactionList",this.listAllCalendarEvents=this.BaseUrl+"transactions/calenderEvents",this.DashboardTransactionsUrl=this.BaseUrl+"dashboard/table1",this.DashboardwidgetFourUrl=this.BaseUrl+"dashboard/table2",this.TransactionValuesWidgetDataUrl=this.BaseUrl+"dashboard/table3",this.homeBuyerContacts=this.BaseUrl+"transactionevent/homebuyerVendor?transactionId="},mt=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"externalAPI",value:function(e){return fetch(e,{method:"GET"}).then(function(e){return e.json().catch(function(e){throw e})})}},{key:"getMethod",value:function(e,t){var a=this,n={Accept:"application/json","Content-Type":"application/json"};t&&(n={Accept:"application/json","Content-Type":"application/json","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"get",url:e,headers:n}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void a.inValidToken():{status:"404"}})}},{key:"inValidToken",value:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("usertype"),window.location.href=ct.SiteUrl+"login",window.location.reload()}},{key:"postMethod",value:function(e,t,a){var n=this,s={Accept:"application/json","Content-Type":"application/json"};a&&(s={Accept:"application/json","Content-Type":"application/json","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"post",url:e,headers:s,data:t}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void n.inValidToken():{status:"404"}})}},{key:"putMethod",value:function(e,t,a){var n=this,s={Accept:"application/json","Content-Type":"application/json"};a&&(s={Accept:"application/json","Content-Type":"application/json","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"PUT",url:e,headers:s,data:t}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void n.inValidToken():{status:"404"}})}},{key:"deleteMethod",value:function(e,t,a){var n=this,s={Accept:"application/json","Content-Type":"application/json"};t&&(s={Accept:"application/json","Content-Type":"application/json","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"DELETE",url:e,data:a||null,headers:s}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void n.inValidToken():{status:"404"}})}},{key:"postFile",value:function(e,t){var a=new FormData;return a.append("File",t),fetch(e,{method:"POST",body:a}).then(function(e){return e.json()}).catch(function(e){throw e})}},{key:"putFormData",value:function(e,t){return fetch(e,{method:"PUT",body:t}).then(function(e){return e.json()}).catch(function(e){throw e})}},{key:"postFormDataMethod",value:function(e,t,a){var n=this,s={Accept:"application/json","Content-Type":"multipart/form-data"};a&&(s={Accept:"application/json","Content-Type":"multipart/form-data","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"post",url:e,headers:s,data:t}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void n.inValidToken():{status:"404"}})}},{key:"putMultiFiles",value:function(e,t){return fetch(e,{method:"PUT",body:t}).then(function(e){return e.json()}).catch(function(e){throw e})}},{key:"getImage",value:function(e,t){var a=this,n={Accept:"application/json","Content-Type":"application/json"};t&&(n={Accept:"application/json","Content-Type":"application/json","x-auth-token":localStorage.getItem("accessToken")});return it()({method:"get",url:e,headers:n}).then(function(e){return e}).catch(function(e){return e.response?"Invalid token."!==e.response.data?e.response:void a.inValidToken():{status:"404"}})}},{key:"checkStatus",value:function(e){return e.Error&&"Valid session required"===e.ErrText?(localStorage.removeItem("session_id"),e):e}}]),e}());a(686),a(53);function dt(e){return function(t){var a="",n="";return e?(n=e,a=ct.getProfileUrl+e):a=ct.MyProfileUrl,mt.getMethod(a,!0).then(function(e){200===e.status?(""==n&&(localStorage.setItem("fname",e.data.firstname),localStorage.setItem("lname",e.data.lastname),localStorage.setItem("ID",e.data._id)),t({type:_,profileData:e.data})):t({type:_,profileData:{}})})}}function ut(e){var t="";return t=e?ct.homeBuyerContacts+e:ct.addContact,function(e){return mt.getMethod(t,!0).then(function(t){200==t.status?e({type:ue,contacts:t.data}):e({type:ue,contacts:[]})})}}function pt(e){return function(e){return mt.getMethod(ct.userRole,!0).then(function(t){return e(t?{type:Ee,roles:t.data}:{type:Ee,roles:[]}),t?t.data:[]})}}function ht(e){return function(t){return mt.postMethod(ct.userRole,{name:e},!0).then(function(e){return t(e?{type:ve,roles:e.data}:{type:ve,roles:[]}),e.data})}}function gt(e){return function(t){var a=ct.RegisterUrl+"?id="+e;return mt.deleteMethod(a,!0).then(function(e){return 200===e.status?t({type:Ye,status:!0,UserMessage:"User has been removed."}):(e.status,t({type:Ye,status:!1,UserMessage:"Something went wrong. Please try again!"})),e})}}var ft=a(12),Et=a.n(ft),vt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={showLoader:!1,loggedFName:localStorage.getItem("fname"),loggedLName:localStorage.getItem("lname")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({showLoader:!0}),this.props.myProfileAction().then(function(t){e.setState({showLoader:!1})})}},{key:"handleChange",value:function(){var e="";e="collapsed"==this.props.miniActive?"":"collapsed",this.setState({},this.props.onUpdate(e))}},{key:"logout",value:function(){this.props.logout(),window.location.reload()}},{key:"componentDidMount",value:function(){if(window.innerWidth<991){var e=this;Et()(".sidebar .nav-link").click(function(){e.handleChange()})}}},{key:"render",value:function(){var e=this,t=(this.props.profileData.lastname?this.props.profileData.lastname:this.props.profileData.lastName&&this.props.profileData.lastName,localStorage.getItem("fname")+" "+localStorage.getItem("lname"));return s.a.createElement(s.a.Fragment,null,this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(I.a,{expand:"lg",className:"align-items-center nav-admin"},s.a.createElement(I.a.Brand,null,s.a.createElement("img",{src:P.a,alt:"Logo",className:"logo-mobile"})),s.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(f.a,{className:"ml-auto align-items-center"},s.a.createElement(f.a.Item,null,s.a.createElement(x.a,{variant:"transparent",className:"color-grey-1 pr-0"},s.a.createElement(O.a,{className:"w-18"}))),s.a.createElement(f.a.Item,null,s.a.createElement(M.a,{className:"user-dropdown"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"d-flex align-items-center font-14"},s.a.createElement("span",{className:"user-profile"},s.a.createElement("img",{src:Y.a,alt:""})),s.a.createElement("span",{className:"ml-2 user-dropdown-name"},t)),s.a.createElement(M.a.Menu,{className:"dropdown-menu-right"},s.a.createElement(M.a.Item,{href:"#/userProfile",style:{color:"black"}}," Profile  "),s.a.createElement(M.a.Item,{href:"#",onClick:function(){return e.logout()}},"Logout"))))),s.a.createElement(x.a,{variant:"transparent",className:"color-grey-1 pr-2",onClick:function(t){return e.handleChange(t)}},s.a.createElement(R.a,{className:"menu-icn"}),s.a.createElement(j.a,{className:"close-icn"})))))}}]),t}(s.a.Component),yt=Object(B.b)(function(e){return{isAuthenticated:e.reducer.isAuthenticated,profileData:e.reducer.profileData}},{logout:function(){return function(e){localStorage.removeItem("accessToken"),localStorage.removeItem("usertype"),e({type:z})}},myProfileAction:dt})(vt),bt=function(e){var t=e.miniActive,a=e.onUpdate,n=e.component,r=Object(g.a)(e,["miniActive","onUpdate","component"]);return s.a.createElement(h.b,Object.assign({},r,{render:function(e){return void 0!==localStorage.getItem("accessToken")&&""!==localStorage.getItem("accessToken")&&null!=localStorage.getItem("accessToken")?s.a.createElement(s.a.Fragment,null,s.a.createElement(S,{miniActive:t}),s.a.createElement("div",{className:t+" contentArea"},s.a.createElement(yt,{miniActive:t,onUpdate:a}),s.a.createElement(n,e))):s.a.createElement(h.a,{to:{pathname:"/login"}})}}))},Nt=a(24),Dt=a(1399),kt=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(I.a,{expand:"lg",className:"nav-head align-items-end"},s.a.createElement(I.a.Brand,{href:""},s.a.createElement("img",{src:P.a,alt:"logo",style:{width:"180px"}})),s.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(f.a,{className:"ml-auto"},s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/home",className:"nav-link",activeClassName:"active"},"Home")),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/register",className:"nav-link",activeClassName:"active"},"Register")),s.a.createElement(f.a.Item,null,s.a.createElement(p.c,{to:"/login",className:"nav-link",activeClassName:"active"},"Login"))))))}}]),t}(s.a.Component),Tt=a(6),Ct=a(3),wt=a(1400),At=a(1401),St={email:"",password:""},It=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={accountLocked:!1,passwordNotSet:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Nt.a)({},e.target.name,e.target.value))}},{key:"loginAction",value:function(e){var t=this;e.email=e.email.toLowerCase(),localStorage.setItem("EMAIL",e.email),this.props.loginUserAction(e).then(function(e){200==e.status&&t.props.myProfileAction(),403===e.status&&"Account locked."===e.data&&t.setState({LoginMessage:"Your account has been locked for more than 3 failed login attemps",accountLocked:!0}),400===e.status&&"Password not set"===e.data&&(localStorage.setItem("PS",!1),t.setState({LoginMessage:"Your access password is not set.",passwordNotSet:!0,accountLocked:!0}))})}},{key:"postLogin",value:function(){var e=localStorage.getItem("usertype");null!==e&&"ADMIN"===e.toUpperCase()?this.props.history.push("/RegistrationRequests"):null!==e&&"BUYERAGENT"===e.toUpperCase()?this.props.history.push("/dashboard"):this.props.history.push("/transactions")}},{key:"goToRegister",value:function(){this.props.history.push("/register")}},{key:"goToForgotPassword",value:function(){this.state.passwordNotSet?this.props.history.push("/resetpassword/setpass"):this.props.history.push("/forgotpassword")}},{key:"render",value:function(){var e=this;return localStorage.getItem("accessToken")&&this.postLogin(),s.a.createElement("div",null,s.a.createElement(kt,null),s.a.createElement("div",{className:"loginBg loginContent align-items-end flex-column"},s.a.createElement("div",{className:"loginBox"},s.a.createElement("h4",null,"Login to your account"),(""!=this.props.LoginMessage&&void 0!==this.props.LoginMessage||void 0!==this.state.LoginMessage)&&s.a.createElement(Dt.a,{variant:"danger"},this.state.LoginMessage?this.state.LoginMessage:this.props.LoginMessage),this.state.accountLocked||0!=this.state.passwordNotSet?s.a.createElement(x.a,{variant:"link",className:"pr-0 font-14 font-500",style:{color:"#4a90e2"},onClick:function(){return e.goToForgotPassword()}}," Please Click here to reset your password."):s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:St,enableReinitialize:!0,validationSchema:Tt.object().shape({email:Tt.string().email("Please enter valid Email address.").required("Please enter Email."),password:Tt.string().nullable().trim().required("Please enter Password.").min(6,"Password should be of minimum 6 character.")}),onSubmit:function(t,a){a.setSubmitting;e.loginAction(t)}},function(t){t.handleChange;var a,n=t.errors,r=t.values,l=(t.handleBlur,t.setFieldValue,t.submitForm,t.touched);t.loginError;return s.a.createElement(Ct.c,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Email address"),s.a.createElement("div",{className:"icon-wrapper input-group"},s.a.createElement(Ct.b,(a={type:"email",name:"email"},Object(Nt.a)(a,"type","email"),Object(Nt.a)(a,"value",r.email),Object(Nt.a)(a,"className","form-control form-control-lg"+(n.email&&l.email?" is-invalid":"")),a)),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(wt.a,null)),s.a.createElement(Ct.a,{name:"email",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("div",{className:"form-group mb-0"},s.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password"),s.a.createElement("div",{className:"icon-wrapper input-group"},s.a.createElement(Ct.b,{name:"password",type:"password",value:r.password,className:"form-control form-control-lg "+(n.password&&l.password?" is-invalid":"")}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(At.a,null)),s.a.createElement(Ct.a,{name:"password",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("div",{className:"form-group text-right"},s.a.createElement(x.a,{variant:"link",className:"pr-0 font-14 font-500",style:{color:"#4a90e2"},onClick:function(){return e.goToForgotPassword()}},"Forgot Password?")),s.a.createElement("div",{className:"form-group pt-2"},s.a.createElement(x.a,{type:"submit",variant:"primary",size:"lg",block:!0,className:"btn-blue btn-medium"},"Login")),s.a.createElement("div",{className:"form-group pt-4 text-center mb-0"},s.a.createElement("span",{className:"font-14 color-grey-1 font-300"},"Don't have an account?")," ",s.a.createElement(x.a,{variant:"link",className:"pl-0 pr-0 font-14 font-500",style:{color:"#4a90e2"},onClick:function(){return e.goToRegister()}},"Register")))}))))}}]),t}(s.a.Component),xt=Object(B.b)(function(e){return{isAuthenticated:e.reducer.isAuthenticated,LoginMessage:e.reducer.LoginMessage}},{loginUserAction:function(e){return e={data:e},function(t){return mt.postMethod(ct.LoginUrl,e,!1).then(function(e){if(200===e.status){var a=e.data,n=JSON.parse(atob(a.split(".")[1]));localStorage.setItem("accessToken",a),localStorage.setItem("usertype",n.usertype),localStorage.setItem("ID",n._id),t({type:F,isAuthenticated:!0,LoginMessage:""})}else 403===e.status?t({type:F,isAuthenticated:!1,LoginMessage:"Please try after some time, your account is still under review."}):(e.status,t({type:F,isAuthenticated:!1,LoginMessage:"Incorrect credentials."}));return e})}},myProfileAction:dt})(It),Mt=a(185),Ot=a.n(Mt),Rt=a(28),jt=a(1439),Ut=a(1402),Yt=a(635),Lt=a(1403),Pt=a(636),Bt=a.n(Pt),Vt=a(45),Ft=a.n(Vt),_t=a(5),Gt=a.n(_t),zt=(a(88),a(137)),Ht=a.n(zt),qt=a(138),Wt=a.n(qt),Kt=a(38),Qt=a.n(Kt),Zt=a(68),Xt=a.n(Zt),Jt=new Date,$t=Jt.getMonth()+1+"/"+Jt.getDate()+"/"+Jt.getFullYear(),ea=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.state={startDate:e.getUserData().licenseExpirationDate,firstname:e.getUserData().firstname,lastname:e.getUserData().lastname,email:e.getUserData().email,recoveryEmail:e.getUserData().recoveryEmail,password:e.getUserData().password,confirmPassword:e.getUserData().confirmPassword,mobileNumber:e.getUserData().mobileNumber,otherNumber:e.getUserData().otherNumber,brokerLicenseNo:e.getUserData().brokerLicenseNo,licenseExpirationDate:e.getUserData().licenseExpirationDate,knowAboutUs:e.getUserData().knowAboutUs,isEmailExist:!1},a.validatorTypes=function(){var e;return Qt.a.object().keys((e={email:Qt.a.string().email().required().label("Email ID"),firstname:Qt.a.string().required().label("First Name"),lastname:Qt.a.string().required().label("Last Name"),recoveryEmail:Qt.a.string().email().required().label("Confirm Email ID")},Object(Nt.a)(e,"recoveryEmail",Qt.a.ref("email")),Object(Nt.a)(e,"password",Qt.a.string().min(6).max(30).required().label("Password")),Object(Nt.a)(e,"confirmPassword",Qt.a.string().min(6).max(30).required()),Object(Nt.a)(e,"confirmPassword",Qt.a.ref("password")),Object(Nt.a)(e,"mobileNumber",Qt.a.string().regex(new RegExp("^[0-9]{3}-[0-9]{3}-[0-9]{4}?$")).required().label("Mobile No")),Object(Nt.a)(e,"otherNumber",Qt.a.string().allow("").regex(new RegExp("^[0-9]{3}-[0-9]{3}-[0-9]{4}?$")).label("Phone No. (Office)")),Object(Nt.a)(e,"brokerLicenseNo",Qt.a.string().required().label("Broker License No")),e))},a.getValidatorData=a.getValidatorData.bind(Object(Rt.a)(a)),a.renderHelpText=a.renderHelpText.bind(Object(Rt.a)(a)),a.isValidated=a.isValidated.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getValidatorData",value:function(){return{firstname:this.props.getUserData().firstname,lastname:this.props.getUserData().lastname,email:this.props.getUserData().email,recoveryEmail:this.props.getUserData().recoveryEmail,password:this.props.getUserData().password,confirmPassword:this.props.getUserData().confirmPassword,mobileNumber:this.props.getUserData().mobileNumber,otherNumber:this.props.getUserData().otherNumber,brokerLicenseNo:this.props.getUserData().brokerLicenseNo,licenseExpirationDate:this.props.getUserData().licenseExpirationDate,knowAboutUs:this.props.getUserData().knowAboutUs}}},{key:"isValidated",value:function(){var e=this;return new Promise(function(t,a){e.props.validate(function(n){n||e.state.isEmailExist?a():t()})})}},{key:"renderHelpText",value:function(e,t){return s.a.createElement("div",{className:"val-err-tooltip",key:t},s.a.createElement("span",null,e))}},{key:"onChange",value:function(e){var t=e.target.value;"email"===e.target.name&&this.checkEmailExist(t),this.setState(Object(Nt.a)({},e.target.name,t)),this.props.updateUserData(e.target.name,t)}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate.format("MM/DD/YYYY")});var a=t.startDate.format("MM/DD/YYYY");this.props.updateUserData("licenseExpirationDate",a)}},{key:"getErrorMsg",value:function(e,t){var a="";return"firstname"!==e&&"lastname"!==e&&"brokerLicenseNo"!==e||void 0!==t[e]&&null!==t[e]&&""!==t[e]&&("firstname"===e&&(a="Please enter First Name"),"lastname"===e&&(a="Please enter Last Name"),"brokerLicenseNo"===e&&(a="Please enter Broker License No")),"email"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Email"),1===t[e].length&&(a="Please enter valid Email address")),"password"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Password"),1===t[e].length&&(a="Password should be of minimum 6 character")),"confirmPassword"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Confirm Password required"),1===t[e].length&&(a="Confirm Password should be same as Password entered")),"recoveryEmail"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Confirm email"),1===t[e].length&&(a="Confirm Email Id should be same as Email Id")),"mobileNumber"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Mobile No"),1===t[e].length&&(a="Mobile No Must be of 10 digits")),"otherNumber"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Phone No"),1===t[e].length&&(a="Phone No Must be of 10 digits")),a}},{key:"checkEmailExist",value:function(e){var t=this;mt.getMethod(ct.emailCheckUrl+"?email="+e,!1).then(function(e){!0===e.data?t.setState({isEmailExist:!0}):t.setState({isEmailExist:!1})})}},{key:"render",value:function(){var e=this.state.startDate;return s.a.createElement("div",{className:"step-content"},s.a.createElement("h4",{className:"title-blue mb-3"},"Personal Information"),s.a.createElement(jt.a,{className:"form-sm"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"First Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.firstname,onChange:this.onChange.bind(this),name:"firstname",type:"text",size:"lg",onBlur:this.props.handleValidation("firstname")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("firstname",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Last Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.lastname,onChange:this.onChange.bind(this),name:"lastname",type:"text",size:"lg",onBlur:this.props.handleValidation("lastname")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("lastname",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Email ID",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",name:"email",defaultValue:this.state.email,onChange:this.onChange.bind(this),type:"email",size:"lg",onBlur:this.props.handleValidation("email")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("email",this.props.errors))),this.state.isEmailExist&&s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText("Email address already exist.")))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Confirm Email ID",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",name:"recoveryEmail",defaultValue:this.state.recoveryEmail,onChange:this.onChange.bind(this),type:"email",size:"lg",onBlur:this.props.handleValidation("recoveryEmail")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("recoveryEmail",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Create Password",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.password,onChange:this.onChange.bind(this),name:"password",type:"password",size:"lg",onBlur:this.props.handleValidation("password")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("password",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Confirm Password",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.confirmPassword,onChange:this.onChange.bind(this),name:"confirmPassword",type:"password",size:"lg",onBlur:this.props.handleValidation("confirmPassword")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("confirmPassword",this.props.errors)),"                  ")))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Mobile No.",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:this.state.mobileNumber,name:"mobileNumber",onChange:this.onChange.bind(this)},function(e){return s.a.createElement(jt.a.Control,e)}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("mobileNumber",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Phone No. (Office)"),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:this.state.otherNumber,name:"otherNumber",onChange:this.onChange.bind(this)},function(e){return s.a.createElement(jt.a.Control,e)}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("otherNumber",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:8},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Broker License No.",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.brokerLicenseNo,onChange:this.onChange.bind(this),name:"brokerLicenseNo",type:"text",size:"lg",onBlur:this.props.handleValidation("brokerLicenseNo")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("brokerLicenseNo",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"License Expiration Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:this.state.startDate,onEvent:this.setStartDate,minDate:$t},s.a.createElement(jt.a.Control,{name:"licenseExpirationDate",type:"text",size:"lg",placeholder:"MM/DD/YYYY",value:e}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(Bt.a,null)))),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("licenseExpirationDate",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:8},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"How you know about us?"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{onChange:this.onChange.bind(this),defaultValue:this.state.knowAboutUs,name:"knowAboutUs",className:"form-control form-control-lg"},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Advertisement"},"Advertisement"))))))))}}]),t}(s.a.Component),ta=Ht()(Wt.a)(ea),aa={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},na=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).beforeMaskedValueChange=function(e,t,n){var s=e.value,r=e.selection,l=r?r.start:null;return s.endsWith("-")&&"-"!==n&&!a.state.value.endsWith("-")&&(l===s.length&&(r={start:--l,end:l}),s=s.slice(0,-1)),{value:s,selection:r}},a.state={name:e.getUserData().companyInformation.name,website:e.getUserData().companyInformation.website,address:e.getUserData().companyInformation.address,zipcode:e.getUserData().companyInformation.zipcode,city:e.getUserData().companyInformation.city,state:e.getUserData().companyInformation.state,phoneNumber:e.getUserData().companyInformation.phoneNumber,faxNumber:e.getUserData().companyInformation.faxNumber,typeOfBusiness:e.getUserData().companyInformation.typeOfBusiness,companySize:e.getUserData().companyInformation.companySize},a.validatorTypes=function(){return Qt.a.object().keys({name:Qt.a.string().required().label("Company Name"),website:Qt.a.string().uri().label("Company Website"),address:Qt.a.string().required().label("Company Address"),zipcode:Qt.a.string().regex(new RegExp("^[0-9]{5}(?:-[0-9]{4})?$")).required(),city:Qt.a.string().required().label("City"),state:Qt.a.string().required().label("State"),phoneNumber:Qt.a.string().regex(new RegExp("^[0-9]{3}-[0-9]{3}-[0-9]{4}?$")).required().label("Company Phone No")})},a.getValidatorData=a.getValidatorData.bind(Object(Rt.a)(a)),a.renderHelpText=a.renderHelpText.bind(Object(Rt.a)(a)),a.isValidated=a.isValidated.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getValidatorData",value:function(){return{name:this.props.getUserData().companyInformation.name,website:this.props.getUserData().companyInformation.website,address:this.props.getUserData().companyInformation.address,zipcode:this.state.zipcode,city:this.props.getUserData().companyInformation.city,state:this.props.getUserData().companyInformation.state,phoneNumber:this.props.getUserData().companyInformation.phoneNumber,faxNumber:this.props.getUserData().companyInformation.faxNumber,typeOfBusiness:this.props.getUserData().companyInformation.typeOfBusiness,companySize:this.props.getUserData().companyInformation.companySize}}},{key:"isValidated",value:function(){var e=this;return new Promise(function(t,a){e.props.validate(function(e){return e?(a(),!1):(t(),!0)})})}},{key:"renderHelpText",value:function(e,t){return s.a.createElement("div",{className:"val-err-tooltip",key:t},s.a.createElement("span",null,e))}},{key:"onChange",value:function(e){"zipcode"===e.target.name?(this.setState({zipcode:e.target.value}),this.props.updateUserData("zipcode",e.target.value)):(this.setState(Object(Nt.a)({},e.target.name,e.target.value)),this.props.updateUserData(e.target.name,e.target.value))}},{key:"getErrorMsg",value:function(e,t){var a="";return"name"!==e&&"address"!==e&&"city"!==e&&"state"!==e||void 0!==t[e]&&null!==t[e]&&""!==t[e]&&("name"===e&&(a="Please enter Company Name"),"address"===e&&(a="Please enter Company Address"),"city"===e&&(a="Please enter City"),"state"===e&&(a="Please select State")),"zipcode"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Zip code"),1===t[e].length&&(a="Please enter valid Zip code")),"phoneNumber"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Phone No"),1===t[e].length&&(a="Phone No Must be of 10 digits")),"website"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(1===t[e].length&&(a="Company Website must be a valid url"),2===t[e].length&&delete t.website),a}},{key:"render",value:function(){var e=[];for(var t in aa){var a=s.a.createElement("option",{key:t,value:t},aa[t]);e.push(a)}this.state.zipcode.length;return s.a.createElement("div",{className:"step-content"},s.a.createElement("h4",{className:"title-blue mb-3"},"Company Information"),s.a.createElement(jt.a,{className:"form-sm"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.name,onChange:this.onChange.bind(this),name:"name",type:"text",size:"lg",onBlur:this.props.handleValidation("name")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("name",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Website"),s.a.createElement(jt.a.Control,{maxLength:"50",defaultValue:this.state.website,onChange:this.onChange.bind(this),name:"website",type:"text",size:"lg"}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("website",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Address",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{defaultValue:this.state.address,onChange:this.onChange.bind(this),name:"address",type:"text",size:"lg",onBlur:this.props.handleValidation("address")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("address",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Zip Code",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{maxLength:"14",defaultValue:this.state.zipcode,onChange:this.onChange.bind(this),name:"zipcode",type:"text",size:"lg",onBlur:this.props.handleValidation("zipcode")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("zipcode",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"City",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{defaultValue:this.state.city,onChange:this.onChange.bind(this),name:"city",type:"text",size:"lg",onBlur:this.props.handleValidation("city")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("city",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"State",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"state",id:"",className:"form-control form-control-lg",defaultValue:this.state.state,onChange:this.onChange.bind(this)},s.a.createElement("option",{value:""},"Select"),e)),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("state",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Phone No.",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:this.state.phoneNumber,name:"phoneNumber",onChange:this.onChange.bind(this)},function(e){return s.a.createElement(jt.a.Control,e)}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("phoneNumber",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Fax "),s.a.createElement(jt.a.Control,{maxLength:"14",defaultValue:this.state.faxNumber,onChange:this.onChange.bind(this),name:"faxNumber",type:"text",size:"lg"})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Type of Business"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"typeOfBusiness",defaultValue:this.state.typeOfBusiness,onChange:this.onChange.bind(this),id:"",className:"form-control form-control-lg"},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Brokerage"},"Brokerage"))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Size"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"companySize",defaultValue:this.state.companySize,onChange:this.onChange.bind(this),id:"",className:"form-control form-control-lg"},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"1-10"},"Small (1-10)"),s.a.createElement("option",{value:"11-24"},"Medium (11-24)"),s.a.createElement("option",{value:"24+"},"Large (24+)"))))))))}}]),t}(s.a.Component),sa=Ht()(Wt.a)(na),ra=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"step-content"},s.a.createElement("h4",{className:"title-blue mb-3"},"Commission"))}}]),t}(s.a.Component),la=a(1404),oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={user:e.getUserData()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"stepChange",value:function(e){this.props.jumpToStep(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"step-content last-step"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"title-blue mb-3"},"Personal Information")),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.stepChange(0)}},s.a.createElement(la.a,null)))),s.a.createElement(jt.a,{className:"form-sm"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"First Name"),s.a.createElement("p",{className:"form-val"},this.state.user.firstname))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Last Name"),s.a.createElement("p",{className:"form-val"},this.state.user.lastname)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Email ID"),s.a.createElement("p",{className:"form-val email-case"},this.state.user.email))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Recovery Email ID"),s.a.createElement("p",{className:"form-val email-case"},this.state.user.recoveryEmail)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Create Password"),s.a.createElement("p",{className:"form-val"},"******"))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Confirm Password"),s.a.createElement("p",{className:"form-val"},"******")))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Mobile No."),s.a.createElement("p",{className:"form-val"},this.state.user.mobileNumber))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Phone No. (Office)"),s.a.createElement("p",{className:"form-val"},""!==this.state.user.otherNumber?this.state.user.otherNumber:"-")))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Broker License No."),s.a.createElement("p",{className:"form-val"},this.state.user.brokerLicenseNo))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"License Expiration Date"),s.a.createElement("p",{className:"form-val"},this.state.user.licenseExpirationDate)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"How you know about us?"),s.a.createElement("p",{className:"form-val"},""!==this.state.user.knowAboutUs?this.state.user.knowAboutUs:"-"))))),s.a.createElement(Ut.a,{className:"mt-2"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"title-blue mb-3"},"Company Information")),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.stepChange(1)}},s.a.createElement(la.a,null)))),s.a.createElement(jt.a,{className:"form-sm"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Name"),s.a.createElement("p",{className:"form-val"},this.state.user.companyInformation.name)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Website"),s.a.createElement("p",{className:"form-val"},""!==this.state.user.companyInformation.website?this.state.user.companyInformation.website:"-")))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Address"),s.a.createElement("p",{className:"form-val email-case"},this.state.user.companyInformation.address)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Zip Code"),s.a.createElement("p",{className:"form-val"},this.state.user.companyInformation.zipcode))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"City"),s.a.createElement("p",{className:"form-val"},this.state.user.companyInformation.city))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"State"),s.a.createElement("p",{className:"form-val"},this.state.user.companyInformation.state)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Phone No."),s.a.createElement("p",{className:"form-val"},this.state.user.companyInformation.phoneNumber))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Fax "),s.a.createElement("p",{className:"form-val"},""!==this.state.user.companyInformation.faxNumber?this.state.user.companyInformation.faxNumber:"-")))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Type of Business"),s.a.createElement("p",{className:"form-val"},""!==this.state.user.companyInformation.typeOfBusiness?this.state.user.companyInformation.typeOfBusiness:"-"))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Company Size"),s.a.createElement("p",{className:"form-val"},""!==this.state.user.companyInformation.companySize?this.state.user.companyInformation.companySize:"-"))))))}}]),t}(s.a.Component),ia=new Date,ca=ia.getMonth()+1+"/"+ia.getDate()+"/"+ia.getFullYear(),ma=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).defaultState=(a={usertype:"BUYERAGENT",firstname:"",lastname:"",email:"",recoveryEmail:"",password:"",confirmPassword:"",mobileNumber:"",otherNumber:"",brokerLicenseNo:"",licenseExpirationDate:ca,knowAboutUs:"",companyInformation:{name:"",website:"",address:"",zipcode:"",city:"",state:"",phoneNumber:"",faxNumber:"",typeOfBusiness:"",companySize:""},address:"",bio:"-",education:" ",certifications:"",awards:"",jobTitle:"",quote:"",avatar:"-",socialMediaHandles:{facebook:"",twitter:"",instagram:""}},Object(Nt.a)(a,"education",[]),Object(Nt.a)(a,"certifications",[]),Object(Nt.a)(a,"awards",[]),Object(Nt.a)(a,"regMsgDisplay",!1),a),n.state=n.defaultState,n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getUserData",value:function(){return this.state}},{key:"updateUserData",value:function(e,t){this.setState(Object(Nt.a)({},e,t))}},{key:"updateUserCmpnyData",value:function(e,t){var a=this.state.companyInformation;a[e]=t,this.setState({companyInformation:a})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"getLastStep",value:function(e){this.setState({regMsgDisplay:!1}),0!==e&&1!==e&&2!==e||Et()(".saveBtn").html("Next"),3===e&&Et()(".saveBtn").html("Confirm & Register"),4===e&&this.submitAction()}},{key:"submitAction",value:function(){var e=this,t=this.state;delete t.recoveryEmail,delete t.confirmPassword,t.mobileNumber=t.mobileNumber.replace(/\-/g,""),t.otherNumber=t.otherNumber.replace(/\-/g,""),t.companyInformation.phoneNumber=t.companyInformation.phoneNumber.replace(/\-/g,""),this.props.registerUserAction(t).then(function(t){!0===e.props.status&&(e.setState(e.defaultState),e.props.history.push("/thankyou")),e.setState({regMsgDisplay:!0})})}},{key:"checkLoggedIn",value:function(){var e=localStorage.getItem("usertype");null!==e&&"ADMIN"===e.toUpperCase()?this.props.history.push("/RegistrationRequests"):this.props.history.push("/transactions")}},{key:"render",value:function(){var e=this;localStorage.getItem("accessToken")&&this.checkLoggedIn();var t="multi-step";!0===this.state.regMsgDisplay&&!0===this.props.status&&(t="multi-step error"),!0===this.state.regMsgDisplay&&!1===this.props.status&&(t="multi-step error");var a=[{name:"Personal Info",component:s.a.createElement(ta,{getUserData:function(){return e.getUserData()},updateUserData:function(t,a){e.updateUserData(t,a)}})},{name:"Company Info",component:s.a.createElement(sa,{getUserData:function(){return e.getUserData()},updateUserData:function(t,a){e.updateUserCmpnyData(t,a)}})},{name:"Commission",component:s.a.createElement(ra,null)},{name:"Review",component:s.a.createElement(oa,{getUserData:function(){return e.getUserData()}})}];return s.a.createElement("div",{className:"reg-page"},s.a.createElement(kt,null),s.a.createElement("div",{className:"loginBg"},s.a.createElement("div",{className:"step-progress"},s.a.createElement("div",{className:"reg-title-wrapper"},s.a.createElement("h4",{className:"title-big mt-0 pt-2"},"Create Your Account")),!0===this.state.regMsgDisplay&&""!=this.props.RegMessage&&void 0!==this.props.RegMessage&&!0===this.props.status&&s.a.createElement(Dt.a,{variant:"success"},this.props.RegMessage),!0===this.state.regMsgDisplay&&""!=this.props.RegMessage&&void 0!==this.props.RegMessage&&!1===this.props.status&&s.a.createElement(Dt.a,{variant:"danger"},this.props.RegMessage),s.a.createElement("div",{className:t},s.a.createElement(Ot.a,{steps:a,showNavigation:!0,backButtonCls:"btn btn-sm btn-primary btn-blue btn-outlined w-140 mr-3",nextButtonCls:"btn btn-sm btn-primary btn-blue w-140 saveBtn",onStepChange:function(t){return e.getLastStep(t)},hocValidationAppliedTo:[0,1]})))))}}]),t}(s.a.Component),da=Object(B.b)(function(e){return{status:e.reducer.status,RegMessage:e.reducer.RegMessage}},{registerUserAction:function(e){return function(t){return mt.postMethod(ct.RegisterUrl,e,!1).then(function(e){200===e.status?"User already registered."===e.data?t({type:V,status:!1,RegMessage:"Email address already exist."}):t({type:V,status:!0,RegMessage:"Thanks for registering with us, Our team will review your application and you will be notified once your account is Approved."}):(e.status,t({type:V,status:!1,RegMessage:"Something went wrong. Please try again!"}))})}}})(ma),ua={email:""},pa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={forgotSuccess:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Nt.a)({},e.target.name,e.target.value))}},{key:"forgotpasswordAction",value:function(e){var t=this;e.email=e.email.toLowerCase(),this.props.forgotPasswordAction(e).then(function(e){200===e.status&&t.setState({forgotSuccess:!0})})}},{key:"goToLogin",value:function(){this.props.history.push("/login")}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(kt,null),s.a.createElement("div",{className:"loginBg loginContent align-items-end flex-column"},s.a.createElement("div",{className:"loginBox"},this.state.forgotSuccess?s.a.createElement("div",{className:"message-log-before mb-3"},s.a.createElement("h4",{className:"mb-3"},"Reset Instructions"),s.a.createElement("p",{className:"font-14 color-grey-1 font-400"},"We have received your request, Please check your inbox for the password reset instructions."),s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-medium btn btn-block btn-lg",onClick:function(){return e.goToLogin()}},"Login")):s.a.createElement("div",null,s.a.createElement("h4",null,"Forgot Password?"),""!=this.props.forgotdata&&void 0!==this.props.forgotdata&&s.a.createElement(Dt.a,{variant:"danger"},this.props.forgotdata),s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:ua,enableReinitialize:!0,validationSchema:Tt.object().shape({email:Tt.string().email("Please enter valid Email address.").required("Please enter Email.")}),onSubmit:function(t,a){a.setSubmitting;e.forgotpasswordAction(t)}},function(t){t.handleChange;var a,n=t.errors,r=t.values,l=(t.handleBlur,t.setFieldValue,t.submitForm,t.touched);t.loginError;return s.a.createElement(Ct.c,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Email address"),s.a.createElement("div",{className:"icon-wrapper input-group"},s.a.createElement(Ct.b,(a={type:"email",name:"email"},Object(Nt.a)(a,"type","email"),Object(Nt.a)(a,"value",r.email),Object(Nt.a)(a,"className","form-control form-control-lg"+(n.email&&l.email?" is-invalid":"")),a)),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(wt.a,null)),s.a.createElement(Ct.a,{name:"email",component:"div",className:"invalid-feedback",style:{display:"block"}}),s.a.createElement("p",{className:"font-14 color-grey-1 font-300 mt-1"},"Enter your email id and we will email you the instructions to reset your password."))),s.a.createElement("div",{className:"form-group pt-1"},s.a.createElement(x.a,{type:"submit",variant:"primary",size:"lg",block:!0,className:"btn-blue btn-medium"},"Submit")),s.a.createElement("div",{className:"form-group pt-4 text-center mb-0"},s.a.createElement("span",{className:"font-14 color-grey-1 font-300"},"Remember Password ?")," ",s.a.createElement(x.a,{variant:"link",className:"pl-0 pr-0 font-14 font-500",style:{color:"#4a90e2"},onClick:function(){return e.goToLogin()}},"Login")))})))))}}]),t}(s.a.Component),ha=Object(B.b)(function(e){return{forgotdata:e.reducer.forgotdata,forgotsuccess:e.reducer.forgotsuccess}},{forgotPasswordAction:function(e){return function(t){return mt.postMethod(ct.forgotpassword,e,!1).then(function(e){return 200===e.status?t({type:H,forgotsuccess:e.data}):t({type:H,forgotdata:e.data}),e})}}})(pa),ga={password:"",confirmPassword:""},fa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={showResetPassword:!1,token:null,passwordSuccess:!1,changedPasswordSuccess:!1,LoginMessage:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onChange",value:function(e){this.setState(Object(Nt.a)({},e.target.name,e.target.value))}},{key:"componentWillMount",value:function(){if(this.props.match.params.token){var e=this.props.match.params.token;this.setState({showResetPassword:!0,token:e})}}},{key:"goToLogin",value:function(){this.props.history.push("/login")}},{key:"resetUserPassword",value:function(e){var t=this;if(localStorage.getItem("PS")){this.setState({psemail:localStorage.getItem("EMAIL"),ps:!0});var a={email:this.state.psemail,password:e.password};this.props.validateResetTokenAction(null,a,"SETPASS").then(function(e){e&&(localStorage.clear(),200==e.status&&t.setState({changedPasswordSuccess:!0,showResetPassword:null,passwordSuccess:null}))})}else{var n={password:e.password};this.props.validateResetTokenAction(this.state.token,n).then(function(e){e&&t.setState({passwordSuccess:!0,successMessage:"Your Password has been successfully updated"})})}}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(kt,null),s.a.createElement("div",{className:"loginBg loginContent align-items-end flex-column"},s.a.createElement("div",{className:"loginBox"},""!=this.state.LoginMessage&&void 0!==this.state.LoginMessage&&s.a.createElement(Dt.a,{variant:"danger"},this.props.LoginMessage),this.state.passwordSuccess?s.a.createElement(s.a.Fragment,null,s.a.createElement(Dt.a,{variant:"success"},this.state.successMessage),s.a.createElement(x.a,{variant:"link",className:"pr-0 font-14 font-500",style:{color:"#4a90e2"},onClick:function(){return e.goToLogin()}}," Please Click Here to login to your account")):"",this.state.showResetPassword&&!this.state.passwordSuccess?s.a.createElement("div",null,s.a.createElement("h4",null,"Reset Password"),s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:ga,enableReinitialize:!0,validationSchema:Tt.object().shape({password:Tt.string().required("Please enter Password").min(6,"Password should be of minimum 6 character."),confirmPassword:Tt.string().when("password",{is:function(e){return!!(e&&e.length>0)},then:Tt.string().oneOf([Tt.ref("password")],"Confirm Password should be same as Password entered")}).required("Please enter Confirm Password").min(6,"Password should be of minimum 6 character.")}),onSubmit:function(t,a){a.setSubmitting;e.resetUserPassword(t)}},function(e){var t=e.handleChange,a=e.errors,n=e.values,r=(e.handleBlur,e.setFieldValue,e.submitForm,e.touched);e.loginError;return s.a.createElement(Ct.c,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"password"},"Password"),s.a.createElement("div",{className:"icon-wrapper input-group"},s.a.createElement(Ct.b,{type:"password",name:"password",onChange:t,value:n.password,className:"form-control form-control-lg"+(a.password&&r.password?" is-invalid":"")}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(At.a,null)),s.a.createElement(Ct.a,{name:"password",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"confirmPassword"},"Confirm Password"),s.a.createElement("div",{className:"icon-wrapper input-group"},s.a.createElement(Ct.b,{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:t,className:"form-control form-control-lg"+(a.confirmPassword&&r.confirmPassword?" is-invalid":"")}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(At.a,null)),s.a.createElement(Ct.a,{name:"confirmPassword",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("div",{className:"form-group pt-2"},s.a.createElement(x.a,{type:"submit",variant:"primary",size:"lg",block:!0,className:"btn-blue btn-medium"},"Submit")))})):this.state.showResetPassword||null==this.state.showResetPassword||this.state.passwordSuccess||null==this.state.passwordSuccess?this.state.changedPasswordSuccess?s.a.createElement("div",{className:"message-log-before mb-3"},s.a.createElement("h4",{className:"mb-3"},"Reset Password"),s.a.createElement("p",{className:"font-14 color-grey-1 font-400"},"Created Password Successfully."),s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-medium btn btn-block btn-lg",onClick:function(){return e.goToLogin()}},"Login")):"":s.a.createElement("div",{className:"message-log-before mb-3"},s.a.createElement("h4",{className:"mb-3"},"Reset Password"),s.a.createElement("p",{className:"font-14 color-grey-1 font-400"},"The Token You provided is either INVALID or EXPIRED.")))))}}]),t}(s.a.Component),Ea=Object(B.b)(function(e){return{isAuthenticated:e.reducer.isAuthenticated,LoginMessage:e.reducer.LoginMessage}},{validateResetTokenAction:function(e,t,a){return function(n){var s="";return s=a?ct.setVendorPassword:ct.validateResetPasswordToken+e,mt.postMethod(s,t).then(function(e){return 200===e.status?n({type:K,tokensuccess:e.data}):n({type:K,tokenfailed:e.data}),e})}}})(fa),va=(a(257),a(1447)),ya=a(1448),ba=a(69),Na=a.n(ba),Da=a(157),ka=a.n(Da),Ta=a(139),Ca=a.n(Ta),wa=a(65),Aa=a(127),Sa=a.n(Aa),Ia=a(134),xa=a.n(Ia);var Ma=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"formatNumber",value:function(e){return e.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"render",value:function(){var e=this;return this.props.dashboardTranscations&&0==this.props.dashboardTranscations.length?s.a.createElement("div",{className:"dash-no-records"},"No Records Found"):s.a.createElement(va.a,{className:"dash-slide-transaction",interval:!1,indicators:!1,fade:!0,controls:!(this.props.dashboardTranscations&&this.props.dashboardTranscations.length<=1)},this.props.dashboardTranscations&&this.props.dashboardTranscations.map(function(t){return s.a.createElement(va.a.Item,{onClick:function(){e.props.history.push("/transactions/detail/"+t._id)},key:t._id},s.a.createElement(ya.a,null,s.a.createElement("div",{className:"dash-card-img"},t.property.image.length<=0?s.a.createElement(ya.a.Img,{variant:"top",src:Na.a}):s.a.createElement(ya.a.Img,{variant:"top",src:ct.AdminCreateTransactionUrl+"/upload?id="+t.ownerId+"&img="+t.property.image[0]})),s.a.createElement(ya.a.Body,{className:"p-3"},s.a.createElement("h4",{className:"font-20 mb-0 color-blue-3"},t.property.street+(""!=t.property.street1?", "+t.property.street1:"")+" "+t.property.city),s.a.createElement("h5",{className:"font-18 color-blue-3"},(t.property.state?t.property.state+" ":"")+t.property.zipcode),s.a.createElement(ya.a.Title,{className:"font-24 font-600"},"$",e.formatNumber(t.agreedOpenPrice)),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,s.a.createElement("div",{style:{lineHeight:"1.1em"}},s.a.createElement("span",{class:"color-grey-2 font-14 font-500"},"Status:\xa0"),s.a.createElement("span",{class:"color-light-blue-1 font-14 font-600"},t.status)),s.a.createElement("div",{style:{lineHeight:"1.1em"}},s.a.createElement("span",{class:"color-grey-2 font-14 font-500"},"Updated on:\xa0"),s.a.createElement("span",{class:"color-grey-1 font-14 font-500"},Gt()(t.modifiedDate).format("MM/DD/YYYY, hh:mm a")))),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},s.a.createElement("div",{className:"trans-progress-circle"},s.a.createElement("span",{className:"circle-val"},"20%"),s.a.createElement(wa.a,{className:"single-circle circle1",value:10,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#45a751"})}),s.a.createElement(wa.a,{className:"single-circle circle2",value:20,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#e88741"})}),s.a.createElement(wa.a,{className:"single-circle circle3",value:100,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#ebebeb"})})))))))}))}}]),t}(s.a.Component);a(53);var Oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={viewMode:"month",responseData:{},chartOptions:{chart:{height:"315"},title:{text:""},series:[{data:[],name:"Open Transactions Value"}],xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],title:!1},yAxis:{labels:{format:"{value}k"},title:!1}}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.getTransactionValuesWidgetDataAction().then(function(t){e.setState({responseData:t},function(){e.changeView("month")})})}},{key:"changeView",value:function(e){var t=(this.state.responseData.monthTransaction||[]).map(function(e){return e.total}),a=(this.state.responseData.monthTransaction||[]).map(function(e){return e._id.month}),n=(this.state.responseData.weekTransaction||[]).map(function(e){return{label:"Week"+(e._id.week+1),value:e.total}}).sort(function(e,t){return e.value>t.value?1:-1});"month"==e?this.setState({viewMode:"month",chartOptions:{chart:{height:"315"},title:{text:""},series:[{data:t,name:"Open Transactions Value"}],xAxis:{categories:a,title:!1},yAxis:{labels:{format:"{value}k"},title:!1}}}):this.setState({viewMode:"week",chartOptions:{chart:{height:"315"},title:{text:""},series:[{data:n.map(function(e){return e.value}),name:"Open Transactions Value"}],xAxis:{categories:n.map(function(e){return e.label}),title:!1},yAxis:{labels:{format:"{value}k"},title:!1}}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 font-600"},"Transactions Value")),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},s.a.createElement("div",{className:"switch-btns"},s.a.createElement(x.a,{variant:"primary",className:"week"==this.state.viewMode&&"active",onClick:function(){e.changeView("week")}},"Week"),s.a.createElement(x.a,{variant:"primary",className:"month"==this.state.viewMode&&"active",onClick:function(){e.changeView("month")}},"Month")))),0==this.state.chartOptions.series[0].data.length?s.a.createElement("div",{className:"dash-no-records"},"No Records Found"):s.a.createElement("div",{className:"high-line"},s.a.createElement(xa.a,{highcharts:Sa.a,options:this.state.chartOptions})))}}]),t}(s.a.Component),Ra=Object(B.b)(function(e){return{valuesData:e.reducer.valuesData||{}}},{getTransactionValuesWidgetDataAction:function(){var e=ct.TransactionValuesWidgetDataUrl;return function(t){return mt.getMethod(e,!0).then(function(e){return 200==e.status?t({type:rt,valuesData:e.data}):t({type:rt,valuesData:[]}),e.data||{}})}}})(Oa),ja=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"transactions",value:function(e){this.props.history.push({pathname:"/transactions",state:{type:e}})}},{key:"render",value:function(){var e=this,t=0,a=0,n=0,r=0,l=0,o=0;this.props.countTransactions&&(o=(t=this.props.countTransactions.COMPLETED?this.props.countTransactions.COMPLETED.length:0)+(a=this.props.countTransactions.INPROGRESS?this.props.countTransactions.INPROGRESS.length:0)+(n=this.props.countTransactions.PAUSED?this.props.countTransactions.PAUSED.length:0)+(r=this.props.countTransactions.SCHEDULED?this.props.countTransactions.SCHEDULED.length:0)+(l=this.props.countTransactions.CANCELED?this.props.countTransactions.CANCELED.length:0));var i={chart:{type:"pie",options3d:{enabled:!0,alpha:0},width:"250",height:"200"},colors:["#009912","#0098e9","#4d5f6b","#005582","#b5ac9e"],title:{text:""},plotOptions:{pie:{innerSize:90,depth:150,size:"100%",borderColor:"transparent"},series:{dataLabels:{enabled:!1}}},series:[{data:[["Closed",t],["In-progress",a],["Paused",n],["Scheduled",r],["Cancelled",l]]}],tooltip:{formatter:function(){return"<b>"+this.key+" : "+this.y+"</b>"}}};return 0!==o?s.a.createElement("div",null,s.a.createElement("div",{className:"dash-col-head with-border trans-pie-head"},s.a.createElement("h4",{className:"color-blue-3 font-16 font-600 mb-0"},"Transactions")),s.a.createElement("div",{className:"high-pie"},s.a.createElement("div",{className:"high-pie-count goal-count text-center"}),s.a.createElement(xa.a,{highcharts:Sa.a,options:i})),s.a.createElement("div",{className:"high-pie-count text-center d-blue"},s.a.createElement("h4",null,o<10&&0!=o?"0"+o:o),s.a.createElement("p",null,"Total")),s.a.createElement("hr",{className:"my-2"}),s.a.createElement("div",{className:"high-pie-count-row"},s.a.createElement("div",{className:"high-pie-count text-center green",onClick:function(){return e.transactions("COMPLETED")}},s.a.createElement("h4",null,t<10&&0!=t?"0"+t:t),s.a.createElement("p",null,"Closed")),s.a.createElement("div",{className:"high-pie-count text-center blue",onClick:function(){return e.transactions("INPROGRESS")}},s.a.createElement("h4",null,a<10&&0!=a?"0"+a:a),s.a.createElement("p",null,"In-progress")),s.a.createElement("div",{className:"high-pie-count text-center paused",onClick:function(){return e.transactions("PAUSED")}},s.a.createElement("h4",null,n<10&&0!=n?"0"+n:n),s.a.createElement("p",null,"Paused")),s.a.createElement("div",{className:"high-pie-count text-center scheduled",onClick:function(){return e.transactions("SCHEDULED")}},s.a.createElement("h4",null,r<10&&0!=r?"0"+r:r),s.a.createElement("p",null,"Scheduled")),s.a.createElement("div",{className:"high-pie-count text-center cancel",onClick:function(){return e.transactions("CANCELED")}},s.a.createElement("h4",null,l<10&&0!=l?"0"+l:l),s.a.createElement("p",null,"Cancelled")))):s.a.createElement("div",null,s.a.createElement("div",{className:"dash-col-head with-border trans-pie-head"},s.a.createElement("h4",{className:"color-blue-3 font-16 font-600 mb-0"},"Transactions")),s.a.createElement("div",{className:"dash-no-records"},"No Records Found"))}}]),t}(s.a.Component);function Ua(e){return s.a.createElement("img",{src:Ca.a})}var Ya=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={viewMode:"week",scheduledTasks:0,totalTasks:0,overdueTasks:0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.getDashboardTasksWidgetAction().then(function(t){e.setState({scheduledTasks:t.transactionStatus&&t.transactionStatus["NOT DUE"]||0,totalTasks:t.totalTask||0,overdueTasks:t.transactionStatus&&t.transactionStatus.OVERDUE||0})})}},{key:"goToTaskDetails",value:function(e,t){this.props.history.push({pathname:"/transactions/detail/"+t,taskId:e})}},{key:"render",value:function(){var e=this,t=this.props.upcomingTasksData.transactionsEvent||[];return"day"==this.state.viewMode&&(t=t.filter(function(e){return Gt()().isSame(e.eventEndDate,"day")})),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"dash-col dash-col-big"},s.a.createElement("div",{className:"dash-col-inner"},s.a.createElement("div",{className:"dash-col-head with-border"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 font-600 mb-0"},"Upcoming Tasks")),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},s.a.createElement("div",{className:"switch-btns"},s.a.createElement(x.a,{variant:"primary",className:"day"==this.state.viewMode&&"active",onClick:function(){e.setState({viewMode:"day"})}},"Day"),s.a.createElement(x.a,{variant:"primary",className:"week"==this.state.viewMode&&"active",onClick:function(){e.setState({viewMode:"week"})}},"Week"))))),0==t.length?s.a.createElement("div",{className:"dash-no-records"},"No Records Found"):s.a.createElement("div",{className:"upc-task"},s.a.createElement("div",{className:"upc-task-row upc-task-row-head"},s.a.createElement("div",{className:"upc-task-col"},"Task"),s.a.createElement("div",{className:"upc-task-col"},"Transaction")),s.a.createElement("div",{className:"upc-task-row-body"},t.map(function(t,a){return s.a.createElement("div",{key:"ts"+a,className:"upc-task-row task-row",onClick:function(){e.goToTaskDetails(t._id,t.transactionData._id)}},s.a.createElement("div",{className:"upc-task-col"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},t.overDue?s.a.createElement("span",{className:"task-status task-status-orange"}):s.a.createElement(s.a.Fragment,null,"SCHEDULED"==t.status&&s.a.createElement("span",{className:"task-status task-status-blue"}),"COMPLETED"==t.status&&s.a.createElement("span",{className:"task-status task-status-green"}))),s.a.createElement(Yt.a,null,s.a.createElement("div",{class:"task-name"},t.title),s.a.createElement("div",{class:"task-date"},s.a.createElement("em",null,"Due date: ",Gt()(t.eventEndDate).format("MM/DD/YYYY hh:mm a")))))),t.transactionData&&s.a.createElement("div",{className:"upc-task-col"},s.a.createElement("div",{className:"trans-combo"},s.a.createElement("div",{className:"trans-img"},null==t.img||""==t.img?s.a.createElement("img",{src:Na.a}):s.a.createElement(ka.a,{src:ct.AdminCreateTransactionUrl+"/upload?id="+t.transactionData.ownerId+"&img="+t.img},s.a.createElement("img",null),s.a.createElement("img",{src:Na.a}),s.a.createElement(Ua,null))),s.a.createElement("div",{className:"trans-info"},s.a.createElement("h5",null,t.transactionData.property.street+(""!=t.transactionData.property.street1?", "+t.transactionData.property.street1:"")),s.a.createElement("p",null,t.transactionData.property.city+", "+(t.transactionData.property.state?t.transactionData.property.state+" ":"")+t.transactionData.property.zipcode)))))}))))),s.a.createElement("div",{className:"dash-col task-count"},s.a.createElement("div",{className:"task-count-inner"},s.a.createElement("div",{className:"d-blue"},s.a.createElement("h4",null,this.state.totalTasks),s.a.createElement("p",null,"Total Task")),s.a.createElement("div",{className:"blue"},s.a.createElement("h4",null,this.state.scheduledTasks),s.a.createElement("p",null,"Scheduled Task")),s.a.createElement("div",{className:"orange"},s.a.createElement("h4",null,this.state.overdueTasks),s.a.createElement("p",null,"Overdue Task")))))}}]),t}(s.a.Component),La=Object(B.b)(function(e){return{upcomingTasksData:e.reducer.upcomingTasksData||{}}},{getDashboardTasksWidgetAction:function(){var e=ct.DashboardwidgetFourUrl;return function(t){return mt.getMethod(e,!0).then(function(e){return 200==e.status?t({type:Le,upcomingTasksData:e.data}):t({type:Le,upcomingTasksData:[]}),e.data||{}})}}})(Ya),Pa={chart:{type:"pie",options3d:{enabled:!0,alpha:0},width:"250",height:"200"},colors:["#0098e9","#ff5900","#737373"],title:{text:""},plotOptions:{pie:{innerSize:90,depth:150,size:"100%",borderColor:"transparent"}},series:[{data:[["",22],["",13],["",4]]}],tooltip:{formatter:function(){return"<b>Zillow : "+this.y+"</b>"}}},Ba=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"dash-col-head with-border"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 font-600 mb-0"},"Production")),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},s.a.createElement("div",{className:"switch-btns"},s.a.createElement(x.a,{variant:"primary"},"YTD"),s.a.createElement(x.a,{variant:"primary"},"Quarterly"),s.a.createElement(x.a,{variant:"primary",className:"active"},"Monthly"))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"production-count high-pie-count"},s.a.createElement("div",{className:"production-count-inner text-center"},s.a.createElement("div",{class:"d-blue"},s.a.createElement("h4",null,"20"),s.a.createElement("p",null,"Total value sold")),s.a.createElement("div",{class:"blue"},s.a.createElement("h4",null,"16"),s.a.createElement("p",null,"Gross sales")),s.a.createElement("div",{class:"green"},s.a.createElement("h4",null,"04"),s.a.createElement("p",null,"Gross commission"))))),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"high-pie-production"},s.a.createElement("hr",null),s.a.createElement(xa.a,{highcharts:Sa.a,options:Pa}),s.a.createElement("div",{className:"high-pie-count-row"},s.a.createElement("div",{className:"high-pie-count text-center"},s.a.createElement("h4",null,"13"),s.a.createElement("p",null,"Zillow")),s.a.createElement("div",{className:"high-pie-count text-center"},s.a.createElement("h4",null,"10"),s.a.createElement("p",null,"Word of mouth")),s.a.createElement("div",{className:"high-pie-count text-center"},s.a.createElement("h4",null,"15"),s.a.createElement("p",null,"Referral")))))))}}]),t}(s.a.Component),Va=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.transactionsAction().then(function(e){})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"dash-row"},s.a.createElement("div",{className:"dash-col"},s.a.createElement("div",{className:"dash-col-inner p-0"},s.a.createElement(Ma,{dashboardTranscations:this.props.dashboardTranscations,history:this.props.history}))),s.a.createElement("div",{className:"dash-col dash-col-big"},s.a.createElement("div",{className:"dash-col-inner"},s.a.createElement(Ra,{history:this.props.history})))),s.a.createElement("div",{className:"dash-row"},s.a.createElement("div",{className:"dash-col",style:{width:"50%"}},s.a.createElement("div",{className:"dash-col-inner dash-col-inner-pie"},s.a.createElement(ja,{countTransactions:this.props.countTransactions,history:this.props.history}))),s.a.createElement("div",{className:"dash-col",style:{width:"50%"}},s.a.createElement("div",{className:"dash-col-inner"},s.a.createElement(Ba,null)))),s.a.createElement("div",{className:"dash-row dash-row-2"},s.a.createElement(La,{history:this.props.history})))}}]),t}(s.a.Component),Fa=Object(B.b)(function(e){return{dashboardTranscations:e.reducer.dashboardTranscations,countTransactions:e.reducer.countTransactions}},{transactionsAction:function(){return function(e){return mt.getMethod(ct.DashboardTransactionsUrl,!0).then(function(t){return 200===t.status?e({type:st,dashboardTranscations:t.data.transactions,countTransactions:t.data.totalTransactions}):e({type:st,dashboardTranscations:[],countTransactions:[]}),t})}}})(Va),_a=a(1405),Ga=a(1406),za=a(1407),Ha=a(1408),qa=a(1409),Wa=a(1440);a(211),a(53);function Ka(e){var t=ct.docsUrl.replace("{transactionId}",e);return"VENDOR"==localStorage.getItem("usertype")?t=t+"&vendorId="+localStorage.getItem("ID")+"&type=vendor":t+="&type=buyer",function(e){return mt.getMethod(t,!0).then(function(t){return 200===t.status?(e({type:Ge,docs:t.data.data,totalDocs:t.data.total}),t.data.data):(e({type:Ge,docs:{}}),{})})}}function Qa(e){return function(t){return mt.postMethod(ct.addDocUrl,e,!0).then(function(e){return""!==e._id?t({type:ze,isDocAdded:!0}):t({type:ze,isDocAdded:!1}),e})}}function Za(e,t){return function(a){return mt.putMethod(ct.addDocUrl+"?id="+t,e,!0).then(function(e){return""!==e._id?a({type:He,isDocAdded:!0}):a({type:He,isDocAdded:!1}),e})}}function Xa(e,t){var a=ct.uploadDocUrl.replace("{transactionId}",t);return function(t){return mt.postFormDataMethod(a,e,!0).then(function(e){return 200==e.status?(t({type:qe,uploadSuccess:!0}),!0):(t({type:qe,uploadSuccess:!1}),!1)})}}a(53);function Ja(e){var t=ct.GetTransactionUrl;return t=t.replace("{transactionsId}",e),function(e){return mt.getMethod(t,!0).then(function(t){return 200==t.status?(e({type:ce,transactionData:t.data.data[0]}),t.data.data[0]):(e({type:ce,transactionData:[]}),{})})}}function $a(e){return function(t){return mt.getMethod(ct.transactionEvent+"?transactionId="+e,!0).then(function(e){200==e.status?t({type:we,tasks:e.data}):t({type:we,tasks:[]})})}}function en(e){return function(t){return mt.getMethod(ct.transactionEvent+"/event?eventId="+e,!0).then(function(e){return 200==e.status?t({type:Ae,taskDetails:e.data}):t({type:Ae,taskDetails:{}}),e.data})}}function tn(e){return function(t){return mt.deleteMethod(ct.transactionEvent+"?id="+e,!0).then(function(e){return e.status,t({type:Se}),e})}}function an(e,t){return function(a){return mt.putMethod(ct.transactionEvent+"?id="+t,e,!0).then(function(e){return e._id,a({type:Ie}),e?e.data:[]})}}function nn(e,t){var a=ct.transactionStatusUrl;return a=a.replace("{transactionId}",e),function(e){return mt.putMethod(a,t,!0).then(function(t){200==t.status?e({type:Xe,transactionStatus:t.data}):e({type:Xe,transactionStatus:[]})})}}function sn(e,t){var a=ct.transactionEvent+"/dependency?transactioneventId="+e;return function(e){return mt.putMethod(a,t,!0).then(function(t){200==t.status?e({type:Je,transactionTaskStatus:t.data}):e({type:Je,transactionTaskStatus:[]})})}}a(53);a(53);var rn=a(638),ln=a.n(rn),on=a(57),cn=a.n(on),mn=a(639),dn=a.n(mn),un=a(640),pn=a.n(un),hn=a(53);function gn(e){return s.a.createElement("img",{src:Ca.a})}var fn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={transactions:[],originalTransactions:[],filteredTransactions:[],searchedTransactions:[],isFiltered:!1,isSearched:!1,showLoader:!1,sortParams:{value:"modifiedDate",seq:"desc"},searchParam:"",userRole:localStorage.getItem("usertype").toUpperCase(),filterParam:"",delTransactionId:"",deleteTransactionPrompt:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;this.setState({showLoader:!0}),null!==(e=localStorage.getItem("usertype"))&&"VENDOR"===e.toUpperCase()?this.props.getVendorTransactionsAction().then(function(e){t.setState({transactions:t.props.vendorTransactions.data||[],originalTransactions:t.props.vendorTransactions.data||[],filteredTransactions:t.props.vendorTransactions.data||[]},function(){t.sortTransactions("modifiedDate","desc"),t.setState({showLoader:!1})})}):null!==e&&"BUYER"!=e.toUpperCase()&&"VENDOR"!=e.toUpperCase()&&this.props.getAllTransactionsAction().then(function(e){t.setState({transactions:t.props.transactions.data||[],originalTransactions:t.props.transactions.data||[],filteredTransactions:t.props.transactions.data||[]},function(){if(t.sortTransactions("modifiedDate","desc"),t.setState({showLoader:!1}),t.props.location.state){var e=t.props.location.state.type;t.changeTransactionsFilter(e)}})}),null!==(e=localStorage.getItem("usertype"))&&"BUYER"===e.toUpperCase()&&this.getTransactions()}},{key:"search",value:function(e){e=e.trim();var t;t=this.state.filteredTransactions.filter(function(t){var a=!1;return Object.keys(t.property).forEach(function(n){"image"!=n&&((t.property[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0))}),Object.keys(t.buyer).forEach(function(n){"firstname"!=n&&"lastName"!=n||(t.buyer[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0)}),a}),this.setState({transactions:t,searchedTransactions:t,searchParam:e,isSearched:""!=e.trim()})}},{key:"changeTransactionsFilter",value:function(e){var t=this.state.originalTransactions;this.state.isSearched&&(t=this.state.searchedTransactions),t=t.filter(function(t){return(t.status+"").toUpperCase()==e.toUpperCase()}),this.setState({transactions:t,filteredTransactions:t,isFiltered:!0,filterParam:e})}},{key:"sortTransactions",value:function(e,t){var a={value:e,seq:t},n=this.state.transactions;n=void 0==t||""==t||"asc"==t?hn.sortBy(n,e):hn.sortBy(n,e).reverse(),this.setState({transactions:n,filteredTransactions:n,sortParams:a})}},{key:"clearFilter",value:function(){var e=this;this.setState({transactions:this.state.originalTransactions,filteredTransactions:this.state.originalTransactions,isFiltered:!1,isSearched:!1,searchParam:"",filterParam:""},function(){e.sortTransactions("modifiedDate","desc")})}},{key:"addDefaultSrc",value:function(e){e.target.src=Na.a}},{key:"createEmptyFolder",value:function(e){var t=this,a="Transaction Docs",n={transactionId:e,location:a,document:[]};this.props.listDocAction(e).then(function(e){var s=!1,r="";Object.keys(e).sort().forEach(function(t){t==a&&(r=e[t][0]._id,s=!0)}),s?localStorage.setItem("folderId",r):t.props.addDocAction(n).then(function(e){localStorage.setItem("folderId",e.data._id)})})}},{key:"getTransactions",value:function(){var e=this,t=localStorage.getItem("usertype");null!==t&&"BUYER"===t.toUpperCase()?this.props.getBuyerTransactionsAction().then(function(t){e.setState({transactions:e.props.buyerTransactions.data||[],originalTransactions:e.props.buyerTransactions.data||[],filteredTransactions:e.props.buyerTransactions.data||[]},function(){e.sortTransactions("modifiedDate","desc"),e.setState({showLoader:!1})})}):null!==t&&"VENDOR"===t.toUpperCase()?this.props.getVendorTransactionsAction().then(function(t){e.setState({transactions:e.props.vendorTransactions.data||[],originalTransactions:e.props.vendorTransactions.data||[],filteredTransactions:e.props.vendorTransactions.data||[]},function(){e.sortTransactions("modifiedDate","desc"),e.setState({showLoader:!1})})}):this.props.getAllTransactionsAction().then(function(t){e.setState({transactions:e.props.transactions.data||[],originalTransactions:e.props.transactions.data||[],filteredTransactions:e.props.transactions.data||[]},function(){e.sortTransactions("modifiedDate","desc")})})}},{key:"confirmDeleteTransaction",value:function(e){this.setState({deleteTransactionPrompt:!0,delTransactionId:e})}},{key:"deleteTransaction",value:function(e){var t=this;this.props.deleteTransactionDataAction(e).then(function(e){t.getTransactions(),t.setState({deleteTransactionPrompt:!1,delTransactionId:""})})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.showLoader?s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center trans-listing-head"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"title-med mt-0 pt-1"},"Transactions")),s.a.createElement(Yt.a,{className:"col-auto",align:"right"},s.a.createElement(jt.a,{inline:!0,className:"justify-content-end"},s.a.createElement(Ut.a,{className:"trans-listing-head-row"},s.a.createElement(Yt.a,{className:"col-auto px-0 d-flex trans-listing-head-dropdown"},s.a.createElement(jt.a.Group,{controlId:"",className:"mb-0 mr-3"},s.a.createElement(Lt.a,{className:"icon-wrapper search-big"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search by address, title etc...",value:this.state.searchParam,onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(jt.a.Group,{controlId:"",className:"mb-0 mr-2"},s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{className:"form-control form-control-sm form-control-head",style:{width:"175px"},value:this.state.sortParams.value,onChange:function(t){e.sortTransactions(t.target.value,"modifiedDate"==t.target.value?"desc":"asc")}},s.a.createElement("option",{value:"modifiedDate"},"Sort: Last updated"),s.a.createElement("option",{value:"createdDate"},"Sort: Creation date"),s.a.createElement("option",{value:"endDate"},"Sort: Closing date"),s.a.createElement("option",{value:"startDate"},"Sort: Agrement date"))))),s.a.createElement(Yt.a,{className:"col-auto pl-0 d-flex trans-listing-head-button"},s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action mr-2"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"btn-default btn-icn px-2"},s.a.createElement(Ga.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{className:"SCHEDULED"==this.state.filterParam&&"active",onClick:function(){e.changeTransactionsFilter("SCHEDULED")}},"Scheduled"),s.a.createElement(M.a.Item,{className:"INPROGRESS"==this.state.filterParam&&"active",onClick:function(){e.changeTransactionsFilter("INPROGRESS")}},"In progress"),s.a.createElement(M.a.Item,{className:"PAUSED"==this.state.filterParam&&"active",onClick:function(){e.changeTransactionsFilter("PAUSED")}},"Pause"),s.a.createElement(M.a.Item,{className:"COMPLETED"==this.state.filterParam&&"active",onClick:function(){e.changeTransactionsFilter("COMPLETED")}},"Completed"),s.a.createElement(M.a.Item,{className:"CANCELED"==this.state.filterParam&&"active",onClick:function(){e.changeTransactionsFilter("CANCELED")}},"Canceled"))),"VENDOR"!==this.state.userRole&&"BUYER"!==this.state.userRole?s.a.createElement(jt.a.Group,{controlId:"",className:"mb-0"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-head hide-767",onClick:function(){e.props.history.push("/transactions/create")}},"Create Transactions")):""))))),s.a.createElement("section",{className:"transaction-list"},s.a.createElement("div",{className:"container-custom"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{className:"text-right"},"desc"==this.state.sortParams.seq&&s.a.createElement(x.a,{className:"btn-sort w-icn",variant:"transparent",onClick:function(){e.sortTransactions(e.state.sortParams.value,"asc")}},s.a.createElement("img",{src:ln.a,alt:"sort"})),(void 0==this.state.sortParams.seq||"asc"==this.state.sortParams.seq||""==this.state.sortParams.seq)&&s.a.createElement(x.a,{className:"btn-sort w-icn",variant:"transparent",onClick:function(){e.sortTransactions(e.state.sortParams.value,"desc")}},s.a.createElement("img",{src:pn.a,alt:"sort"})),(this.state.isFiltered||this.state.isSearched)&&s.a.createElement(x.a,{className:"btn-sort wt-icn",variant:"transparent",onClick:function(){e.clearFilter()}},s.a.createElement(za.a,null),s.a.createElement("span",null,"Clear")))),s.a.createElement(Ut.a,null,this.state.transactions.map(function(t){return s.a.createElement(Yt.a,{xs:"12",key:t._id,sm:"3"},s.a.createElement(ya.a,{className:"transaction-single"},s.a.createElement(ya.a.Header,{className:"p-0",style:{position:"relative"}},s.a.createElement(va.a,{className:"slide-transaction",interval:!1,indicators:!1,fade:!0,controls:!(t.property.image.length<=1)},t.property.image.map(function(a,n){return s.a.createElement(va.a.Item,{key:n,onClick:function(){e.props.history.push("/transactions/detail/"+t._id)}},null==a||""==a?s.a.createElement("img",{className:"d-block w-100",src:Na.a}):s.a.createElement(ka.a,{src:ct.AdminCreateTransactionUrl+"/upload?id="+t.ownerId+"&img="+a},s.a.createElement("img",null),s.a.createElement("img",{src:Na.a}),s.a.createElement(gn,null)))}),t.property.image.length<=0&&s.a.createElement(va.a.Item,null,s.a.createElement("img",{className:"d-block w-100",src:Na.a})))),s.a.createElement(ya.a.Body,{className:"p-2"},s.a.createElement("div",{onClick:function(){e.props.history.push("/transactions/detail/"+t._id)}},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,s.a.createElement(ya.a.Title,{className:"mb-0 font-16 font-500"},t.property.street+(""!=t.property.street1?", "+t.property.street1:"")),s.a.createElement(ya.a.Text,{className:"mb-2 font-14 font-400"},t.property.city+", "+(t.property.state?t.property.state+" ":"")+t.property.zipcode))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,s.a.createElement("div",{style:{lineHeight:"1.1em"}},s.a.createElement("span",{className:"color-grey-2 font-12 font-500"},"Status: "),s.a.createElement("span",{className:"color-light-blue-1 font-12 font-600"},t.status)),s.a.createElement("div",{style:{lineHeight:"1.1em"}},s.a.createElement("span",{className:"color-grey-2 font-12 font-500"},"Updated on: "),s.a.createElement("span",{className:"color-grey-1 font-12 font-500"},Gt()(t.modifiedDate).format("MM/DD/YYYY, hh:mm a")))),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},s.a.createElement("div",{className:"trans-progress-circle"},s.a.createElement("span",{className:"circle-val"},"40%"),s.a.createElement(wa.a,{className:"single-circle circle1",value:30,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#45a751"})}),s.a.createElement(wa.a,{className:"single-circle circle2",value:40,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#e88741"})}),s.a.createElement(wa.a,{className:"single-circle circle3",value:100,styles:Object(wa.b)({trailColor:"transparent",strokeLinecap:"butt",pathColor:"#ebebeb"})}))))),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){e.props.history.push("/transactions/detail/"+t._id)}},"Edit"),s.a.createElement(M.a.Item,{onClick:function(){e.confirmDeleteTransaction(t._id)}},"Delete"))))))})))),this.state.transactions.length<=0&&s.a.createElement(s.a.Fragment,null,"VENDOR"===this.state.userRole||"BUYER"===this.state.userRole?s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No transaction found"))):this.state.isFiltered||this.state.isSearched?s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No transaction found"))):s.a.createElement("div",{className:"no-transaction"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:dn.a,className:"no-transaction-content",alt:""}),s.a.createElement("h2",{className:"no-transaction-content"},"Experience for Buying and Selling Home"),s.a.createElement("hr",null),s.a.createElement("p",{className:"no-transaction-content"},"We make the real estate experience better\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),"VENDOR"!==this.state.userRole&&"BUYER"!==this.state.userRole?s.a.createElement(x.a,{className:"text-uppercase btn-orange btn-orange-lg",onClick:function(){e.props.history.push("/transactions/create")}},"create transaction"):""))),s.a.createElement(Wa.a,{show:this.state.deleteTransactionPrompt,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,"Are you sure to want to delete this transaction?")),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({deleteTransactionPrompt:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.deleteTransaction(e.state.delTransactionId)}},"Yes")))))}}]),t}(s.a.Component),En=Object(B.b)(function(e){return{transactions:e.reducer.transactions,isDTransDeleted:e.reducer.isDTransDeleted,vendorTransactions:e.reducer.vendorTransactions,buyerTransactions:e.reducer.buyerTransactions}},{getAllTransactionsAction:function(){return function(e){return mt.getMethod(ct.AdminCreateTransactionUrl,!0).then(function(t){200==t.status?e({type:Ce,transactions:t.data}):e({type:Ce,transactions:[]})})}},deleteTransactionDataAction:function(e){var t=ct.DeleteTransactionUrl;return t=t.replace("{transactionsId}",e),function(e){return mt.deleteMethod(t,!0).then(function(t){200==t.status?e({type:de,isDTransDeleted:!0}):e({type:de,isDTransDeleted:!1})})}},getVendorTransactionsAction:function(){var e=localStorage.getItem("ID"),t=ct.vendorTransactionsUrl;return t=t.replace("{id}",e),function(e){return mt.getMethod(t,!0).then(function(t){200==t.status?e({type:Qe,vendorTransactions:t.data}):e({type:Qe,vendorTransactions:[]})})}},getBuyerTransactionsAction:function(){localStorage.getItem("ID");var e=ct.buyerTransactionsList;return function(t){return mt.getMethod(e,!0).then(function(e){200==e.status?t({type:$e,buyerTransactions:e.data}):t({type:$e,buyerTransactions:[]})})}},addDocAction:Qa,listDocAction:Ka})(fn),vn=a(1410),yn=a(1411),bn=a(192),Nn=(a(258),a(53)),Dn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={condo:e.getTransactionData().condo,builtBefore1978:e.getTransactionData().builtBefore1978,hoa:e.getTransactionData().hoa,draft:e.getTransactionData().draft,leadSource:e.getTransactionData().leadSource,emd:e.getTransactionData().emd,agreedOpenPrice:e.getTransactionData().agreedOpenPrice,transactionType:e.getTransactionData().transactionType,property_image:e.getTransactionData().property.image,property_street:e.getTransactionData().property.street,property_city:e.getTransactionData().property.city,property_state:e.getTransactionData().property.state,property_zipcode:e.getTransactionData().property.zipcode,buyer_email:e.getTransactionData().buyer.email,buyer_firstname:e.getTransactionData().buyer.firstname,buyer_lastName:e.getTransactionData().buyer.lastName,buyer_mobileNumber:e.getTransactionData().buyer.mobileNumber,acceptedFiles:e.getTransactionData().property.image},a.validatorTypes=function(){return Qt.a.object().keys({emd:Qt.a.string().required(),agreedOpenPrice:Qt.a.string().required(),transactionType:Qt.a.string().required(),property_street:Qt.a.string().required(),property_city:Qt.a.string().required(),property_state:Qt.a.string().required(),property_zipcode:Qt.a.string().regex(new RegExp("^[0-9]{5}(?:-[0-9]{4})?$")).required(),buyer_email:Qt.a.string().email().required(),buyer_firstname:Qt.a.string().required(),buyer_lastName:Qt.a.string().required(),buyer_mobileNumber:Qt.a.string().regex(new RegExp(/(?:1?|\+1|\+\s1|\(?)(?:\(?|\s\(|[\.\-\s])\d{3}(?:\)?|\)\s|[\.\-\s])\d{3}[\.\-\s]\d{4}/)).required()})},a.getValidatorData=a.getValidatorData.bind(Object(Rt.a)(a)),a.renderHelpText=a.renderHelpText.bind(Object(Rt.a)(a)),a.isValidated=a.isValidated.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getValidatorData",value:function(){return{emd:this.props.getTransactionData().emd,agreedOpenPrice:this.props.getTransactionData().agreedOpenPrice,transactionType:this.props.getTransactionData().transactionType,property_street:this.props.getTransactionData().property.street,property_city:this.props.getTransactionData().property.city,property_state:this.props.getTransactionData().property.state,property_zipcode:this.props.getTransactionData().property.zipcode,buyer_email:this.props.getTransactionData().buyer.email,buyer_firstname:this.props.getTransactionData().buyer.firstname,buyer_lastName:this.props.getTransactionData().buyer.lastName,buyer_mobileNumber:this.props.getTransactionData().buyer.mobileNumber}}},{key:"getErrorMsg",value:function(e,t){var a="";return"emd"!==e&&"agreedOpenPrice"!==e&&"property_street"!==e&&"property_city"!==e&&"agreedOpenPrice"!==e&&"buyer_firstname"!==e&&"property_state"!==e&&"buyer_lastName"!==e&&"transactionType"!==e&&"property_image"!==e||void 0!==t[e]&&null!==t[e]&&""!==t[e]&&("emd"===e&&(a="Please enter EMD Deposit"),"property_street"===e&&(a="Please enter Address 1"),"property_city"===e&&(a="Please enter City"),"buyer_firstname"===e&&(a="Please enter Buyers First Name"),"buyer_lastName"===e&&(a="Please enter Buyers Last Name"),"agreedOpenPrice"===e&&(a="Please enter Agreed Open Price"),"property_state"===e&&(a="Please select State"),"transactionType"===e&&(a="Please select Transaction Type"),"property_image"===e&&this.state.acceptedFiles.length<=0&&(a="Please select Property Image")),"buyer_email"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter E-mail Address*"),1===t[e].length&&(a="Please enter valid E-mail Address*")),"property_zipcode"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Zip code"),1===t[e].length&&(a="Please enter valid Zip code")),"buyer_mobileNumber"===e&&void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(2===t[e].length&&(a="Please enter Mobile Number"),1===t[e].length&&(a="Mobile Number Must be of 10 digits")),a}},{key:"isValidated",value:function(){var e=this;return new Promise(function(t,a){e.props.validate(function(e){return e?(a(),!1):(t(),!0)})})}},{key:"renderHelpText",value:function(e,t){return s.a.createElement("div",{className:"val-err-tooltip",key:t},s.a.createElement("span",null,e))}},{key:"onChange",value:function(e){"condo"===e.target.name||"hoa"===e.target.name||"builtBefore1978"===e.target.name?(this.setState(Object(Nt.a)({},e.target.name,e.target.checked)),this.props.updateTransactionData(e.target.name,e.target.checked)):(this.setState(Object(Nt.a)({},e.target.name,e.target.value)),this.props.updateTransactionData(e.target.name,e.target.value))}},{key:"uploadImage",value:function(e){var t=this.state.acceptedFiles;t=Nn.uniqBy(Nn.concat(t,e),"name"),this.setState({acceptedFiles:t,property_image:t}),this.props.handleValidation("property_image"),this.props.updateTransactionData("property_image",t)}},{key:"deleteImage",value:function(e){var t=this.state.acceptedFiles;t.splice(e,1),this.setState({acceptedFiles:t},this.props.updateTransactionData("property_image",this.state.acceptedFiles))}},{key:"render",value:function(){var e=this,t=[];for(var a in aa){var n=s.a.createElement("option",{key:a,value:a},aa[a]);t.push(n)}return s.a.createElement("div",{className:"admin-steps admin-content-area"},s.a.createElement("div",{className:"container-custom"},s.a.createElement(jt.a,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("h4",{className:"title-small font-600 mt-2 mb-3 pt-3"},"Property Information"))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:7},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:12},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Address 1",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"text",name:"property_street",defaultValue:this.state.property_street,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("property_street")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("property_street",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Address 2"),s.a.createElement(jt.a.Control,{type:"text",name:"property_street1",defaultValue:this.state.property_street1,onChange:this.onChange.bind(this)})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Zip Code",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"text",name:"property_zipcode",defaultValue:this.state.property_zipcode,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("property_zipcode")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("property_zipcode",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"City",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"text",name:"property_city",defaultValue:this.state.property_city,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("property_city")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("property_city",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"State",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"property_state",className:"form-control",defaultValue:this.state.property_state,onChange:this.onChange.bind(this)},s.a.createElement("option",{value:""},"Select"),t)),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("property_state",this.props.errors)))))),s.a.createElement("hr",{className:"mt-1"}))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:12},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Buyers First Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"text",name:"buyer_firstname",defaultValue:this.state.buyer_firstname,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("buyer_firstname")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("buyer_firstname",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Buyers Last Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"text",name:"buyer_lastName",defaultValue:this.state.buyer_lastName,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("buyer_lastName")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("buyer_lastName",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"E-mail Address",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"email",name:"buyer_email",defaultValue:this.state.buyer_email,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("buyer_email")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("buyer_email",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Mobile Number",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("buyer_mobileNumber"),value:this.state.zipcode,name:"buyer_mobileNumber"},function(e){return s.a.createElement(jt.a.Control,e)}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("buyer_mobileNumber",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Sales Price",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"number",name:"agreedOpenPrice",defaultValue:this.state.agreedOpenPrice,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("agreedOpenPrice")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("agreedOpenPrice",this.props.errors))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Earnest Money Deposit",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(jt.a.Control,{type:"number",name:"emd",defaultValue:this.state.emd,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("emd")}),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("emd",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Transaction Type",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"transactionType",className:"form-control",defaultValue:this.state.transactionType,onChange:this.onChange.bind(this),onBlur:this.props.handleValidation("transactionType")},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Purchase"},"Purchase"))),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("transactionType",this.props.errors)))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,null,"Lead Source"),s.a.createElement(jt.a.Control,{type:"text",name:"leadSource",defaultValue:this.state.leadSource,onChange:this.onChange.bind(this)})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},this.state.builtBefore1978?s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkBuilt",name:"builtBefore1978",onChange:this.onChange.bind(this),defaultChecked:!0}):s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkBuilt",name:"builtBefore1978",onChange:this.onChange.bind(this)}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkBuilt"},"Built Before 1978")),s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},this.state.hoa?s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkHoa",name:"hoa",onChange:this.onChange.bind(this),defaultChecked:!0}):s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkHoa",name:"hoa",onChange:this.onChange.bind(this)}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkHoa"},"HOA")),s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},this.state.condo?s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkCondo",name:"condo",onChange:this.onChange.bind(this),defaultChecked:!0}):s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"checkCondo",name:"condo",onChange:this.onChange.bind(this)}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkCondo"},"Condo")))))))),s.a.createElement(Yt.a,{xs:12,sm:5},s.a.createElement(jt.a.Group,{controlId:"",className:"dropzone-transaction-wrapper"},s.a.createElement("div",{className:"mt-4"},s.a.createElement(bn.a,{accept:"image/*",maxSize:1e8,onDrop:function(t){e.uploadImage(t)}},function(e){var t=e.getRootProps,a=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",Object.assign({className:"dropzone-transaction"},t()),s.a.createElement("input",a()),s.a.createElement(vn.a,null),s.a.createElement("p",null,s.a.createElement("strong",null,"Chose a file")," or drag here")))})),s.a.createElement("div",{className:"dropzone-list"},s.a.createElement("ul",null,this.state.acceptedFiles.map(function(t,a){return s.a.createElement("li",{key:a},t.name,s.a.createElement(x.a,{variant:"transparent",onClick:function(){e.deleteImage(a)}},s.a.createElement(yn.a,null)))}))),s.a.createElement(jt.a.Text,{className:"text-danger"},this.renderHelpText(this.getErrorMsg("property_image",this.props.errors)))))))))}}]),t}(s.a.Component),kn=Ht()(Wt.a)(Dn),Tn=a(1413),Cn=a(113),wn=a(115),An=a(1412),Sn=a(1414),In=a(1415),xn=a(1416),Mn=a(58);function On(e,t,a,n){var s="";return function(r){return"ADMIN"==n&&(s="".concat(ct.setDependency,"campaign=").concat(e,"&day=").concat(t,"&eventId=").concat(a,"&isTransaction=false")),"USER"==n&&(s="".concat(ct.setDependency,"campaign=").concat(e,"&day=").concat(t,"&eventId=").concat(a)),"TRANSACTION"==n&&(s="".concat(ct.setDependency,"day=").concat(t,"&transactionId=").concat(e,"&eventId=").concat(a)),mt.getMethod(s,!0).then(function(e){return 200===e.status?r({type:Ve,dependencyTasks:e.data}):r({type:Ve,dependencyTasks:{}}),e})}}function Rn(){return function(e){return mt.getMethod(ct.AdminGetVarriableRefMaterTemplateUrl,!0).then(function(t){return 200===t.status?(e({type:se,variablesRefs:t.data}),t.data):(e({type:se,variablesRefs:[]}),[])})}}function jn(e){return function(t){return mt.postMethod(ct.AdminCopyCampaignMaterTemplateUrl,e,!0).then(function(e){200===e.status?t({type:ne,isCampaignCreated:!0,addedCampaign:e.data}):t({type:ne,isCampaignCreated:!1,addedCampaign:[]})})}}function Un(){return function(e){return mt.getMethod(ct.allContingencies,!0).then(function(t){return 200===t.status?(e({type:_e,allContingencies:t.data}),t.data):(e({type:_e,allContingencies:[]}),[])})}}var Yn=a(401),Ln=a.n(Yn),Pn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={page:0,isEmailValid:!1,isRoleExist:!1,unauthorized:!1,contact:{role:[""],usertype:"VENDOR",firstname:"",lastname:"",mobileNumber:"",email:""},saveType:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.props.getUserRolesAction()}},{key:"next",value:function(e,t,a,n){var s=this;""!=e&&void 0==a.email&&this.props.getContactByEmailAction(e).then(function(t){if("Unauthorized"==t)s.setState({unauthorized:!0});else{if(Object.keys(t).length>0){var a={role:t.role?t.role[0]:"",usertype:"VENDOR",firstname:t.firstname,lastname:t.lastname,mobileNumber:t.mobileNumber,email:e};s.setState({isEmailValid:!0,unauthorized:!1,isRoleExist:!!t.role,contact:a})}s.setState({page:1})}})}},{key:"addContact",value:function(e){var t=this;"other"==e.role?this.props.addUserRolesAction(e.other.toUpperCase()).then(function(a){e.roles=[a._id],e.mobileNumber=Number(e.mobileNumber),t.props.addContactAction(e).then(function(e){t.props.onClose()})}):(e.roles=[e.role],e.mobileNumber=Number(e.mobileNumber),this.props.addContactAction(e).then(function(e){t.props.onClose()}))}},{key:"setFieldValue",value:function(e,t){var a=this.state.contact;a[e]=t,this.setState({contact:a})}},{key:"setMobile",value:function(e,t,a){a(t,e.replace(/-/g,""))}},{key:"render",value:function(){var e=this;return console.log(this.props.roles),s.a.createElement("div",null,s.a.createElement(Wa.a.Body,null,s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.contact,enableReinitialize:!0,validationSchema:Tt.object().shape({firstname:Tt.string().trim().required("First Name is required."),lastname:Tt.string().trim().required("Last Name is required."),role:Tt.string().trim().required("Vendor Type is required."),email:Tt.string().trim().email("Please enter valid Email address.").required("Email ID is required"),mobileNumber:Tt.string().nullable().required("Please Enter Mobile Number.").test("mobileNumber","Please Enter Valid Mobile Number",function(e){return 10==(e||"").length})}),onSubmit:function(t,a){"next"!=e.state.saveType&&e.addContact(t)}},function(t){var a=t.handleChange,n=t.values,r=t.errors,l=t.setFieldValue;t.setFieldError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},0==e.state.page&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Email ID",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"email",value:n.email,onChange:function(t){l("email",t.target.value),e.setState({unauthorized:!1}),console.log(t.target.value)}}),s.a.createElement(Ct.a,{name:"email",component:"div",className:"invalid-feedback",style:{display:"block"}})),e.state.unauthorized&&s.a.createElement("label",{className:"invalid-feedback",style:{display:"block"}},"User already exists as buyer agent."),s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",type:"submit",onClick:function(){e.setState({saveType:"next"},function(){e.next(n.email,n.role,r)})}},"Next")),1==e.state.page&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Email ID"),s.a.createElement(Ct.b,{type:"email",className:"form-control",name:"email",disabled:!0,value:n.email,handleChange:a}),s.a.createElement(Ct.a,{name:"email",component:"div",className:"invalid-feedback",style:{display:"block"}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Select Vendor Type"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{className:"form-control",name:"role",value:n.role,onChange:function(e){l("role",e.target.value)}},s.a.createElement("option",{value:""},"Select"),e.props.roles&&e.props.roles.map(function(e){return s.a.createElement("option",{value:e._id},e.name)}),s.a.createElement("option",{value:"other"},"Other")))),"other"==n.role&&s.a.createElement("div",{className:"form-group"},s.a.createElement(Ct.b,{type:"text",name:"other",className:"form-control",placeholder:"Enter Custom type",required:!0,handleChange:a})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"First Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",name:"firstname",className:"form-control",value:n.firstname,disabled:e.state.isEmailValid,handleChange:a}),"next"!=e.state.saveType&&s.a.createElement(Ct.a,{name:"firstname",component:"div",className:"invalid-feedback",style:{display:"block"}})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Last Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",name:"lastname",className:"form-control",value:n.lastname,disabled:e.state.isEmailValid,handleChange:a}),"next"!=e.state.saveType&&s.a.createElement(Ct.a,{name:"lastname",component:"div",className:"invalid-feedback",style:{display:"block"}})),s.a.createElement("div",{className:"form-group",hidden:e.state.isEmailValid},s.a.createElement("label",null,"Phone No.",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:n.mobileNumber,name:"mobileNumber",disabled:e.state.isEmailValid,onChange:function(t){e.setMobile(t.target.value,"mobileNumber",l)}},function(e){return s.a.createElement(Ct.b,e)}),"next"!=e.state.saveType&&s.a.createElement(Ct.a,{name:"mobileNumber",component:"div",className:"invalid-feedback",style:{display:"block"}})),e.state.isRoleExist&&s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){e.props.onClose()}},e.state.isEmailValid?"Close":"Add"),!e.state.isRoleExist&&s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",type:"submit",onClick:function(){e.setState({saveType:""})}},e.state.isEmailValid?"Save":"Add")))})))}}]),t}(s.a.Component),Bn=Object(B.b)(function(e){return{contactResponse:e.reducer.contactResponse,contact:e.reducer.contact,roles:e.reducer.roles}},{addContactAction:function(e){return function(t){return mt.postMethod(ct.addContact,e,!0).then(function(e){200===e.status?t({type:he,contactResponse:e,RegMessage:"Thanks for registering with us, Our team will review your application and you will be notified once your account is Approved."}):t({type:he,contactResponse:e,RegMessage:"Something went wrong. Please try again!"})})}},getContactByEmailAction:function(e){return function(t){return mt.getMethod(ct.addContact+"/email?email="+e,!0).then(function(e){return t(e?{type:pe,contact:e}:{type:pe,contact:{}}),e.data})}},getUserRolesAction:pt,addUserRolesAction:ht})(Pn),Vn=a(53),Fn=new Date,_n=(Fn.getMonth(),Fn.getDate(),Fn.getFullYear(),Fn.getFullYear()+"-"+(Fn.getMonth()+1)+"-"+Fn.getDate()),Gn=function(e){return Array.from({length:e},function(e,t){return t}).map(function(e){return{id:"item-".concat(e),content:s.a.createElement("ul",{className:" set-contingencies-row"},s.a.createElement("li",{className:"id"},s.a.createElement(An.a,null)),s.a.createElement("li",{className:"title"},"Home Inspection"),s.a.createElement("li",{className:"date"},s.a.createElement(Lt.a,{className:"icon-wrapper"})),s.a.createElement("li",{className:"date"},s.a.createElement(Lt.a,{className:"icon-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0},s.a.createElement(jt.a.Control,{type:"text",size:"sm",placeholder:"MM/DD/YYYY"}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))),s.a.createElement("li",{className:"assign"},s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"",className:"form-control form-control-sm"},s.a.createElement("option",{value:""},"Select Vendor"),s.a.createElement("option",{value:""},"Home Inspector"),s.a.createElement("option",{value:""},"Wood Inspector"),s.a.createElement("option",{value:""},"Radon Inspector")))),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},s.a.createElement(Sn.a,{className:"check"}))))}})},zn=function(e,t){return Object(Cn.a)({userSelect:"none",background:e?"#f5f9fc":""},t)},Hn=function(e){return{background:e?"#fff":""}},qn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){return a.setState({date:e})},a.setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.contStartDate=a.contStartDate.bind(Object(Rt.a)(a)),a.contDueDate=a.contDueDate.bind(Object(Rt.a)(a)),a.state={propsConti:a.props.contingencies,show:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),contStartDate:Gt()(),contDueDate:Gt()().subtract(-29,"days"),activeContigency:!0,inactiveContiClass:"",items:Gn(3),addVendor:!1,isvendorClick:!1,allContingencies:[],campContingencies:[],allContingenciesFromAPI:[],trasactioncontigency:[],vendors:[],isUpdateconti:!1,date:new Date,formatDate:_n,userRole:localStorage.getItem("usertype").toUpperCase(),isHoa:!1},a.onDragEnd=a.onDragEnd.bind(Object(Rt.a)(a)),a.addCloseVendor=a.addCloseVendor.bind(Object(Rt.a)(a)),a.listVendorsByConti=a.listVendorsByConti.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),r=Object(wn.a)(s,1)[0];return n.splice(a,0,r),n}(this.state.items,e.source.index,e.destination.index);this.setState({items:t})}}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"setModalOpen",value:function(){this.setState({show:!this.state.show})}},{key:"contStartDate",value:function(e,t){this.setState({contStartDate:t.startDate})}},{key:"contDueDate",value:function(e,t){this.setState({contDueDate:t.startDate})}},{key:"activeContigency",value:function(e,t){var a=this.state.allContingencies,n=!0;1==e&&(n=!1),a[t].isActive=n,this.setState({allContingencies:a});for(var s={},r=0;r<a.length;r++)!0===a[r].isActive&&(s[a[r].key]=""!==a[r].val?a[r].val:a[r].key);this.props.isMasterTemplate?this.props.setFieldValue("contingencies",s):("HOA Docs"!==a[t].key||a[t].isActive||this.props.updateTransactionData("hoa",!1),this.props.isUpdateTrans&&this.props.updateTransactionData("contingencies",s))}},{key:"addVendor",value:function(){this.setState({addVendor:!this.state.addVendor,isUpdateconti:!0})}},{key:"addCloseVendor",value:function(e){this.getAllContacts(e,!0),this.setState({isvendorClick:!1,addVendor:!this.state.addVendor})}},{key:"getAllContacts",value:function(e,t){var a=this;this.state.allContingenciesFromAPI;"BUYER"==this.state.userRole?this.props.getContactsActions(this.props.transID).then(function(e){var t=a.props.contacts.data.filter(function(e,t,a){return a.map(function(e){return e._id}).indexOf(e._id)===t});a.setState({buyerVendors:t})}):this.props.getContactsActions().then(function(n){var s={},r=[],l=[],o=a.props.contacts;a.props.getUserRolesAction().then(function(n){if(n){s=Vn.groupBy(o,function(e){return e.roles?e.roles[0]:""});var i={};Object.keys(s).forEach(function(e){for(var t="",a=0;a<n.length;a++)n[a]._id===e&&(t=n[a].contingency);if(""!==t&&void 0!==t){var o={data:s[e],open:!0};i[t]=o}else for(var c=s[e],m=0;m<c.length;m++)r.push(c[m]);for(var d=s[e],u=0;u<d.length;u++)l.push(d[u])});var c={data:r,open:!0},m={data:l,open:!0};i.other=c,i.all=m,a.setState({vendors:i},function(){if(t&&void 0!==a.props.contactResponse&&null!==a.props.contactResponse){var n=a.state.vendors,s=a.props.contactResponse.data;e.map(function(t,a){var r=t.key;if(("Home Inspection"===r||"Radon Inspection"===r||"Septic Inspection"===r||"Wood Destroying Inspection"===r)&&void 0!==n[r]&&null!==n[r])for(var l=void 0!==n[r].data&&null!==n[r].data?n[r].data:[],o=0,i=l.length;o<i;o++)l[o]._id!==s._id||""!=t.assignee&&void 0!==t.assignee||(t.assignee=l[o].contactId,t.vendorName=l[o].firstname+""+l[o].lastname,t.isActive=!0,e[a]=t)});for(var r=[],l=0;l<e.length;l++)e[l].isActive&&(""!==e[l].assignee?r.push({name:e[l].key,startDate:new Date(e[l].start),endDate:new Date(e[l].end),assignee:e[l].assignee}):r.push({name:e[l].key,startDate:new Date(e[l].start),endDate:new Date(e[l].end)}));a.props.contiCamp(r)}}),a.props.isUpdateTrans||a.props.setVendorsFun(i)}else a.setState({vendors:[]})})},function(e){a.setState({vendors:[]})})}},{key:"componentDidMount",value:function(){this.getAllContacts([],!1)}},{key:"componentWillMount",value:function(){var e=this;if(this.props.isMasterTemplate){var t=[];for(var a in this.props.contingencies)this.props.contingencies.hasOwnProperty(a)&&t.push({key:a,val:this.props.contingencies[a],isActive:!0});this.props.getAllContigencyAction().then(function(a){a.forEach(function(a){var n=!1;for(var s in e.props.contingencies)a.name==s&&(n=!0);n||t.push({key:a.name,val:a.date,isActive:!1})}),e.setState({allContingencies:t,allContingenciesFromAPI:a})}),this.setState({allContingencies:t})}else{var n=[];if(this.props.isUpdateTrans){var s=this.props.getTransactionData();for(var a in this.props.campContingencies){var r=this.props.campContingencies[a];"HOA Docs"!==r.name||s.hoa||this.state.isHoa?n.push({key:r.name,val:r.name,isActive:!0,start:""!=r.startDate?Gt()(r.startDate).format("YYYY-MM-DD"):this.state.contStartDate.format("YYYY-MM-DD"),end:""!=r.endDate?Gt()(r.endDate).format("YYYY-MM-DD"):this.state.contDueDate.format("YYYY-MM-DD"),assignee:r.assignee,defaultAssignee:""===r.assignee||void 0===r.assignee}):n.push({key:r.name,val:r.name,isActive:!1,start:""!=r.startDate?Gt()(r.startDate).format("YYYY-MM-DD"):this.state.contStartDate.format("YYYY-MM-DD"),end:""!=r.endDate?Gt()(r.endDate).format("YYYY-MM-DD"):this.state.contDueDate.format("YYYY-MM-DD"),assignee:"",defaultAssignee:""===r.assignee||void 0===r.assignee})}this.props.getAllContigencyAction().then(function(t){e.setState({allContingenciesFromAPI:t})}),this.props.updateTransactionData("contingencies",n)}else{var l=[];for(var a in this.props.campContingencies)this.props.campContingencies.hasOwnProperty(a)&&l.push({key:a,val:this.props.campContingencies[a],isActive:!0,start:this.state.contStartDate.format("YYYY-MM-DD"),end:this.state.contDueDate.format("YYYY-MM-DD"),assignee:""});this.props.getAllContigencyAction().then(function(t){e.setState({allContingenciesFromAPI:t})}),this.props.updateTransactionData("contingencies",l)}}}},{key:"contStartDateChanges",value:function(e,t,a,n){var s=Gt()(e).format("YYYY-MM-DD");t.start=s,n[a]=t;for(var r=[],l=0;l<n.length;l++)n[l].isActive&&(""!==n[l].assignee?r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end),assignee:n[l].assignee}):r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end)}));this.props.contiCamp(r)}},{key:"contEndDateChanges",value:function(e,t,a,n){var s=Gt()(e).format("YYYY-MM-DD");t.end=s,n[a]=t;for(var r=[],l=0;l<n.length;l++)n[l].isActive&&(""!==n[l].assignee?r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end),assignee:n[l].assignee}):r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end)}));this.props.contiCamp(r)}},{key:"activeContigency",value:function(e,t){var a=this.state.allContingencies,n=!0;1==e&&(n=!1),a[t].isActive=n,this.setState({allContingencies:a});for(var s={},r=0;r<a.length;r++)!0===a[r].isActive&&(s[a[r].key]=""!==a[r].val?a[r].val:a[r].key);this.props.isMasterTemplate?this.props.setFieldValue("contingencies",s):("HOA Docs"!==a[t].key||a[t].isActive||this.props.updateTransactionData("hoa",!1),this.props.isUpdateTrans&&this.props.updateTransactionData("contingencies",s))}},{key:"activeUpContigency",value:function(e,t,a,n){var s=!0;if(void 0!==this.props.isUpdateTrans&&!0===this.props.isUpdateTrans&&(1===e&&!window.confirm("Removing the contingency will delete all the tasks associated with it, Are you sure want to remove?")))return!1;1==e&&(s=!1),a.isActive=s,n[t]=a,"HOA Docs"===a.key&&(s?(this.setState({isHoa:!0}),this.props.updateTransactionData("hoa",!0)):this.props.updateTransactionData("hoa",!1));for(var r=[],l=0;l<n.length;l++)n[l].isActive&&(""!==n[l].assignee?r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end),assignee:n[l].assignee}):r.push({name:n[l].key,startDate:new Date(n[l].start),endDate:new Date(n[l].end)}));this.props.contiCamp(r)}},{key:"setAssignee",value:function(e,t,a,n){""===e.target.value?(t.assignee=this.props.isUpdateTrans?"":"no",t.itemdefaultAssignee=!1):(t.assignee=e.target.value,t.itemdefaultAssignee=!1,t.isActive=!0),n[a]=t;for(var s=[],r=0;r<n.length;r++)n[r].isActive&&(""!==n[r].assignee?s.push({name:n[r].key,startDate:new Date(n[r].start),endDate:new Date(n[r].end),assignee:n[r].assignee}):s.push({name:n[r].key,startDate:new Date(n[r].start),endDate:new Date(n[r].end)}));this.props.contiCamp(s)}},{key:"addCustomContingency",value:function(e){var t="";if("Enter"===e.key&&!0===e.shiftKey?t=e.target.value:"Enter"===e.key&&!1===e.shiftKey&&(t=e.target.value),""!==t&&null!==t){var a=this.state.allContingencies;a.push({key:t,val:"",isActive:!0}),this.setState({allContingencies:a});for(var n={},s=0;s<a.length;s++)!0===a[s].isActive&&(n[a[s].key]=a[s].val);this.props.isMasterTemplate&&this.props.setFieldValue("contingencies",n),e.target.value=""}}},{key:"enterCustomTranContingency",value:function(e,t){var a;if(""!==(a=Et()(".set-contingencies-footer .title input").val())&&null!==a){t.push({key:a,val:a,isActive:!0,start:this.state.contStartDate.format("YYYY-MM-DD"),end:this.state.contDueDate.format("YYYY-MM-DD"),assignee:""});for(var n=[],s=0;s<t.length;s++)t[s].isActive&&(""!==t[s].assignee?n.push({name:t[s].key,startDate:new Date(t[s].start),endDate:new Date(t[s].end),assignee:t[s].assignee}):n.push({name:t[s].key,startDate:new Date(t[s].start),endDate:new Date(t[s].end)}));Et()(".set-contingencies-footer .title input").val(""),this.props.contiCamp(n)}}},{key:"addCustomTranContingency",value:function(e,t){var a="";if("Enter"===e.key&&!0===e.shiftKey?a=e.target.value:"Enter"===e.key&&!1===e.shiftKey&&(a=e.target.value),""!==a&&null!==a){t.push({key:a,val:a,isActive:!0,start:this.state.contStartDate.format("YYYY-MM-DD"),end:this.state.contDueDate.format("YYYY-MM-DD"),assignee:""});for(var n=[],s=0;s<t.length;s++)t[s].isActive&&(""!==t[s].assignee?n.push({name:t[s].key,startDate:new Date(t[s].start),endDate:new Date(t[s].end),assignee:t[s].assignee}):n.push({name:t[s].key,startDate:new Date(t[s].start),endDate:new Date(t[s].end)}));e.target.value="",this.props.contiCamp(n)}}},{key:"renderMasterTemplateCamp",value:function(){var e=this;return s.a.createElement("div",{className:"set-contingencies"},s.a.createElement("div",{className:"set-contingencies-header"},s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"}),s.a.createElement("li",{className:"status"},"active /inactive"))),s.a.createElement("div",{className:"set-contingencies-body"},s.a.createElement(Mn.a,{onDragEnd:this.onDragEnd},s.a.createElement(Mn.c,{droppableId:"droppable123"},function(t,a){return s.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:Hn(a.isDraggingOver)}),e.state.allContingencies.map(function(t,a){return s.a.createElement(Mn.b,{key:a,draggableId:"draggableId"+a,index:a},function(n,r){return s.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:zn(r.isDragging,n.draggableProps.style)}),s.a.createElement("ul",{className:t.isActive?" set-contingencies-row":"inactive set-contingencies-row"},s.a.createElement("li",{className:"id"},s.a.createElement(An.a,null)),s.a.createElement("li",{className:"title"},t.key),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},t.isActive?s.a.createElement(Sn.a,{className:"check",onClick:function(){return e.activeContigency(1,a,t)}}):s.a.createElement(In.a,{className:"check-out",onClick:function(){return e.activeContigency(0,a,t)}})))))})}),t.placeholder)}))),s.a.createElement("div",{className:"set-contingencies-footer"},"BUYER"!=this.state.userRole?s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"},s.a.createElement("input",{type:"text",onKeyDown:function(t){return e.addCustomContingency(t)},className:"form-control form-control-sm",placeholder:"Add custome contingency"})),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},s.a.createElement(xn.a,{className:"add"})))):""))}},{key:"listVendorsByConti",value:function(e,t,a,n){var r=this,l=this.state.vendors,o=[];if("Home Inspection"===e||"Radon Inspection"===e||"Septic Inspection"===e||"Wood Destroying Inspection"===e){if(void 0!==l[e]&&null!==l[e])for(var i=void 0!==l[e].data&&null!==l[e].data?l[e].data:[],c=0,m=i.length;c<m;c++)i[c].default&&t.defaultAssignee&&t.isActive&&!this.props.isUpdateTrans&&(t.assignee=i[c].contactId,t.vendorName=i[c].firstname+""+i[c].lastname),o.push(s.a.createElement("option",{value:i[c].contactId,key:i[c].contactId},i[c].firstname+" "+i[c].lastname))}else if(void 0!==l.all&&null!==l.all){var d=void 0!==l.all.data&&null!==l.all.data?l.all.data:[];for(c=0,m=d.length;c<m;c++)o.push(s.a.createElement("option",{value:d[c].contactId,key:d[c].contactId},d[c].firstname+" "+d[c].lastname))}return"BUYER"==this.state.userRole?s.a.createElement("div",null,t.isActive?s.a.createElement(s.a.Fragment,null,this.state.buyerVendors&&this.state.buyerVendors.map(function(e,a){if(e._id==t.assignee)return s.a.createElement(p.b,{to:"/UserProfile/"+e.contactId,className:"text-capitalize font-500 color-dark-blue c-pointer font-14"},e.firstname+" "+e.lastname)})):""):s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"assignee",disabled:"BUYER"==this.state.userRole,onChange:function(e){return r.setAssignee(e,t,a,n)},className:"form-control form-control-sm",value:t.assignee},s.a.createElement("option",{value:""},"Select Vendor"),o))}},{key:"renderTransactionData",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.getTransactionData(),a=[];for(var n in this.props.campContingencies){var r=this.props.campContingencies[n];"HOA Docs"!==r.name||t.hoa||this.state.isHoa?a.push({key:r.name,val:r.name,isActive:!0,start:""!=r.startDate?Gt()(r.startDate).format("YYYY-MM-DD"):this.state.contStartDate.format("YYYY-MM-DD"),end:""!=r.endDate?Gt()(r.endDate).format("YYYY-MM-DD"):this.state.contDueDate.format("YYYY-MM-DD"),assignee:r.assignee,defaultAssignee:""===r.assignee||void 0===r.assignee}):a.push({key:r.name,val:r.name,isActive:!1,start:""!=r.startDate?Gt()(r.startDate).format("YYYY-MM-DD"):this.state.contStartDate.format("YYYY-MM-DD"),end:""!=r.endDate?Gt()(r.endDate).format("YYYY-MM-DD"):this.state.contDueDate.format("YYYY-MM-DD"),assignee:"",defaultAssignee:""===r.assignee||void 0===r.assignee})}this.state.allContingenciesFromAPI.forEach(function(n){var s=!1;for(var r in e.props.campContingencies)n.name==e.props.campContingencies[r].name&&(s=!0);s||("HOA Docs"===n.name&&t.hoa&&!e.state.isHoa?a.push({key:n.name,val:n.date,isActive:!0,start:e.state.contStartDate.format("YYYY-MM-DD"),end:e.state.contDueDate.format("YYYY-MM-DD"),assignee:"",defaultAssignee:!0}):a.push({key:n.name,val:n.date,isActive:!1,start:e.state.contStartDate.format("YYYY-MM-DD"),end:e.state.contDueDate.format("YYYY-MM-DD"),assignee:"",defaultAssignee:!1}))});var l=Gt()().format("YYYY-MM-DD"),o=Gt()().format("YYYY-MM-DD");if(this.props.isUpdateTrans)void 0!==this.props.startDate&&""!==this.props.startDate&&null!==this.props.startDate&&(l=Gt()(this.props.startDate).format("YYYY-MM-DD")),void 0!==this.props.endDate&&""!==this.props.endDate&&null!==this.props.endDate&&(o=Gt()(this.props.endDate).format("YYYY-MM-DD"));else{var i=Gt()(t.startDate);l=i.format("YYYY-MM-DD");var c=Gt()(t.endDate);o=c.format("YYYY-MM-DD")}return a=Vn.sortBy(a,"key"),s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mt-2 align-items-center conti-title"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h2",{className:"color-blue-3 font-20 mb-0"},"Set Contingencies")),"BUYER"===this.state.userRole?"":s.a.createElement(Yt.a,{align:"right",className:"pl-0"},s.a.createElement(x.a,{variant:"primary",className:"btn-orange text-uppercase add-vendor-btn",onClick:function(){e.setState({isvendorClick:!0}),e.addVendor()}},"add new vendor"))),s.a.createElement("div",{className:"set-contingencies"},s.a.createElement("div",{className:"set-contingencies-header"},s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"}),s.a.createElement("li",{className:"assign"},"assign vendor"),s.a.createElement("li",{className:"date"},"CONTINGENCY DEADLINE"),s.a.createElement("li",{className:"status"},"active /inactive"))),s.a.createElement("div",{className:"set-contingencies-body"},s.a.createElement(Mn.a,{onDragEnd:this.onDragEnd},s.a.createElement(Mn.c,{droppableId:"droppable"},function(t,n){return s.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:Hn(n.isDraggingOver)}),a.map(function(t,n){return s.a.createElement(Mn.b,{key:n,draggableId:"draggableId"+n,index:n},function(r,i){return s.a.createElement("div",Object.assign({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:zn(i.isDragging,r.draggableProps.style)}),s.a.createElement("ul",{className:t.isActive?" set-contingencies-row":"inactive set-contingencies-row"},t.isActive,s.a.createElement("li",{className:"id"},s.a.createElement(An.a,null)),s.a.createElement("li",{className:"title"},t.key),s.a.createElement("li",{className:"assign"},e.listVendorsByConti(t.key,t,n,a)),s.a.createElement("li",{className:"date"},t.isActive?s.a.createElement(Ln.a,{onChange:function(s){return e.contEndDateChanges(s,t,n,a)},value:new Date(t.end),disabled:"BUYER"==e.state.userRole,minDate:new Date(l),maxDate:new Date(o),format:"MM/dd/y",calendarIcon:s.a.createElement("span",null,s.a.createElement(Tn.a,null)),clearIcon:null}):s.a.createElement(Ln.a,{onChange:function(s){return e.contEndDateChanges(s,t,n,a)},minDate:new Date(l),disabled:"BUYER"==e.state.userRole,maxDate:new Date(o),calendarIcon:s.a.createElement("span",null,s.a.createElement(Tn.a,null)),clearIcon:null})),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent",className:"BUYER"==e.state.userRole?"pointer-none":""},t.isActive?s.a.createElement(Sn.a,{className:"check",onClick:function(){return e.activeUpContigency(1,n,t,a)}}):s.a.createElement(In.a,{className:"check-out",onClick:function(){return e.activeUpContigency(0,n,t,a)}})))))})}),t.placeholder)}))),s.a.createElement("div",{className:"set-contingencies-footer"},"BUYER"!=this.state.userRole?s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"},s.a.createElement("input",{type:"text",onKeyDown:function(t){return e.addCustomTranContingency(t,a)},className:"form-control form-control-sm",placeholder:"Add custom contingency"})),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent",onClick:function(t){return e.enterCustomTranContingency(t,a)}},s.a.createElement(xn.a,{className:"add"})))):"")),s.a.createElement(Wa.a,{show:this.state.addVendor,onHide:function(){return e.addVendor()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Create New Contact")),s.a.createElement(Bn,{onClose:function(){e.setState({isvendorClick:!1}),e.addCloseVendor(a)}})))}}]),t}(n.Component),Wn=Object(B.b)(function(e){return{allContingencies:e.reducer.allContingencies,contactResponse:e.reducer.contactResponse,contacts:e.reducer.contacts,roles:e.reducer.roles}},{getAllContigencyAction:Un,getContactsActions:ut,getUserRolesAction:pt})(qn),Kn=a(53),Qn=new Date,Zn=(Qn.getMonth(),Qn.getDate(),Qn.getFullYear(),function(e){return Array.from({length:e},function(e,t){return t}).map(function(e){return{id:"item-".concat(e),content:s.a.createElement("ul",{className:" set-contingencies-row"},s.a.createElement("li",{className:"id"},s.a.createElement(An.a,null)),s.a.createElement("li",{className:"title"},"Home Inspection"),s.a.createElement("li",{className:"date"},s.a.createElement(Lt.a,{className:"icon-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0},s.a.createElement(jt.a.Control,{type:"text",size:"sm",placeholder:"MM/DD/YYYY"}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))),s.a.createElement("li",{className:"date"},s.a.createElement(Lt.a,{className:"icon-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0},s.a.createElement(jt.a.Control,{type:"text",size:"sm",placeholder:"MM/DD/YYYY"}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))),s.a.createElement("li",{className:"assign"},s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"",className:"form-control form-control-sm"},s.a.createElement("option",{value:""},"Select Vendor"),s.a.createElement("option",{value:""},"Home Inspector"),s.a.createElement("option",{value:""},"Wood Inspector"),s.a.createElement("option",{value:""},"Radon Inspector")))),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},s.a.createElement(Sn.a,{className:"check"}))))}})}),Xn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={propsConti:a.props.contingencies,show:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),contStartDate:Gt()(),contDueDate:Gt()().subtract(-29,"days"),activeContigency:!0,inactiveContiClass:"",items:Zn(3),addVendor:!1,isvendorClick:!1,allContingencies:[],campContingencies:[],allContingenciesFromAPI:[],trasactioncontigency:[],vendors:[],isUpdateconti:!1},a.onDragEnd=a.onDragEnd.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),r=Object(wn.a)(s,1)[0];return n.splice(a,0,r),n}(this.state.items,e.source.index,e.destination.index);this.setState({items:t})}}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"setModalOpen",value:function(){this.setState({show:!this.state.show})}},{key:"contStartDate",value:function(e,t){this.setState({contStartDate:t.startDate})}},{key:"contDueDate",value:function(e,t){this.setState({contDueDate:t.startDate})}},{key:"activeContigency",value:function(e,t,a){var n=this.state.allContingencies,s=!0;1==e&&(s=!1);for(var r=0;r<n.length;r++)n[r].key===a.key&&(n[r].isActive=s);this.setState({allContingencies:n});for(var l={},o=0;o<n.length;o++)!0===n[o].isActive&&(l[n[o].key]=""!==n[o].val?n[o].val:n[o].key);this.props.setFieldValue("contingencies",l)}},{key:"addVendor",value:function(){this.setState({addVendor:!this.state.addVendor,isUpdateconti:!0})}},{key:"addCloseVendor",value:function(){this.setState({isvendorClick:!1,addVendor:!this.state.addVendor}),this.getAllContacts()}},{key:"getAllContacts",value:function(){var e=this;this.props.getContactsActions().then(function(t){var a={},n=e.props.contacts;e.props.getUserRolesAction().then(function(t){if(t){a=Kn.groupBy(n,function(e){return e.roles?e.roles[0]:""});var s={};Object.keys(a).forEach(function(e){for(var n="",r=0;r<t.length;r++)t[r]._id===e&&(n=t[r].contingency);var l={data:a[e],open:!0};""!=n?s[n]=l:s[e]=l}),e.setState({vendors:s})}else e.setState({vendors:[]})})},function(t){e.setState({vendors:[]})})}},{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var e=this,t=[];for(var a in this.props.contingencies)this.props.contingencies.hasOwnProperty(a)&&t.push({key:a,val:this.props.contingencies[a],isActive:!0});this.props.getAllContigencyAction().then(function(a){a.forEach(function(a){var n=!1;for(var s in e.props.contingencies)a.name==s&&(n=!0);n||t.push({key:a.name,val:a.date,isActive:!1})}),e.setState({allContingencies:t,allContingenciesFromAPI:a})})}},{key:"componentWillReceiveProps",value:function(e){var t=[];for(var a in e.contingencies)e.contingencies.hasOwnProperty(a)&&t.push({key:a,val:e.contingencies[a],isActive:!0});t.length>0?(this.state.allContingenciesFromAPI.forEach(function(a){var n=!1;for(var s in e.contingencies)a.name==s&&(n=!0);n||t.push({key:a.name,val:a.date,isActive:!1})}),this.setState({allContingencies:t,isvendorClick:!1})):(this.state.allContingenciesFromAPI.forEach(function(e){t.push({key:e.name,val:e.date,isActive:!0})}),this.setState({allContingencies:t,isvendorClick:!1}))}},{key:"addCustomContingency",value:function(e){var t="";if("Enter"===e.key&&!0===e.shiftKey?t=e.target.value:"Enter"===e.key&&!1===e.shiftKey&&(t=e.target.value),""!==t&&null!==t){var a=this.state.allContingencies;a.push({key:t,val:"",isActive:!0}),this.setState({allContingencies:a});for(var n={},s=0;s<a.length;s++)!0===a[s].isActive&&(n[a[s].key]=a[s].val);this.props.isMasterTemplate&&this.props.setFieldValue("contingencies",n),e.target.value=""}}},{key:"enterCustomContingency",value:function(e){var t;if(""!==(t=Et()(".set-contingencies-footer .title input").val())&&null!==t){var a=this.state.allContingencies;a.push({key:t,val:"",isActive:!0}),this.setState({allContingencies:a});for(var n={},s=0;s<a.length;s++)!0===a[s].isActive&&(n[a[s].key]=a[s].val);this.props.isMasterTemplate&&this.props.setFieldValue("contingencies",n),Et()(".set-contingencies-footer .title input").val("")}}},{key:"addCustomTranContingency",value:function(e){var t="";if("Enter"===e.key&&!0===e.shiftKey?(e.preventDefault(),t=e.target.value):"Enter"===e.key&&!1===e.shiftKey&&(e.preventDefault(),t=e.target.value),""!==t&&null!==t){var a=this.state.allContingencies;a.push({key:t,val:"",isActive:!0}),this.setState({allContingencies:a});for(var n={},s=0;s<a.length;s++)!0===a[s].isActive&&(n[a[s].key]=a[s].val);e.target.value=""}return!1}},{key:"renderMasterTemplateCamp",value:function(){var e=this;console.log("this.props.contingencies",this.props.contingencies),console.log("this.state.allContingencies",this.state.allContingencies);var t=this.state.allContingencies;return t=Kn.sortBy(t,"key"),s.a.createElement("div",{className:"set-contingencies"},s.a.createElement("div",{className:"set-contingencies-header"},s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"}),s.a.createElement("li",{className:"status"},"active /inactive"))),s.a.createElement("div",{className:"set-contingencies-body"},s.a.createElement(Mn.a,{onDragEnd:this.onDragEnd},s.a.createElement(Mn.c,{droppableId:"droppable123"},function(a,n){return s.a.createElement("div",Object.assign({},a.droppableProps,{ref:a.innerRef,style:(r=n.isDraggingOver,{background:r?"#fff":""})}),t.map(function(t,a){return s.a.createElement(Mn.b,{key:a,draggableId:"draggableId"+a,index:a},function(n,r){return s.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:(l=r.isDragging,o=n.draggableProps.style,Object(Cn.a)({userSelect:"none",background:l?"#f5f9fc":""},o))}),s.a.createElement("ul",{className:t.isActive?" set-contingencies-row":"inactive set-contingencies-row"},s.a.createElement("li",{className:"id"},s.a.createElement(An.a,null)),s.a.createElement("li",{className:"title"},t.key),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},t.isActive?s.a.createElement(Sn.a,{className:"check",onClick:function(){return e.activeContigency(1,a,t)}}):s.a.createElement(In.a,{className:"check-out",onClick:function(){return e.activeContigency(0,a,t)}})))));var l,o})}),a.placeholder);var r}))),s.a.createElement("div",{className:"set-contingencies-footer"},s.a.createElement("ul",{className:"set-contingencies-row"},s.a.createElement("li",{className:"id"}),s.a.createElement("li",{className:"title"},s.a.createElement("input",{type:"text",onKeyDown:function(t){return e.addCustomContingency(t)},className:"form-control form-control-sm",placeholder:"Add custom contingency"})),s.a.createElement("li",{className:"status"},s.a.createElement(x.a,{variant:"transparent"},s.a.createElement(xn.a,{className:"add",onClick:function(t){return e.enterCustomContingency(t)}}))))))}},{key:"listVendorsByConti",value:function(e,t,a){var n=this.state.vendors,r=[];if("Home Inspection"===e||"Radon Inspection"===e||"Septic Inspection"===e||"Wood Destroying Inspection"===e){if(void 0!==n[e]&&null!==n[e])for(var l=void 0!==n[e].data&&null!==n[e].data?n[e].data:[],o=0,i=l.length;o<i;o++){if(l[o].default,void 0!==this.props.contactResponse&&null!==this.props.contactResponse){var c=this.props.contactResponse.data;l[o]._id,c._id}r.push(s.a.createElement("option",{value:l[o]._id,key:l[o]._id},l[o].firstname+" "+l[o].lastname))}}else for(var m in n){var d=n[m].data;for(o=0,i=d.length;o<i;o++)r.push(s.a.createElement("option",{value:d[o]._id,key:d[o]._id},d[o].firstname+" "+d[o].lastname))}return r}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mt-2 align-items-center conti-title"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h2",{className:"color-blue-3 font-20 mb-0"},"Set Contingencies")),s.a.createElement(Yt.a,{align:"right",className:"pl-0"},s.a.createElement(x.a,{variant:"primary",className:"btn-orange text-uppercase add-vendor-btn",onClick:function(){e.setState({isvendorClick:!0}),e.addVendor()}},"add new vendor"))),this.renderMasterTemplateCamp(),s.a.createElement(Wa.a,{show:this.state.addVendor,onHide:function(){return e.addVendor()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Create New Contact")),s.a.createElement(Bn,{onClose:function(){e.setState({isvendorClick:!1}),e.addCloseVendor()}})))}}]),t}(n.Component),Jn=Object(B.b)(function(e){return{allContingencies:e.reducer.allContingencies,contactResponse:e.reducer.contactResponse,contacts:e.reducer.contacts,roles:e.reducer.roles}},{getAllContigencyAction:Un,getContactsActions:ut,getUserRolesAction:pt})(Xn);function $n(){return function(e){return mt.getMethod(ct.buyerAgentMasterTemplate,!0).then(function(t){200===t.status?e({type:De,buyerMasterTemplates:t.data.data,totalBuyerTemplates:t.data.total}):e({type:De,buyerMasterTemplates:{},totalBuyerTemplates:0})})}}a(53);var es=new Date,ts=es.getMonth()+1+"/"+es.getDate()+"/"+es.getFullYear(),as=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.contStartDate=a.contStartDate.bind(Object(Rt.a)(a)),a.contDueDate=a.contDueDate.bind(Object(Rt.a)(a)),a.state={show:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),contStartDate:Gt()().subtract(-29,"days"),contDueDate:Gt()().subtract(-29,"days"),activeContigency:!0,inactiveContiClass:"",addVendor:!1,campaignStyle:[],vendors:[],campContingencies:[],setVendors:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setStartDate",value:function(e,t){var a=this;this.setState({startDate:t.startDate},function(){a.props.updateTransactionData("startDate",t.startDate.format("YYYY-MM-DD"))});for(var n=this.props.getTransactionData().campaign,s=0,r=0,l=this.state.campaignStyle.length;r<l;r++){var o=this.state.campaignStyle[r];o._id===n&&(s=o.campaignDays)}var i=Gt()(this.state.startDate).subtract(-s,"days");this.setState({closeDate:i},function(){a.props.updateTransactionData("endDate",Gt()(i).format("YYYY-MM-DD"))})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate}),this.props.updateTransactionData("endDate",t.startDate.format("YYYY-MM-DD"))}},{key:"setModalOpen",value:function(){this.setState({show:!this.state.show})}},{key:"contStartDate",value:function(e,t){this.setState({contStartDate:t.startDate})}},{key:"contDueDate",value:function(e,t){this.setState({contDueDate:t.startDate})}},{key:"activeContigency",value:function(e){1==e&&(this.setState({activeContigency:!this.state.activeContigency}),this.setState({inactiveContiClass:"inactive"})),2==e&&(this.setState({activeContigency:!this.state.activeContigency}),this.setState({inactiveContiClass:""}))}},{key:"addVendor",value:function(){this.setState({addVendor:!this.state.addVendor})}},{key:"componentDidMount",value:function(){var e=this;this.props.getBuyerAgentMasterTemplateAction().then(function(t){e.setState({campaignStyle:e.props.buyerMasterTemplates});for(var a="",n=[],s=0,r=0,l=e.state.campaignStyle.length;r<l;r++){var o=e.state.campaignStyle[r];30==o.campaignDays&&(n=o.contingencies,s=o.campaignDays-1,a=o._id)}var i=e.state.setVendors,c=Gt()(),m=Gt()().subtract(-s,"days"),d=[];for(var u in n)if(n.hasOwnProperty(u)){var p=u,h={name:u,startDate:c.format("YYYY-MM-DD"),endDate:m.format("YYYY-MM-DD"),assignee:""};if(("Home Inspection"===p||"Radon Inspection"===p||"Septic Inspection"===p||"Wood Destroying Inspection"===p)&&void 0!==i[p]&&null!==i[p]){var g=void 0!==i[p].data&&null!==i[p].data?i[p].data:[];for(r=0,l=g.length;r<l;r++)g[r].default&&(h.assignee=g[r].contactId)}d.push(h)}e.setState({startDate:c,closeDate:m,campContingencies:d}),e.props.updateTransactionData("campaign",a),e.props.updateTransactionData("contingencies",d),e.props.updateTransactionData("startDate",Gt()(c).format("YYYY-MM-DD")),e.props.updateTransactionData("endDate",Gt()(m).format("YYYY-MM-DD"))})}},{key:"updateTranConData",value:function(e){this.setState({campContingencies:e}),this.props.updateTransactionData("contingencies",e)}},{key:"setContingencyForCamp",value:function(e){var t=e.target.value;if("select"!=t){for(var a=[],n=0,s=0,r=this.state.campaignStyle.length;s<r;s++){var l=this.state.campaignStyle[s];l._id===t&&(a=l.contingencies,n=l.campaignDays-1)}this.props.getTransactionData();var o=this.state.setVendors,i=Gt()(),c=Gt()().subtract(-n,"days"),m=[];for(var d in a)if(a.hasOwnProperty(d)){var u=d,p={name:d,startDate:i.format("YYYY-MM-DD"),endDate:c.format("YYYY-MM-DD"),assignee:""};if(("Home Inspection"===u||"Radon Inspection"===u||"Septic Inspection"===u||"Wood Destroying Inspection"===u)&&void 0!==o[u]&&null!==o[u]){var h=void 0!==o[u].data&&null!==o[u].data?o[u].data:[];for(s=0,r=h.length;s<r;s++)h[s].default&&(p.assignee=h[s].contactId)}m.push(p)}this.setState({startDate:i,closeDate:c,campContingencies:m}),this.props.updateTransactionData("campaign",t),this.props.updateTransactionData("contingencies",m),this.props.updateTransactionData("startDate",Gt()(i).format("YYYY-MM-DD")),this.props.updateTransactionData("endDate",Gt()(c).format("YYYY-MM-DD"))}else this.setState({campContingencies:[]}),this.props.updateTransactionData("campaign",""),this.props.updateTransactionData("contingencies",[])}},{key:"renderHelpText",value:function(e,t){return s.a.createElement("div",{className:"val-err-tooltip",key:t},s.a.createElement("span",null,e))}},{key:"render",value:function(){var e=this;this.props.getTransactionData().isCampErrMsg;this.state.startDate.format("MM/DD/YYYY"),this.state.closeDate.format("MM/DD/YYYY");for(var t=[],a=0,n=this.state.campaignStyle.length;a<n;a++){var r=this.state.campaignStyle[a],l=s.a.createElement("option",{key:r._id,value:r._id},r.name);t.push(l)}return s.a.createElement("div",{className:"admin-steps last-step admin-content-area campaign-step"},s.a.createElement("h2",{className:"color-blue-3 font-20"},"Select Campaign"),s.a.createElement("div",{className:"campaign-div"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:10},s.a.createElement("form",null,s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,{className:"font-500 color-grey-1"},"Campaign Style"),s.a.createElement("div",{className:"c-select campaign-dropdown"},s.a.createElement("select",{name:"campaign",className:"form-control",onChange:function(t){return e.setContingencyForCamp(t)},value:this.props.getTransactionData().campaign},s.a.createElement("option",{value:"select"},"Select"),t)))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,{className:"font-500 color-grey-1"},"Contract/Escrow Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:this.state.startDate,onEvent:this.setStartDate,minDate:ts},s.a.createElement(jt.a.Control,{type:"text",placeholder:"MM/DD/YYYY",value:this.state.startDate.format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement(jt.a.Group,{controlId:""},s.a.createElement(jt.a.Label,{className:"font-500 color-grey-1"},"Expected Closing Date\u200b\u200b\u200b\u200b\u200b\u200b\u200b",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:this.state.closeDate,onEvent:this.setEndDate,minDate:this.state.startDate},s.a.createElement(jt.a.Control,{type:"text",placeholder:"MM/DD/YYYY",value:this.state.closeDate.format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))))))),s.a.createElement("hr",{className:"mt-1"}),s.a.createElement(Wn,{isMasterTemplate:!1,updateTransactionData:function(t,a,n){return e.props.updateTransactionData(t,a,n)},campContingencies:this.state.campContingencies,getTransactionData:function(){return e.props.getTransactionData()},contiCamp:function(t){return e.updateTranConData(t)},setVendorsFun:function(t){e.setState({setVendors:t})}}))}}]),t}(n.Component),ns=Ht()(Wt.a)(Object(B.b)(function(e){return{buyerMasterTemplates:e.reducer.buyerMasterTemplates,totalBuyerTemplates:e.reducer.totalBuyerTemplates}},{getBuyerAgentMasterTemplateAction:$n})(as)),ss=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).defaultState={condo:!1,builtBefore1978:!1,hoa:!1,draft:!1,leadSource:"",emd:"",agreedOpenPrice:"",transactionType:"Purchase",property:{image:[],name:"",street:"",street1:"",city:"",zipcode:"",state:""},buyer:{email:"",firstname:"",lastName:"",mobileNumber:""},startDate:Gt()(),endDate:Gt()(),campaign:"",contingencies:[],isShowPrompt:!1,promptMsg:""},a.state=a.defaultState,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getTransactionData",value:function(){return this.state}},{key:"updateTransactionData",value:function(e,t){"emd"===e&&(this.state.emd=t),"agreedOpenPrice"===e&&(this.state.agreedOpenPrice=t),"leadSource"===e&&(this.state.leadSource=t),"transactionType"===e&&(this.state.transactionType=t),"condo"===e&&(this.state.condo=t),"builtBefore1978"===e&&(this.state.builtBefore1978=t),"hoa"===e&&(this.state.hoa=t),"campaign"===e&&(this.state.campaign=t),"startDate"===e&&this.setState({startDate:t}),"endDate"===e&&this.setState({endDate:t}),"contingencies"===e&&this.setState({contingencies:t}),"property_street"===e&&(this.state.property.street=t),"property_street1"===e&&(this.state.property.street1=t),"property_city"===e&&(this.state.property.city=t),"property_state"===e&&(this.state.property.state=t),"property_zipcode"===e&&(this.state.property.zipcode=t),"property_image"===e&&(this.state.property.image=t),"buyer_firstname"===e&&(this.state.buyer.firstname=t),"buyer_lastName"===e&&(this.state.buyer.lastName=t),"buyer_email"===e&&(this.state.buyer.email=t),"buyer_mobileNumber"===e&&(this.state.buyer.mobileNumber=t)}},{key:"getLastStep",value:function(e){0===e&&Et()(".saveBtn").html("Next"),1===e&&Et()(".saveBtn").html("Confirm & Save"),2===e&&this.showPrompt()}},{key:"isShowPrompt",value:function(){this.setState({isShowPrompt:!this.state.isShowPrompt})}},{key:"showPrompt",value:function(){""===this.state.campaign&&0===this.state.contingencies.length&&(this.setState({promptMsg:"You are trying to create transaction without any template or contingency, hence you have to add all the tasks manually. Are you sure want to continue?"}),this.setState({isShowPrompt:!0})),""===this.state.campaign&&this.state.contingencies.length>0&&(this.setState({promptMsg:"You are trying to create transaction without any template or contingency, hence you have to add all the tasks manually. Are you sure want to continue?"}),this.setState({isShowPrompt:!0})),""!==this.state.campaign&&0===this.state.contingencies.length&&(this.setState({promptMsg:"You are trying to create transaction without any template or contingency, hence you have to add all the tasks manually. Are you sure want to continue?"}),this.setState({isShowPrompt:!0})),""!==this.state.campaign&&this.state.contingencies.length>0&&(this.setState({isShowPrompt:!1,promptMsg:""}),this.submitAction())}},{key:"okPrompt",value:function(){this.setState({isShowPrompt:!1,promptMsg:""}),this.submitAction()}},{key:"submitAction",value:function(){var e=this,t=this.state;this.setState({isCampErrMsg:!1}),delete t.isCampErrMsg;for(var a=this.state.contingencies,n=[],s=0;s<a.length;s++)""!==a[s].assignee&&void 0!==a[s].assignee&&"no"!=a[s].assignee?n.push({name:a[s].name,startDate:new Date(a[s].startDate),endDate:new Date(a[s].endDate),assignee:a[s].assignee}):n.push({name:a[s].name,startDate:new Date(a[s].startDate),endDate:new Date(a[s].endDate)});if((t.contingencies=n,t.startDate=new Date(t.startDate),t.endDate=new Date(t.endDate),t.buyer.mobileNumber=t.buyer.mobileNumber.replace(/\-/g,""),t.property.zipcode=t.property.zipcode.replace(/\-/g,""),""===t.campaign&&delete t.campaign,t.property)&&t.property.zipcode.toString().length>5){var r=t.property.zipcode.replace(/\-/g,"");t.property.zipcode=r}var l=[],o=new FormData;t.property.image.forEach(function(e){e&&(o.append("file",e),l.push(e.name))}),t.property.image.length>0?mt.postFormDataMethod(ct.uploadPropertyImage,o,!0).then(function(a){t.property.image=l,200==a.status?e.props.createTransactionAction(t).then(function(t){!0===e.props.isTrascationCreated&&(e.setState(e.defaultState),e.props.history.push("/transactions"))}):(t.property.image=[],e.props.createTransactionAction(t).then(function(t){!0===e.props.isTrascationCreated&&(e.setState(e.defaultState),e.props.history.push("/transactions"))}))}):(t.property.image=[],this.props.createTransactionAction(t).then(function(t){!0===e.props.isTrascationCreated&&(e.setState(e.defaultState),e.props.history.push("/transactions"))}))}},{key:"updateErrMsg",value:function(e){0==e?this.setState({isCampErrMsg:!1}):this.setState({isCampErrMsg:!0})}},{key:"render",value:function(){var e=this,t=[{name:"Property Information",component:s.a.createElement(kn,{getTransactionData:function(){return e.getTransactionData()},updateTransactionData:function(t,a){e.updateTransactionData(t,a)}})},{name:"Select Campaign",component:s.a.createElement(ns,{getTransactionData:function(){return e.getTransactionData()},updateTransactionData:function(t,a){e.updateTransactionData(t,a)},updateErrMsg:function(t){return e.updateErrMsg(t)}})}];return s.a.createElement("div",{className:"step-progress transaction-create"},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,{xs:12,sm:3},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},"Create Transactions")),s.a.createElement(Yt.a,{xs:12,sm:6}),s.a.createElement(Yt.a,{xs:12,sm:3,align:"right",className:"transaction-close"},s.a.createElement(p.b,{to:"/transactions",className:"nav-link p-0 color-black"},s.a.createElement(j.a,{style:{stroke:"#fff",height:"40px",width:"40px"}})))),s.a.createElement("div",{className:"multi-step multi-step-admin"},s.a.createElement(Ot.a,{showNavigation:!0,steps:t,backButtonCls:"btn btn-sm btn-primary btn-blue btn-outlined w-140 mr-3",nextButtonCls:"btn btn-sm btn-primary btn-blue w-140 saveBtn",backButtonText:"Cancel",onStepChange:function(t){return e.getLastStep(t)},hocValidationAppliedTo:[0],preventEnterSubmission:!0})),s.a.createElement(Wa.a,{show:this.state.isShowPrompt,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,this.state.promptMsg)),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.isShowPrompt()}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.okPrompt()}},"Yes"))))}}]),t}(s.a.Component),rs=Object(B.b)(function(e){return{isTrascationCreated:e.reducer.isTrascationCreated,createTransactionData:e.reducer.createTransactionData}},{createTransactionAction:function(e){return function(t){return mt.postMethod(ct.AdminCreateTransactionUrl,e,!0).then(function(e){return 200===e.status?t({type:ie,isTrascationCreated:!0,createTransactionData:e.data}):t({type:ie,isTrascationCreated:!1,createTransactionData:[]}),e.data})}}})(ss),ls=a(1429),os=a(1430),is=a(1431),cs=a(1446),ms=a(1417),ds=a(1418),us=a(1419),ps=a(287),hs=a(164),gs=a.n(hs),fs=(a(1100),a(53)),Es=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={showArchieve:!1,show:!1,showPreview:!1,previewURL:"",docName:"",userRole:localStorage.getItem("usertype").toUpperCase()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"showArchieve",value:function(){this.setState({showArchieve:!this.state.showArchieve})}},{key:"setModalOpen",value:function(){this.setState({show:!this.state.show})}},{key:"ModalPreview",value:function(e,t){var a=this;if(e){var n="/#";fetch(ct.AdminCreateTransactionUrl+"/"+e+"?id="+t,{method:"GET"}).then(function(e){return e.json()}).then(function(t){n=t.url,a.setState({showPreview:!a.state.showPreview,previewURL:n,docName:e})})}}},{key:"getType",value:function(e){var t="";if(e){var a=((e.match(/(\.\w+$)/gim)||[])[0]+"").toLowerCase();".jpg"==a||".jpeg"==a||".png"==a||".gif"==a?t="image":e.match(/.(pdf)$/i)&&(t="pdf")}return t}},{key:"archiveDocument",value:function(e){var t=this;this.props.archiveDocAction(e._id).then(function(e){t.props.archiveDocument(e)})}},{key:"render",value:function(){var e=this,t=[],a=this.props,n=a.folderName,r=a.transactionId,l=a.documents;console.log(l),l=fs.sortBy(l,"document");var o=ct.viewDocUrl.replace("{transactionId}",r);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-detail-title"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("img",{src:gs.a,alt:"folder",style:{width:"30px"}})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-18 mb-0"},n)),s.a.createElement(Yt.a,{align:"right",className:"col-auto"},"VENDOR"===this.state.userRole?"":s.a.createElement(x.a,{variant:"primary",size:"xs",hidden:this.props.hideNewDocument,className:"btn-outlined btn-blue-light h-auto font-14 browse-btn"},s.a.createElement("input",{type:"file",id:"browseDoc",multiple:!0,value:t,accept:".pdf,.doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.jpg,.png,.gif,.jpeg",onChange:function(a){e.props.uploadNewDocument(a.target.files),t=[]}}),s.a.createElement("label",{htmlFor:"browseDoc"},"+ New Document")))),s.a.createElement("div",{className:"folder-detail"},l.map(function(t,a){return s.a.createElement(Ut.a,{key:"doc"+a,className:"mx-0 folder-detail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("input",{type:"checkbox",id:"check"+a,name:""})),"image"==e.getType(t.document)||"pdf"==e.getType(t.document)?s.a.createElement(Yt.a,{className:"pl-2",onClick:function(){return e.ModalPreview(t.document,r)}},s.a.createElement("div",{className:"custom-control custom-checkbox font-15 color-black font-500 mr-0 pl-0"},s.a.createElement("label",{className:"mb-0"},t.document)),s.a.createElement("p",{className:"color-grey-1 font-14 mb-0"},"Updated"," ",Gt()(t.modifiedDate).format("MM/DD/YYYY"))):s.a.createElement(Yt.a,{className:"pl-2"},s.a.createElement("div",{className:"custom-control custom-checkbox font-15 color-black font-500 mr-0 pl-0"},s.a.createElement("label",{className:"mb-0"},s.a.createElement("a",{href:o+t.document,download:!0},t.document))),s.a.createElement("p",{className:"color-grey-1 font-14 mb-0"},"Updated"," ",Gt()(t.modifiedDate).format("MM/DD/YYYY"))),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{href:o+t.document,download:!0},"Download"),("image"==e.getType(t.document)||"pdf"==e.getType(t.document))&&s.a.createElement(M.a.Item,{onClick:function(){return e.ModalPreview(t.document,r)}},"Preview"),"VENDOR"!=localStorage.getItem("usertype")&&0==t.isArchive&&0==t.isDelete&&s.a.createElement(M.a.Item,{className:"color-dark-orange-3",onClick:function(){e.archiveDocument(t)}},"Archive document")))))}),l.length<=0&&s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Documents")))),s.a.createElement(Wa.a,{show:this.state.showPreview,onHide:function(){e.setState({showPreview:!1})},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-preview"},s.a.createElement(Wa.a.Header,{className:"d-block"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{xs:"9"},s.a.createElement("div",{className:"modal-title"},"Document Preview")),s.a.createElement(Yt.a,{xs:"3",className:"text-right"},s.a.createElement(x.a,{className:"close-btn",variant:"transparent",onClick:function(){e.setState({showPreview:!1})}},s.a.createElement(j.a,null))))),s.a.createElement(Wa.a.Body,null,"image"==this.getType(this.state.docName||"")?s.a.createElement("img",{src:ct.AdminCreateTransactionUrl+"/upload?id="+r+"&img="+this.state.docName}):s.a.createElement("object",{data:this.state.previewURL||"#",width:"100%",height:"100%"}))))}}]),t}(s.a.Component),vs=Object(B.b)(function(e){return{docs:e.reducer.docs||[]}},{archiveDocAction:function(e){return function(t){return mt.putMethod(ct.archiveDocumentUrl+e,{},!0).then(function(e){return e._id,t({type:We}),e})}},updateDocAction:Za,updateTaskAction:an,getTaskDetailsAction:en})(Es),ys=a(53),bs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={showArchieve:!0,show:!1,OpenDocumentDetail:!1,folders:{},originalFolders:{},folderName:"",selectedFolderName:"",showLoader:!1,renameFolder:!1,documents:[],searchParam:"",userRole:localStorage.getItem("usertype").toUpperCase()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"showArchieve",value:function(){this.setState({showArchieve:!this.state.showArchieve})}},{key:"setModalOpen",value:function(e){e?this.setState({folderName:e,renameFolder:!0,searchParam:""}):this.setState({folderName:""}),this.setState({show:!this.state.show})}},{key:"OpenDocumentDetail",value:function(){window.innerWidth<768&&this.setState({OpenDocumentDetail:!this.state.OpenDocumentDetail})}},{key:"componentWillMount",value:function(){this.getAllFolders(0,"first")}},{key:"showLoader",value:function(e){this.setState({showLoader:e})}},{key:"getAllFolders",value:function(e,t){var a=this;this.showLoader(!0),this.props.listDocAction(this.props.transactionId).then(function(n){var s=[];Object.keys(n).sort().forEach(function(e){s[e]=n[e]}),a.setState({folders:s,originalFolders:s},function(){a.showLoader(!1),"archive"==t||"add"==t?a.selectFolder(e):"first"==t&&(Object.keys(a.state.folders).length>0?a.selectFolder(Object.keys(a.state.folders)[e],!1,!0):a.selectFolder("Closing Documents",!1,!0))})})}},{key:"createNewFolder",value:function(e){var t=this;this.showLoader(!0);var a={transactionId:this.props.transactionId,location:e,document:""};if(this.state.renameFolder){var n={TransactionId:this.props.transactionId,location:this.state.selectedFolderName,newLocation:e,isDelete:!1};this.props.removeDocAction(n).then(function(e){t.getAllFolders(t.state.selectedFolderName,"add"),t.setModalOpen(),t.showLoader(!1)}),this.setState({renameFolder:!1},function(){t.selectFolder(e)})}else this.props.addDocAction(a).then(function(a){t.getAllFolders(e,"add"),t.setModalOpen(),t.showLoader(!1)})}},{key:"archiveFolder",value:function(e){var t=this,a={TransactionId:this.props.transactionId,location:e,newLocation:e,isDelete:!0};this.props.removeDocAction(a).then(function(a){t.getAllFolders(e,"archive"),t.showLoader(!1)})}},{key:"selectFolder",value:function(e,t,a){var n=this,s=[];t?"Archived Docs"==e?Object.keys(this.state.folders).forEach(function(e){console.log(n.state.folders[e]),s=ys.concat(s,(n.state.folders[e]||[]).filter(function(e){return 0==e.isDelete&&1==e.isArchive}))}):Object.keys(this.state.folders).forEach(function(t){t==e&&(s=(n.state.folders[t]||[]).filter(function(e){return 1==e.isDelete&&0==e.isArchive}))}):Object.keys(this.state.folders).forEach(function(t){t==e&&(s=(n.state.folders[t]||[]).filter(function(e){return 1!=e.isArchive}))}),ys.remove(s,function(e){return void 0==e.document||""==e.document}),a||this.OpenDocumentDetail(),this.setState({selectedFolderName:e,folderId:"",documents:s,hideNewDocument:t})}},{key:"uploadNewDocument",value:function(e){var t=this,a=[];if(this.showLoader(!0),e.length>0){for(var n=new FormData,s=0;s<e.length;s++)a.push(e[s].name),n.append("file",e[s]);this.props.uploadDocumentAction(n,this.props.transactionId).then(function(e){t.showLoader(!1),a.forEach(function(e){var a={transactionId:t.props.transactionId,location:t.state.selectedFolderName,document:e};Object.keys(t.state.folders).forEach(function(e){e==t.state.selectedFolderName&&t.state.folders[e][0]._id}),t.showLoader(!0),t.props.addDocAction(a).then(function(e){t.showLoader(!1),t.getAllFolders(t.state.selectedFolderName,"add")})})})}else this.showLoader(!1),alert("No files Selected")}},{key:"searchDocumentByName",value:function(e){var t=this,a=this.state.originalFolders,n={};a=Object.keys(a).filter(function(t){var s;return s=a[t].filter(function(t){return!!t.document&&(t.document+"").toLowerCase().includes((e+"").trim().toLowerCase())}),n[t]=s,!1}),console.log(n),this.setState({folders:n,searchParam:e},function(){console.log("folders",t.state.folders,t.state.originalFolders);Object.keys(t.state.folders).length>0?t.selectFolder([].length>0?"Archived Docs":Object.keys(t.state.folders)[0]):t.selectFolder("")})}},{key:"refreshDocuments",value:function(e){this.getAllFolders(this.state.selectedFolderName,"archive")}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement("div",{className:"document-page"},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-inner align-items-center mt-10"},s.a.createElement(Yt.a,{className:"doc-name"},s.a.createElement("h4",{className:"font-18"},"Documents")),s.a.createElement(Yt.a,{className:"doc-search"},s.a.createElement("div",{className:"icon-wrapper"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search by document/folder name",value:this.state.searchParam,onChange:function(t){e.searchDocumentByName(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{align:"right",className:"doc-black"})),s.a.createElement("div",{className:"container-custom admin-content-area"},s.a.createElement("div",{className:"doc-row pt-2"},s.a.createElement("div",{className:"doc-col"},s.a.createElement(Ut.a,{className:"mx-0 py-1 align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"font-16 m-0"},"Document Folder")),s.a.createElement(Yt.a,{align:"right",className:"col-auto pl-0 pr-1"},"VENDOR"===this.state.userRole?"":s.a.createElement(x.a,{variant:"primary",size:"xs",className:"btn-outlined btn-blue-light h-auto px-2 font-14",onClick:function(){return e.setModalOpen()}},"+ New Folder"))),s.a.createElement("div",{className:"folder-list-wrapper"},s.a.createElement("div",{className:"folder-list folder"},s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-single"+("Closing Documents"==this.state.selectedFolderName?" active":""),onClick:function(){e.selectFolder("Closing Documents")},key:"Closing Documents"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("img",{src:gs.a,alt:"folder",style:{width:"30px"}})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 mb-0"},"Closing Documents ",s.a.createElement("em",null,"(default folder)")))),Object.keys(this.state.folders).filter(function(t){var a=!1;return e.state.folders[t].forEach(function(e){e.isDelete||(a=!0)}),a}).map(function(t){return"Closing Documents"!=t?s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-single"+(e.state.selectedFolderName==t?" active":""),onClick:function(){e.selectFolder(t)},key:t},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("img",{src:gs.a,alt:"folder",style:{width:"30px"}})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 mb-0"},t)),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder2",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){e.setModalOpen(t)}},"Rename"),"VENDOR"!=localStorage.getItem("usertype")&&s.a.createElement(M.a.Item,{onClick:function(){e.archiveFolder(t)},className:"color-dark-orange-3"},"Archive"))))):""})),"VENDOR"===this.state.userRole||"BUYER"===this.state.userRole?"":s.a.createElement("div",{className:"folder-list archieve"},s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-single archieve-acc-title",onClick:function(){return e.showArchieve()},"aria-controls":"example-collapse-text","aria-expanded":this.state.showArchieve},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement(ms.a,{className:"color-grey-1"})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"font-16 mb-0 font-400"},"Archive")),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(ds.a,{className:"KeyboardArrowRight"}),s.a.createElement(us.a,{className:"KeyboardArrowDown"}))),s.a.createElement(ps.a,{in:this.state.showArchieve},s.a.createElement("div",{className:"folder-list folder"},s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-single"+("Archived Docs"==this.state.selectedFolderName?" active":""),onClick:function(){e.selectFolder("Archived Docs",!0)},key:"Archived Docs"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("img",{src:gs.a,alt:"folder",style:{width:"30px"}})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 mb-0"},"Archived Docs"))),Object.keys(this.state.folders).filter(function(t){var a=!1;return e.state.folders[t].forEach(function(e){e.isDelete&&(a=!0)}),a}).map(function(t){return"Closing Documents"!=t?s.a.createElement(Ut.a,{className:"mx-0 align-items-center folder-single"+(e.state.selectedFolderName==t?" active":""),onClick:function(){e.selectFolder(t,!0)},key:t},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("img",{src:gs.a,alt:"folder",style:{width:"30px"}})),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"color-blue-3 font-16 mb-0"},t))):""})))))),s.a.createElement("div",{className:"doc-col col-full"},s.a.createElement(vs,{folderName:this.state.selectedFolderName,transactionId:this.props.transactionId||"",documents:this.state.documents,uploadNewDocument:function(t){e.uploadNewDocument(t)},archiveDocument:function(t){e.refreshDocuments(t)},folderId:this.state.folderId,hideNewDocument:this.state.hideNewDocument})))),s.a.createElement(Wa.a,{show:this.state.show,onHide:function(){return e.setModalOpen()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Create Folder")),s.a.createElement(Wa.a.Body,null,s.a.createElement(jt.a,{className:"form-sm form-admin"},s.a.createElement(jt.a.Group,{controlId:"",className:"mb-3"},s.a.createElement(jt.a.Control,{type:"text",value:this.state.folderName,onChange:function(t){e.setState({folderName:t.target.value})}})),s.a.createElement(x.a,{type:"submit",variant:"primary",size:"sm",disabled:""==this.state.folderName,className:"btn-blue w-140",onClick:function(){e.createNewFolder(e.state.folderName)}},this.state.renameFolder?"Rename":"Create")))),s.a.createElement(Wa.a,{show:this.state.OpenDocumentDetail,onHide:function(){return e.OpenDocumentDetail()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-view-page"},s.a.createElement(Wa.a.Header,{closeButton:!0}),s.a.createElement(Wa.a.Body,null,s.a.createElement(vs,{folderName:this.state.selectedFolderName,folderId:this.state.folderId,transactionId:this.props.transactionId||"",documents:this.state.documents,uploadNewDocument:function(t){e.uploadNewDocument(t)},archiveDocument:function(t){e.refreshDocuments(t)},hideNewDocument:this.state.hideNewDocument})))))}}]),t}(s.a.Component),Ns=Object(B.b)(function(e){return{docs:e.reducer.docs,totalDocs:e.reducer.totalDocs}},{listDocAction:Ka,addDocAction:Qa,updateDocAction:Za,uploadDocumentAction:Xa,removeDocAction:function(e){return function(t){return mt.postMethod(ct.removeFolderUrl,e,!0).then(function(e){return""!==e._id?t({type:Ke,isDocAdded:!0}):t({type:Ke,isDocAdded:!1}),e})}}})(bs),Ds=a(186),ks=a.n(Ds),Ts=a(70),Cs=a.n(Ts),ws=a(54),As=[{value:"Document",label:"Document"},{value:"Comment",label:"Comment"},{value:"Tasks",label:"Tasks"},{value:"Email",label:"Email"},{value:"Text",label:"Text"}],Ss=a(53),Is=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={userRole:localStorage.getItem("usertype").toUpperCase(),showLoader:!1,activities:[],originalActivities:[],searchParam:"",isFiltered:!1,typeFilter:[],userFilter:[],sdateFilter:"",edateFilter:"",userList:[],initialValues:{byuser:[],bytype:[],sdate:"",edate:""},users:[],showFilter:!1,filterSelected:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getUserList",value:function(e){var t=this,a=[],n=this.props.transactionData.buyer,s={value:this.props.transactionData.buyerId,label:n.firstname+" "+n.lastName};a.push(s);var r={value:localStorage.getItem("ID"),label:localStorage.getItem("fname")+" "+localStorage.getItem("lname")};a.push(r),this.props.getActivityUsersAction(e).then(function(e){if(void 0!==t.props.activityUsers&&null!==t.props.activityUsers)for(var n=0;n<t.props.activityUsers.length;n++){var s={value:t.props.activityUsers[n]._id,label:t.props.activityUsers[n].firstname+" "+t.props.activityUsers[n].lastname};a.push(s)}t.setState({users:a})})}},{key:"componentWillMount",value:function(){var e=this,t=this.props.transactionId;this.props.getActivityAction(t).then(function(t){if(void 0!==e.props.transactionActivities&&null!==e.props.transactionActivities){var a=e.props.transactionActivities;a=Ss.orderBy(a,["createdDate"],["desc"]),e.setState({activities:e.formatActivity(a),originalActivities:a,showLoader:!1})}}),this.getUserList(t)}},{key:"formatActivity",value:function(e){for(var t={},a=0;a<e.length;a++){var n=e[a],s=Gt()(n.createdDate).format("MM/DD/YYYY").toString();t[s]=t[s]||[],t[s].push(n)}return t}},{key:"searchActivity",value:function(e,t){var a=this,n=this.state.originalActivities,s=[],r=e;t&&(r=this.state.searchParam),s=""!==r?n.filter(function(e){for(var t=0;t<e.content.length>0;t++)return e.content[t].toLowerCase().includes(r.trim().toLowerCase())}):n,null!==this.state.userFilter&&void 0!==this.state.userFilter&&this.state.userFilter.length>0&&(s=s.filter(function(e,t){return!(a.state.userFilter.length>0)||a.state.userFilter.filter(function(t){return e.createdBy.toLowerCase().includes(t.value.trim().toLowerCase())}).length>0})),null!==this.state.typeFilter&&void 0!==this.state.typeFilter&&this.state.typeFilter.length>0&&(s=s.filter(function(e,t){return!(a.state.typeFilter.length>0)||a.state.typeFilter.filter(function(t){return e.key.toLowerCase().includes(t.value.trim().toLowerCase())}).length>0})),""!==this.state.sdateFilter&&""!==this.state.edateFilter?s=s.filter(function(e,t){return""===a.state.selectedDateRange||Gt()(e.createdDate).startOf("day").isBetween(a.state.sdateFilter,a.state.edateFilter,null,"[]")}):""!==this.state.sdateFilter&&""==this.state.edateFilter&&(s=s.filter(function(e,t){return""===a.state.selectedDateRange||Gt()(e.createdDate).startOf("day").isBetween(a.state.sdateFilter,Gt()().format("YYYY-MM-DD"),null,"[]")})),this.setState({searchParam:r,activities:this.formatActivity(s),showFilter:!1})}},{key:"filterActivity",value:function(e){this.setState({isFiltered:!0,showFilter:!1}),this.searchActivity("",!0)}},{key:"clearFilter",value:function(){this.setState({isFiltered:!1,initialValues:{byuser:[],bytype:[],sdate:"",edate:""},showFilter:!1,activities:this.formatActivity(this.state.originalActivities),typeFilter:[],userFilter:[],sdateFilter:"",edateFilter:""})}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.activities){var n=this.state.activities[a],r=[];if(n.length>0)for(var l=0;l<n.length;l++){for(var o=[],i=0;i<n[l].content.length;i++)"document added"==n[l].key.toLowerCase()||"document deleted"==n[l].key.toLowerCase()?i===n[l].content.length-1?o.push(s.a.createElement("div",{className:"file-info"},s.a.createElement("p",{className:"file-title"},n[l].content[i]),s.a.createElement("p",{className:"file-auth"},"by: ",n[l].firstname+" "+n[l].lastname," ",Gt()(n[l].createdDate).format("LT")))):o.push(s.a.createElement("div",{className:"file-info"},s.a.createElement("p",{className:"file-title"},n[l].content[i]))):i===n[l].content.length-1?o.push(s.a.createElement("div",{className:"file-info"},s.a.createElement("p",{className:"file-text"},'"',n[l].content[i],'"'),s.a.createElement("p",{className:"file-auth"},"by: ",n[l].firstname+" "+n[l].lastname," ",Gt()(n[l].createdDate).format("LT")))):o.push(s.a.createElement("div",{className:"file-info"},s.a.createElement("p",{className:"file-text"},'"',n[l].content[i],'"')));r.push(s.a.createElement(Ut.a,{className:"align-items-center activity-single",key:"activity"+a+l},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"date"},a)),s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"activity-single-content"},s.a.createElement("h4",{className:"title"},void 0!==n[l].key?n[l].key:"Transaction Event"),void 0!==n[l].eventName&&s.a.createElement("h4",{className:"desc"},n[l].eventName),o))))}r.length>0&&t.push(s.a.createElement("div",{className:"activity-row",key:"data-"+a},r))}return s.a.createElement("div",{className:"activity"},this.state.showLoader?s.a.createElement("div",{className:"page-loader fixed"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"activity-header mx-0"},s.a.createElement(Yt.a,{xs:"4"}),s.a.createElement(Yt.a,{xs:"4",className:"text-center"},s.a.createElement("h5",null,"Activity")),s.a.createElement(Yt.a,{xs:"4",className:"activity-actions"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{className:"pr-0"},s.a.createElement("div",{className:"icon-wrapper",style:{maxWidth:"200px",float:"right"}},s.a.createElement("input",{type:"text",className:"form-control-head form-control",placeholder:"Search",onChange:function(t){e.searchActivity(t.target.value,!1)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValues,enableReinitialize:!0,validationSchema:Tt.object().shape({}),onSubmit:function(t,a){a.setSubmitting;e.filterActivity(t)}},function(t){t.handleChange,t.errors,t.values,t.handleBlur;var a=t.setFieldValue;t.submitForm,t.touched,t.loginError;return s.a.createElement(Ct.c,null,s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"activity-filter",show:e.state.showFilter},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"px-2"},s.a.createElement("img",{src:ks.a,alt:"filter",style:{width:"24px"},onClick:function(){return e.setState({showFilter:!0})}})),s.a.createElement(M.a.Menu,{className:"activity-filter-menu"},s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement("h2",{className:"font-20 color-blue-4 mb-0"},"Filter")),s.a.createElement(Yt.a,{xs:"6",align:"right"},s.a.createElement(x.a,{variant:"link",className:"p-0 font-14",onClick:function(){e.clearFilter(),e.setState({showFilter:!0})}},"Clear All"))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By User")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By User",isMulti:!0,options:e.state.users,className:"react-select-wrapper react-select-multi",value:e.state.isFiltered?e.state.userFilter:[],name:"byuser",onChange:function(t){a("byuser",t),e.setState({isFiltered:!0,userFilter:t})}}))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"Date Range")),s.a.createElement(Yt.a,{xs:"6"},"Start",s.a.createElement(Cs.a,{selected:e.state.isFiltered?e.state.sdateFilter:"",onChange:function(t){a("sdate",t),e.setState({isFiltered:!0,sdateFilter:t})},dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker"})),s.a.createElement(Yt.a,{xs:"6"},"End",s.a.createElement(Cs.a,{selected:e.state.isFiltered?e.state.edateFilter:"",onChange:function(t){a("edate",t),e.setState({isFiltered:!0,edateFilter:t})},dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker"}))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By type")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By type",isMulti:!0,options:As,className:"react-select-wrapper react-select-multi",onChange:function(t){a("bytype",t),e.setState({isFiltered:!0,typeFilter:t})},value:e.state.isFiltered?e.state.typeFilter:[],name:"bytype"}))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(x.a,{type:"submit",variant:"primary",className:"btn-blue mr-2 w-140"},"Apply"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){return e.setState({showFilter:!1,isFiltered:!1})}},"Cancel")))))))}),s.a.createElement(Yt.a,{className:"col-auto pl-0"},this.state.isFiltered&&s.a.createElement(x.a,{variant:"link",className:"font-12 p-0",onClick:function(){return e.clearFilter()}},"Clear"))))),s.a.createElement("div",{className:"activity-body"},t)))}}]),t}(s.a.Component),xs=Object(B.b)(function(e){return{transactionActivities:e.reducer.transactionActivities,activityUsers:e.reducer.activityUsers}},{getActivityAction:function(e){var t=ct.activitiesOfBuyerAgent+e;return function(e){return mt.getMethod(t,!0).then(function(t){200==t.status?e({type:at,transactionActivities:t.data.data}):e({type:at,transactionActivities:[]})})}},getActivityUsersAction:function(e){var t=ct.activityUser+e;return function(e){return mt.getMethod(t,!0).then(function(t){200==t.status?e({type:nt,activityUsers:t.data.data}):e({type:nt,activityUsers:[]})})}}})(Is),Ms=a(403),Os=a.n(Ms),Rs=a(189),js=a.n(Rs),Us=a(190),Ys=a.n(Us),Ls=a(1420),Ps=a(1421),Bs=a(26),Vs=a(96),Fs=a.n(Vs),_s=a(97),Gs=a.n(_s),zs=a(98),Hs=a(50),qs={control:{backgroundColor:"#fff",fontSize:14,fontWeight:"normal"},highlighter:{overflow:"hidden"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{fontFamily:"monospace",border:"1px solid silver"},highlighter:{padding:9},input:{padding:9,minHeight:63,outline:0,border:0}},suggestions:{list:{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.15)",fontSize:14},item:{padding:"5px 15px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"#1b6ac9",color:"#fff"}}}},Ws=a(191),Ks=a.n(Ws),Qs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState({values:e})},a.state={optionlist:[],fromTransaction:!1,showLoader:!0,statusMessage:"",status:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"addDependencies",value:function(){var e=this;this.setState({showLoader:!0});var t=[],a={predecessor:t=this.state.values?this.state.values.map(function(e){return e.value}):[]},n=this.props.eventId;localStorage.getItem("usertype");var s=localStorage.getItem("usertype");if(this.state.fromTransaction){if(s="TRANSACTION",t.length<this.props.predecessors.length){var r=[];this.props.predecessors.forEach(function(e,a){console.log(e);var n=!1;t.forEach(function(t,a){e._id==t&&(n=!0)}),n||r.push(e._id)});o="";r.forEach(function(e,t){o+=0==t?e:","+e}),this.props.deleteDependencytasksAction(n,s,o)}this.props.putDependencytasksAction(n,s,a).then(function(t){setTimeout(function(){this.props.dependencies(this.state.values)}.bind(e),1e3)})}else if(this.props.putDependencytasksAction(n,s,a).then(function(t){setTimeout(function(){this.props.dependencies(this.state.values)}.bind(e),1e3)}),t.length<this.props.predecessors.length){var l=[];this.props.predecessors.forEach(function(e,a){console.log(e);var n=!1;t.forEach(function(t,a){e._id==t&&(n=!0)}),n||l.push(e._id)});var o="";l.forEach(function(e,t){o+=0==t?e:","+e}),this.props.deleteDependencytasksAction(n,s,o)}setTimeout(function(){this.setState({status:!1})}.bind(this),3e3)}},{key:"componentDidMount",value:function(){if(this.setState({showLoader:!0}),"UPDATE"===this.props.actiontaken&&this.props.predecessors.length>0){var e=this.props.predecessors.map(function(e){if(null!==e)return{label:e.hasOwnProperty("eventEndDate")?"".concat(Gt()(e.eventEndDate).format("MM-DD-YYYY H:mm a")," -  ").concat(e.title):"Day ".concat(e.day," - ").concat(e.title),value:e._id,day:e.day}});this.setState({values:e,showLoader:!1})}var t=this.props.options.map(function(e){if(null!==e)return{label:e.hasOwnProperty("eventEndDate")?"".concat(Gt()(e.eventEndDate).format("MM-DD-YYYY H:mm a")," -  ").concat(e.title):"Day ".concat(e.day," - ").concat(e.title),value:e._id,day:e.day}});this.setState({optionlist:t,fromTransaction:!!this.props.fromTransaction&&this.props.fromTransaction,btnName:this.props.actiontaken,showLoader:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({showLoader:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement(Ct.c,null,!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),null!=this.state.statusMessage&&this.state.status?s.a.createElement(Dt.a,{variant:"success"},this.state.statusMessage):"",s.a.createElement("div",{className:"dependency-select"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"",isMulti:!0,options:this.state.optionlist,className:"react-select-wrapper react-select-multi",onChange:this.handleChange,value:this.state.values})),s.a.createElement("div",{className:"mt-2 text-right"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue",onClick:function(){return e.addDependencies()},style:{width:"85px"}},this.state.btnName)))}}]),t}(s.a.Component),Zs=Object(B.b)(function(e){return{statusMessage:e.reducer.statusMessage,status:e.reducer.status}},{putDependencytasksAction:function(e,t,a){var n="";return function(s){return"ADMIN"==t&&(n="".concat(ct.setDependency,"eventId=").concat(e,"&isTransaction=false")),"BUYERAGENT"==t&&(n="".concat(ct.setDependency,"eventId=").concat(e)),"TRANSACTION"==t&&(n="".concat(ct.setDependency,"eventId=").concat(e,"&isTransaction=true")),mt.putMethod(n,a,!0).then(function(e){return 200===e.status?s({type:Fe,dependencyTasks:e,status:!0,statusMessage:"Dependencies Added Successfully"}):s({type:Fe,dependencyTasks:{},status:!1,statusMessage:"Something went Wrong"}),e})}},deleteDependencytasksAction:function(e,t,a){var n="";return function(s){return"ADMIN"==t&&(n="".concat(ct.setDependency,"id=").concat(e,"&isTransaction=false&removeId=").concat(a)),"BUYERAGENT"==t&&(n="".concat(ct.setDependency,"id=").concat(e,"&removeId=").concat(a)),"TRANSACTION"==t&&(n="".concat(ct.setDependency,"id=").concat(e,"&isTransaction=true&removeId=").concat(a)),mt.deleteMethod(n,!0).then(function(e){return 200===e.status?s({type:Fe,dependencyTasks:e,status:!0,statusMessage:"Dependencies Added Successfully"}):s({type:Fe,dependencyTasks:{},status:!1,statusMessage:"Something went Wrong"}),e})}}})(Qs),Xs=a(53),Js=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submitMyForm=null,a.myRef=s.a.createRef(),a.editTask=function(e){0==e?a.setState({editTask:"open"}):a.props.onUpdate("")},a.addComment=function(){var e={content:a.state.comment};a.setState({comment:""}),a.props.addCommentAction(e,a.props.taskId).then(function(e){a.getNewComments()})},a.bindSubmitForm=function(e){a.submitMyForm=e},a.setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.state={show:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),taskType:"Communication",showText:!0,taskData:{},editEmailTo:!1,editcommunicationDesctription:!1,editcommunicationSubject:!1,emailRefVar:[],variablesRefs:[],textRefVar:[],AllRefVarForMapping:[],AllRefVar:[],emailTextValForEditor:Bs.EditorState.createEmpty(),actualEmailTextValForEditor:Bs.EditorState.createEmpty(),detailsValForEditor:Bs.EditorState.createEmpty(),actualValues:{},showLoader:!1,contingencies:[],comments:[],comment:"",DependencyModal:!1,docName:"",showPreview:!1,previewURL:"",dependencyIsActive:!1,deletePrompt:!1,userRole:localStorage.getItem("usertype").toUpperCase(),values:{},deleteDocName:"",deleteCommentPrompt:!1,moveConfirmationModal:!1,affectedTasks:[],moveTaskPostData:{},moveErrorMessage:"",moveErrorModal:!1,assigneeOptions:[{label:"select",value:""}],editAssignee:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"closeModal",value:function(e){this.setState({DependencyModal:!this.state.DependencyModal}),this.getAllTasks()}},{key:"DependencyModal",value:function(e,t){var a=this;if(e){var n=e.day,s=e._id,r=e.transactionId;this.props.GetDependencytasksAction(r,n,s,"TRANSACTION").then(function(e){200==e.status&&a.setState({DependencyModal:!a.state.DependencyModal,dependencyTasks:a.props.dependencyTasks,actiontaken:t})})}else this.setState({DependencyModal:!this.state.DependencyModal})}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"deleteComment",value:function(e){var t=this,a={commentId:e};this.props.deleteCommentAction(this.props.taskId,a).then(function(e){t.getNewComments(),t.setState({deleteCommentPrompt:!1})})}},{key:"getNewComments",value:function(){this.getAllTasks()}},{key:"handleChange",value:function(e){this.setState({comment:e.target.value})}},{key:"showTaskType",value:function(e){e+"".toUpperCase()=="COMMUNICATION"?this.setState({taskType:!0}):this.setState({taskType:!1})}},{key:"clearCommunication",value:function(e){var t=this,a=this.state.taskData;a.communicationTo=[""],a.communicationSubject=[""],a.description=[""],this.setState({actualValues:{}}),this.setState({taskData:a},function(){t.getEditorContent(t.state.taskData)},function(){e({})}),e({})}},{key:"showText",value:function(e){"EMAIL"==(e+"").toUpperCase()?this.setState({showText:!0}):this.setState({showText:!1})}},{key:"componentWillMount",value:function(){this.setState({showLoader:!0});var e=this.props.transactionData.contingencies;this.setState({contingencies:e}),this.getAllTasks()}},{key:"updateAssigneeOptions",value:function(e,t){var a=[];this.state.variablesRefs.forEach(function(t){"all"!==t.contingency&&t.contingency!==e||"user"!==t.account||a.push({label:t.name,value:t.name})}),this.setState({assigneeOptions:a},function(){t("assignee","")})}},{key:"getAllTasks",value:function(){var e=this;this.getVariables(),this.props.getTaskDetailsAction(this.props.taskId).then(function(t){if(t){var a=[];e.state.variablesRefs.forEach(function(e){"all"!==e.contingency&&e.contingency!==t.contingency||"user"!==e.account||a.push({label:e.name,value:e.name})}),e.setState({assigneeOptions:a});var n=t.comments||[];e.setState({comments:n});var s="";t.communicationTo.forEach(function(e,t,a){0==e.indexOf("@")?s+="{("+e+")}"+(t<a.length-1?",":""):s+=e+(t<a.length-1?",":"")}),t.communicationTo[0]=s,t.eventEndDate=new Date(t.eventEndDate),e.props.getActualValuesAction(e.props.taskId).then(function(t){var a="";t.communicationTo.forEach(function(e,t,n){""!=e&&(a+=e+(t<n.length-1?", ":""))}),t.communicationTo[0]=a,e.setState({actualValues:t,showLoader:!1})}),e.setState({taskData:t,showLoader:!1},function(){e.getEditorContent(e.state.taskData)}),t.predecessorData.length>0&&e.setState({dependencyIsActive:!0}),e.showTaskType((t.type+"").toUpperCase()),e.showText((t.communicationType+"").toUpperCase())}else e.setState({showLoader:!1})})}},{key:"closeErrorModal",value:function(){this.setState({moveErrorModal:!1}),this.getAllTasks(),this.props.onUpdate("update")}},{key:"getVariables",value:function(){var e=this;this.setState({showLoader:!0}),this.props.adminGetVarriableRefAction().then(function(t){console.log(t),e.setState({showLoader:!1});for(var a=[],n=[],s=[],r=[],l=[],o=e.props.variablesRefs||[],i=0,c=o.length;i<c;i++)s.push({id:o[i].name,display:o[i].name}),r.push(o[i].name),l.push({text:o[i].name,value:o[i].name.replace("@",""),url:""}),"EMAIL"===o[i].communicationtype&&a.push({id:o[i].name,display:o[i].name}),"TEXT"===o[i].communicationtype&&n.push({id:o[i].name,display:o[i].name});e.setState({variablesRefs:o,emailRefVar:a,textRefVar:n,AllRefVar:s,AllRefVarForEditor:l,AllRefVarForMapping:r})})}},{key:"getEditorContent",value:function(e){var t=Bs.EditorState.createEmpty(),a=Bs.EditorState.createEmpty(),n=Gs()(e.description&&e.description.length>0&&e.description[0]);if(n){var s=Bs.ContentState.createFromBlockArray(n.contentBlocks);t=Bs.EditorState.createWithContent(s)}if("INTERACTIVE"===e.type.toUpperCase()){var r=Gs()(e.description&&e.description.length>0&&e.description[0]);if(r){var l=Bs.ContentState.createFromBlockArray(r.contentBlocks);a=Bs.EditorState.createWithContent(l)}}this.setState({emailTextValForEditor:t,detailsValForEditor:a})}},{key:"updateTask",value:function(e,t,a,n,s){this.myRef.current.setSubmitting(),this.submitMyForm();var r=e;r.valueChanged=a,"communicationTo"==a||"communicationSubject"==a?(t(a,n,!0),r[a]=n,"save"==s&&Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r)):"description"==a?"save"==s&&Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r):"status"==a?(r[a]=n,1==this.myRef.current.state.values.document?this.myRef.current.state.values.documents.length>0&&(t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r)):(t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r))):(r[a]=n,t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r))}},{key:"toggleAssignee",value:function(e,t,a,n){this.updateTask(e,t,"assignee",a,n),""==a&&0!=this.state.editAssignee||this.setState({editAssignee:!this.state.editAssignee})}},{key:"toggleCommunicationTo",value:function(e,t,a,n){this.updateTask(e,t,"communicationTo",a,n),""==a[0]&&0!=this.state.editEmailTo||this.setState({editEmailTo:!this.state.editEmailTo})}},{key:"toggleCommunicationSubject",value:function(e,t,a,n){this.updateTask(e,t,"communicationSubject",a,n),""==a[0]&&0!=this.state.editcommunicationSubject||this.setState({editcommunicationSubject:!this.state.editcommunicationSubject})}},{key:"confirmMove",value:function(){var e=this;this.setState({moveConfirmationModal:!1,showLoader:!0}),this.props.updateDepedentTaskAction(this.state.taskData._id,this.state.moveTaskPostData).then(function(t){e.setState({showLoader:!1}),e.getAllTasks(),e.props.onUpdate("update")})}},{key:"toggleDescription",value:function(e,t,a,n){console.log(n,this.state.taskData.description),"cancel"==n?(t("description",this.state.taskData.description),this.getEditorContent(this.state.taskData)):this.updateTask(e,t,"description",a,n),"<p></p>\n"==a[0]&&0!=this.state.editcommunicationDesctription||this.setState({editcommunicationDesctription:!this.state.editcommunicationDesctription})}},{key:"handleSubmit",value:function(e){var t=this,a=e;a.eventType=a.type;var n=[];a.communicationTo&&(a.communicationTo[0]+"").split(",").forEach(function(e){var t=e.replace(/\{\(/g,"").replace(/\)\}/g,"")||"";n.push(t.trim())});var s=[];a.communicationSubject&&s.push((a.communicationSubject[0]+"").replace(/\{\(/g,"").replace(/\)\}/g,"")||""),a.communicationTo=n,a.communicationSubject=s,a.time=60*Gt()(a.eventEndDate).hour()+Gt()(a.eventEndDate).minute(),delete a.eventLogs,delete a.commentsLogs,this.props.updateTaskAction(a,this.state.taskData._id).then(function(e){if(void 0!=e&&e.length>0){var n=e||[];t.setState({moveConfirmationModal:!0,affectedTasks:n,moveTaskPostData:a})}else void 0!=e&&e.hasOwnProperty("message")?t.setState({moveErrorModal:!0,moveErrorMessage:e.message}):(t.setState({showLoader:!0}),t.props.updateDepedentTaskAction(t.state.taskData._id,a).then(function(e){t.setState({showLoader:!1}),t.getAllTasks(),t.props.onUpdate("update")}))})}},{key:"handleDateChange",value:function(e,t,a,n){var s=Gt()().format("YYYY-MM-DD");if(e){s=Gt()(e).format("YYYY-MM-DD");var r=Gt()(e).format("HH:mm")}else s=Gt()().format("YYYY-MM-DD"),r=Gt()().format("HH:mm");"time"==t&&(s=Gt()(n.eventEndDate).format("YYYY-MM-DD"));var l=Gt()(s+" "+r);this.updateTask(n,a,"eventEndDate",new Date(l.format("YYYY-MM-DD HH:mm")))}},{key:"uploadAttchments",value:function(e,t,a,n){var s=this;this.setState({showLoader:!0});var r=new FormData,l=[];if(this.setState({showLoader:!0}),e.length>0){for(var o=0;o<e.length;o++)l.push(e[o].name),r.append("file",e[o]);this.props.uploadDocumentAction(r,a).then(function(e){l.forEach(function(e){var n={transactionId:a,location:"Closing Documents",transactionEventId:t,document:e};s.setState({showLoader:!0}),s.props.addDocAction(n).then(function(e){s.setState({showLoader:!1}),s.getAllTasks(),s.props.onUpdate("update")},function(e){s.setState({showLoader:!1})})})},function(e){s.setState({showLoader:!1})})}else this.setState({showLoader:!1}),alert("No files Selected")}},{key:"showPreviewModal",value:function(e){var t=this;if(e){var a="/#";fetch(ct.AdminCreateTransactionUrl+"/"+e+"?id="+this.props.transactionData._id,{method:"GET"}).then(function(e){return e.json()}).then(function(n){a=n.url,t.setState({showPreview:!0,docName:e,previewURL:a})})}}},{key:"getType",value:function(e){var t="",a=((e.match(/(\.\w+$)/gim)||[])[0]+"").toLowerCase();return".jpg"==a||".jpeg"==a||".png"==a||".gif"==a?t="image":e.match(/.(pdf)$/i)&&(t="pdf"),t}},{key:"deleteDocument",value:function(e,t){var a=this,n={folderId:e};this.setState({showLoader:!0}),this.props.deleteDocFromTaskAction(n,t._id).then(function(e){a.setState({showLoader:!1}),a.deletePrompt(),a.getAllTasks(),a.props.onUpdate("update")})}},{key:"deletePrompt",value:function(e,t){IDBDatabase&&t?this.setState({deletePrompt:!this.state.deletePrompt,values:t,deleteDocName:e}):this.setState({deletePrompt:!this.state.deletePrompt})}},{key:"render",value:function(){var e=this,t=(this.state.taskData,Bs.EditorState.createEmpty(),this.props.transactionData.endDate||""),a=Tt.object().shape({title:Tt.string().required("Please enter Task Title"),type:Tt.string().required("Please select Task Type"),communicationTo:Tt.array().nullable().test("email",this.state.showText?"Please enter Email Recipient":"Please enter Text Recipient",function(e){return""!=e[0]}).test("mail","please enter valid Email.",function(e){if(e){var t=!1;return(e[0]+"").split(",").forEach(function(e){var a=e.replace(/\{\(/g,"").replace(/\)\}/g,"")||"";t=0==a.trim().indexOf("@")||(a.trim().match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)||[]).length>0}),t}}),communicationSubject:Tt.array().nullable().test("subject","Please enter Subject",function(e){return""!=e[0]}),description:Tt.array().nullable().test("description","Please enter Description",function(e){return"<p></p>\n"!=e[0]&&""!=e[0]})});this.state.showText||(a=Tt.object().shape({title:Tt.string().required("Please enter Task Title"),type:Tt.string().required("Please select Task Type"),communicationTo:Tt.array().nullable().test("phone","Please enter Text Recipient",function(e){return""!=e[0]}).test("phone","Please enter valid Phone Number, e.g 999-999-9999.",function(e){if(e){var t=!1;return(e[0]+"").split(",").forEach(function(e){var a=e.replace(/\{\(/g,"").replace(/\)\}/g,"")||"";t=0==a.trim().indexOf("@")||(a.trim().match(/(?:1?|\+1|\+\s1|\(?)(?:\(?|\s\(|[\.\-\s])\d{3}(?:\)?|\)\s|[\.\-\s])\d{3}[\.\-\s]\d{4}/g)||[]).length>0}),t}}),description:Tt.array().nullable().test("description","Please enter Description",function(e){return"<p></p>\n"!=e[0]&&""!=e[0]})}));var n={fontColor:{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0}]},fontBackgroundColor:{colors:[{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"}]},toolbar:["bold","strike","italic","link","bulletedList","numberedList","blockQuote","fontColor","fontBackgroundColor"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]}};return s.a.createElement("div",null,this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(Ct.d,{ref:this.myRef,validateOnBlur:!0,initialValues:this.state.taskData,enableReinitialize:!0,validationSchema:a,onEvent:function(){},onSubmit:function(e,t){t.errors,t.setSubmitting}},function(a){a.handleChange;var r=a.errors,l=a.values,o=a.handleBlur,i=a.setFieldValue,c=a.submitForm,m=a.touched,d=(a.loginError,a.setErrors);return console.log("errors",r),e.bindSubmitForm(c),s.a.createElement(Ct.c,null,s.a.createElement(Ut.a,{className:"mx-0 task-title-row"},s.a.createElement(Yt.a,{className:"d-flex align-items-center"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Task Name")),s.a.createElement(Yt.a,{className:"col-auto task-schedule"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Status")),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement("div",{className:"c-select",disabled:"COMMUNICATION"==l.type},s.a.createElement("select",{name:"status",value:l.status,disabled:"COMMUNICATION"==l.type||"BUYER"==e.state.userRole,className:"form-control form-control-sm",onChange:function(t){"INPROGRESS"==e.props.transactionData.status?e.updateTask(l,i,"status",t.target.value):alert("Status can only be updated if the transaction is started.")}},s.a.createElement("option",{value:"SCHEDULED"},"Scheduled"),s.a.createElement("option",{value:"COMPLETED"},"Completed")))),s.a.createElement(Yt.a,{className:"col-auto px-0 dependency-combo"},s.a.createElement(Ut.a,{className:"align-items-center mx-0"},"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(s.a.Fragment,null,s.a.createElement(Yt.a,{className:"col-auto px-0"},e.state.dependencyIsActive?s.a.createElement(x.a,{variant:"transparent",className:"pl-1 pr-0 dep-btn",title:"Check Dependency",onClick:function(){return e.DependencyModal(l,"UPDATE")}},s.a.createElement("img",{src:Ks.a,style:{height:"24px",width:"24px"},alt:"dependency"})):""),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"task-action dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,!e.state.dependencyIsActive&&s.a.createElement(M.a.Item,{onClick:function(){return e.DependencyModal(l,"ADD")}},"Set Dependency ",s.a.createElement(Ls.a,{style:{height:"20px"}})),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(M.a.Item,{onClick:function(){e.props.deleteTask(e.props.taskId)}},"Delete task"))))))),s.a.createElement(Yt.a,{className:"col-auto px-0 hide-991"},s.a.createElement("div",{className:"text-right"},s.a.createElement(x.a,{onClick:function(){e.editTask(1),void 0!==e.props.fromTimeline&&e.props.fromTimeline&&e.props.closeDetailsModal()},variant:"transparent",className:"pl-0"},s.a.createElement(j.a,null)))))),s.a.createElement(Yt.a,{xs:"12",className:"task-head-name"},s.a.createElement(Ct.b,{name:"title",className:"task-add-input form-control",placeholder:"Write task here",value:l.title,disabled:"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole,onBlur:function(t){e.updateTask(l,i,"title",t.target.value)}}),s.a.createElement(Ct.a,{name:"title",component:"div",className:"invalid-feedback",style:{display:"block"}}))),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(Ut.a,{className:"mx-0 mt-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Contingency"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"contingency",id:"",className:"form-control form-control-xs",value:l.contingency,onChange:function(t){e.updateTask(l,i,"contingency",t.target.value)}},s.a.createElement("option",{value:""},"Select"),e.state.contingencies.map(function(e){return s.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-3"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Type"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"",id:"",value:l.type,className:"form-control form-control-xs",onChange:function(t){e.updateTask(l,i,"type",t.target.value),e.showTaskType(t.target.value)}},s.a.createElement("option",{value:"COMMUNICATION"},"Communication"),s.a.createElement("option",{value:"INTERACTIVE"},"Interactive"))),s.a.createElement(Ct.a,{name:"type",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"ml-3 mt-0"}),s.a.createElement(Ut.a,{className:"mx-0 mt-3 task-date-row"},s.a.createElement(Yt.a,{className:"pr-0 col-auto mb-3"},s.a.createElement("div",{className:"icon-wrapper blue-wrapper task-date"},s.a.createElement("div",{className:"react-bootstrap-daterangepicker-container"},s.a.createElement("div",{className:"date-label"},s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(Tn.a,null)),s.a.createElement("span",{className:"form-control-label"},"Due Date:")),void 0!=l.contingency&&""!=l.contingency?s.a.createElement(Cs.a,{selected:l.eventEndDate,onChange:function(t){return e.handleDateChange(t,"date",i,l)},minDate:new Date(e.props.transactionData.startDate||""),maxDate:new Date(e.state.contingencies.filter(function(e){return e.name==l.contingency})[0].endDate),dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker",disabled:"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole}):s.a.createElement(Cs.a,{selected:l.eventEndDate,onChange:function(t){return e.handleDateChange(t,"date",i,l)},minDate:new Date(e.props.transactionData.startDate||""),maxDate:new Date(t),dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker",disabled:"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole}),s.a.createElement(Cs.a,{selected:l.eventEndDate,onChange:function(t){return e.handleDateChange(t,"time",i,l)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",className:"form-control form-control-sm pl-1",disabled:"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole}))))),e.state.taskType?s.a.createElement("div",{style:{backgroundColor:"#f8f8f8"}},s.a.createElement(Ut.a,{className:"mx-0 bg-blue-5 py-2 mb-2"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-1"},"Communication Type"),s.a.createElement("div",{className:"form-group mb-0"},"EMAIL"==(l.communicationType+"").toUpperCase()?s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check1",disabled:!0,value:"EMAIL",onChange:function(t){e.showText(t.target.value),e.clearCommunication(d),e.updateTask(l,i,"communicationType","EMAIL",d),d({})},checked:"EMAIL"===l.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check1"},"Email")):s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check2",disabled:!0,value:"TEXT",onChange:function(t){e.showText(t.target.value),e.clearCommunication(d),e.updateTask(l,i,"communicationType","TEXT",d),d({})},checked:"TEXT"===l.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check2"},"Text"))),s.a.createElement(Ct.a,{name:"communicationType",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular mail-row-field-opts"},1==e.state.editEmailTo?s.a.createElement(Hs.b,{singleLine:!0,name:"communicationTo[0]",type:"text",value:l.communicationTo?l.communicationTo[0]:"",className:"mail-row-mension "+(r.communicationTo&&r.communicationTo[0]&&m.communicationTo&&m.communicationTo[0]?" is-invalid":""),onChange:function(e){i("communicationTo",[e.target.value])},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.showText?e.state.emailRefVar:e.state.textRefVar,markup:"{(__id__)}"})):s.a.createElement(Ct.b,{type:"text",className:"form-control font-14 color-yellow-1 mb-0 email-input",value:e.state.actualValues.communicationTo?e.state.actualValues.communicationTo[0]:""}),s.a.createElement(x.a,{variant:"transparent",className:"edit-opt"},1==e.state.editEmailTo?s.a.createElement(Sn.a,{className:"",onClick:function(){e.toggleCommunicationTo(l,i,l.communicationTo,"save")}}):s.a.createElement(la.a,{className:"",onClick:function(){e.toggleCommunicationTo(l,i,l.communicationTo,r.communicationTo,"")}})),""==(e.state.actualValues.communicationTo?e.state.actualValues.communicationTo[0]+"":"").trim()&&0==e.state.editEmailTo&&s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},"No values entered for this token"),s.a.createElement(Ct.a,{name:"communicationTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),e.state.showText?s.a.createElement("div",null,s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Subject")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-opts"},1==e.state.editcommunicationSubject?s.a.createElement(Hs.b,{singleLine:!0,name:"communicationSubject[0]",type:"text",value:l.communicationSubject?l.communicationSubject[0]:"",className:"mail-row-mension "+(r.communicationSubject&&r.communicationSubject[0]&&m.communicationSubject&&m.communicationSubject[0]?" is-invalid":""),onChange:function(e){i("communicationSubject",[e.target.value])},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.AllRefVar,markup:"{(__id__)}"})):s.a.createElement(Ct.b,{type:"text",disabled:!0,className:"form-control font-14 color-yellow-1 mb-0 email-input",value:e.state.actualValues.communicationSubject?e.state.actualValues.communicationSubject[0]:""}),s.a.createElement(x.a,{variant:"transparent",className:"edit-opt"},1==e.state.editcommunicationSubject?s.a.createElement(Sn.a,{className:"",onClick:function(){e.toggleCommunicationSubject(l,i,l.communicationSubject,"save")}}):s.a.createElement(la.a,{className:"",onClick:function(){e.toggleCommunicationSubject(l,i,l.communicationSubject,"")}})),""==(e.state.actualValues.communicationSubject?e.state.actualValues.communicationSubject[0]+"":"").trim()&&0==e.state.editcommunicationSubject&&s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}}," No values entered for this token"),s.a.createElement(Ct.a,{name:"communicationSubject",component:"div",className:"invalid-feedback",style:{display:"block"}})))):"",s.a.createElement("hr",{className:"mt-2"}),s.a.createElement(Ut.a,{className:"mx-0 align-items-center pb-3"},e.state.showText?s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"editor-main"},1==e.state.editcommunicationDesctription?s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"description[0]",editorState:e.state.emailTextValForEditor,onEditorStateChange:function(t){var a=Fs()(Object(Bs.convertToRaw)(t.getCurrentContent())),n=Et()("<output>").append(Et.a.parseHTML(a));Et.a.map(n.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var s=n.html();i("description",[s]),e.setState({emailTextValForEditor:t})},hashtag:{}}):s.a.createElement(Ys.a,{onInit:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},editor:js.a,name:"emailText",data:e.state.actualValues.description&&e.state.actualValues.description[0]+"",config:n,toolbar:[],onFocus:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"save":"")}})),s.a.createElement(Ct.a,{name:"description",component:"div",className:"invalid-feedback",style:{display:"block"}})):s.a.createElement(Yt.a,{xs:"12"},1==e.state.editcommunicationDesctription?s.a.createElement(Ct.b,{component:"textarea",name:"description[0]",className:"form-control font-14",rows:"4",value:l.description?l.description[0]:"",onChange:function(e){i("description",[e.target.value])}}):s.a.createElement(Ct.b,{component:"textarea",name:"description[0]",className:"form-control font-14",rows:"4",value:e.state.actualValues.description&&e.state.actualValues.description[0]+"",onFocus:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"save":"")}}),s.a.createElement(Ct.a,{name:"description[0]",component:"div",className:"invalid-feedback",style:{display:"block"}})),1==e.state.editcommunicationDesctription?s.a.createElement(Yt.a,{xs:"12",className:"mt-2"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue",onClick:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"save":"")}},"Save"),s.a.createElement(x.a,{variant:"primary",className:"ml-10 btn-blue btn-outlined ml-2",onClick:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"cancel":"")}},"Cancel")):"")):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mb-2 bg-blue-5 py-2"},s.a.createElement(Yt.a,null,"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?s.a.createElement("label",{className:"font-14 color-grey-1 mb-0"},"Document upload ",!l.document&&"not"," required"):s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},s.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"document",name:"document",checked:l.document,disabled:"BUYER"==e.state.userRole,onChange:function(t){e.updateTask(l,i,"document",t.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"document"},"Document upload required")))),e.state.actualValues.assigneeData?s.a.createElement(s.a.Fragment,null,"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?s.a.createElement("div",{className:"assign-var-group"},s.a.createElement(Ut.a,{className:"user-list mx-0"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("span",{className:"user-img yellow"},(e.state.actualValues.assigneeData.firstname+"").substring(0,1),(e.state.actualValues.assigneeData.lastname+"").substring(0,1))),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"user-name"},e.state.actualValues.assigneeData.firstname+" "+e.state.actualValues.assigneeData.lastname),s.a.createElement("p",{className:"user-post"},e.state.actualValues.assigneeData.role)))):s.a.createElement("div",{className:"assign-var-group"},s.a.createElement(Ut.a,{className:"user-list mx-0"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("span",{className:"user-img yellow"},(e.state.actualValues.assigneeData.firstname+"").substring(0,1),(e.state.actualValues.assigneeData.lastname+"").substring(0,1))),s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"user-name"},e.state.actualValues.assigneeData.firstname+" "+e.state.actualValues.assigneeData.lastname),s.a.createElement("p",{className:"user-post"},e.state.actualValues.assigneeData.role))),s.a.createElement(Ut.a,{className:"mx-0 mail-row assign-var-row assign-var-row-custom"},s.a.createElement(Yt.a,{className:"assign-var-select"},s.a.createElement(ws.a,{onBlur:o,fullWidth:!0,onChange:function(t){e.updateTask(l,i,"assignee",t.value)},value:{label:l.assignee,value:l.assignee},className:"react-select-wrapper react-select-multi",name:"assignee",options:e.state.assigneeOptions}),s.a.createElement(Ct.a,{name:"assignee",component:"div",className:"invalid-feedback",style:{display:"block"}}))))):s.a.createElement(Ut.a,{className:"mx-0 mail-row assign-var-row assign-var-row-first"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Assign to")),s.a.createElement(Yt.a,{className:"assign-var-select"},s.a.createElement(ws.a,{onBlur:o,fullWidth:!0,onChange:function(t){e.updateTask(l,i,"assignee",t.value)},value:{label:l.assignee,value:l.assignee},className:"react-select-wrapper react-select-multi",name:"assignee",options:e.state.assigneeOptions}),s.a.createElement(Ct.a,{name:"assignee",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0 mb-3"},s.a.createElement(Yt.a,null,s.a.createElement("h5",{className:"font-14 color-blue-4"},"Detail"),1==e.state.editcommunicationDesctription?s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"description[0]",editorState:e.state.detailsValForEditor,onEditorStateChange:function(t){var a=Fs()(Object(Bs.convertToRaw)(t.getCurrentContent())),n=Et()("<output>").append(Et.a.parseHTML(a));Et.a.map(n.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var s=n.html();i("description",[s]),e.setState({detailsValForEditor:t})},hashtag:{}})):s.a.createElement(Ys.a,{onInit:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},disabled:"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole,editor:js.a,name:"description[0]",data:e.state.actualValues.description&&e.state.actualValues.description[0]+"",config:n,toolbar:!1,onFocus:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"save":"")}}),s.a.createElement(Ct.a,{name:"description",component:"div",className:"invalid-feedback",style:{display:"block"}})),1==e.state.editcommunicationDesctription?s.a.createElement(Yt.a,{xs:"12",className:"mt-2"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue",onClick:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"save":"")}},"Save"),s.a.createElement(x.a,{variant:"primary",className:"ml-10 btn-blue btn-outlined ml-2",onClick:function(){e.toggleDescription(l,i,l.description,1==e.state.editcommunicationDesctription?"cancel":"")}},"Cancel")):"")),s.a.createElement("div",{style:{backgroundColor:"#f8f8f8",padding:"15px"}},s.a.createElement(bn.a,{maxSize:1e8,accept:["image/*","application/pdf","application/msword"],onDrop:function(t){e.uploadAttchments(t,l._id,l.transactionId,l)}},function(e){var t=e.getRootProps,a=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",Object.assign({className:"dropzone-transaction drop-task"},t()),s.a.createElement("input",a()),s.a.createElement(Ps.a,null),s.a.createElement("p",null,s.a.createElement("strong",null,"Attach or Drop document here"))))})),s.a.createElement("div",{className:"comments-thread mt-0"},Xs.sortBy(l.documents||[],"modifiedDate").reverse().map(function(t){return s.a.createElement(Ut.a,{className:"user-list mx-0"},s.a.createElement(Yt.a,{className:"pl-4"},s.a.createElement("div",{className:"comments-text"},"image"==e.getType(t.name||"")||"pdf"==e.getType(t.name||"")?s.a.createElement("div",{onClick:function(){e.showPreviewModal(t.name)}},s.a.createElement("h4",{className:"user-name"},t.name),s.a.createElement("p",{className:"user-post"},s.a.createElement("em",null,"by: ",t.firstname," ",t.lastname,"  ",Gt()(t.modifiedDate).format("MM/DD/YYYY - hh:mm a")))):s.a.createElement("a",{style:{right:"40px"},href:ct.AdminCreateTransactionUrl+"/upload?id="+l.transactionId+"&img="+t.name},s.a.createElement("h4",{className:"user-name"},t.name),s.a.createElement("p",{className:"user-post"},s.a.createElement("em",null,"by: ",t.firstname," ",t.lastname,"  ",Gt()(t.modifiedDate).format("MM/DD/YYYY - hh:mm a")))),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"comments-delete",onClick:function(){return e.deletePrompt(t.folderId,l)}},s.a.createElement(yn.a,null)))))})),0==e.state.taskType&&s.a.createElement(s.a.Fragment,null,s.a.createElement("hr",{className:"mb-3"}),s.a.createElement(Ut.a,{className:"user-list mx-0"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("span",{className:"user-img grey"},localStorage.getItem("fname").substring(0,1)+localStorage.getItem("lname").substring(0,1))),s.a.createElement(Yt.a,null,s.a.createElement("div",null,s.a.createElement("textarea",{name:"",rows:"4",className:"form-control",value:e.state.comment,onChange:e.handleChange.bind(e)}),s.a.createElement("div",{className:"text-right mt-3"},s.a.createElement(x.a,{variant:"primary",disabled:""==(e.state.comment+"").trim(),className:"btn-blue btn-outlined font-14",onClick:function(){return e.addComment()}},"Comment"))),s.a.createElement("div",{className:"comments-thread"},Xs.sortBy(e.state.comments,"modifiedDate").reverse().map(function(t){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ut.a,{className:"user-list mx-0"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("span",{className:"user-img yellow"},(t.firstname?t.firstname:"").substring(0,1)+(t.lastname?t.lastname:"").substring(0,1))),s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"comments-text"},s.a.createElement("h4",{className:"user-name"},t.content),s.a.createElement("p",{className:"user-post"},s.a.createElement("em",null,Gt()(t.modifiedDate).format("MM/DD/YYYY - hh:mm a"))),"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"comments-delete"},s.a.createElement(yn.a,{onClick:function(){return e.setState({deleteCommentPrompt:!0,commentId:t._id})}}))))))}))))))}),s.a.createElement(Wa.a,{show:this.state.DependencyModal,onHide:function(){return e.DependencyModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 dependency-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Set Dependency")),s.a.createElement(Wa.a.Body,null,s.a.createElement(Zs,{fromTransaction:!0,options:this.state.dependencyTasks,actiontaken:this.state.actiontaken,predecessors:this.state.taskData.predecessorData,dependencies:function(t){e.closeModal(t),void 0!==e.props.fromTimeline&&e.props.fromTimeline&&e.props.reloadPage()},eventId:this.state.taskData._id}))),s.a.createElement(Wa.a,{show:this.state.showPreview,onHide:function(){e.setState({showPreview:!1})},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-preview"},s.a.createElement(Wa.a.Header,{className:"d-block"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{xs:"9"},s.a.createElement("div",{className:"modal-title"},"Document Preview")),s.a.createElement(Yt.a,{xs:"3",className:"text-right"},s.a.createElement(x.a,{className:"close-btn",variant:"transparent",onClick:function(){e.setState({showPreview:!1})}},s.a.createElement(j.a,null))))),s.a.createElement(Wa.a.Body,null,"image"==this.getType(this.state.docName||"")?s.a.createElement("img",{src:ct.AdminCreateTransactionUrl+"/upload?id="+this.props.transactionData._id+"&img="+this.state.docName}):s.a.createElement("object",{data:this.state.previewURL||"#",width:"100%",height:"100%"}))),s.a.createElement(Wa.a,{show:this.state.deletePrompt,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,"Are you sure you want to delete?")),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.deletePrompt()}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.deleteDocument(e.state.deleteDocName,e.state.values)}},"Yes"))),s.a.createElement(Wa.a,{show:this.state.deleteCommentPrompt,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,"Are you sure you want to delete?")),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({deleteCommentPrompt:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.deleteComment(e.state.commentId)}},"Yes"))),s.a.createElement(Wa.a,{show:this.state.moveConfirmationModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 "},s.a.createElement("p",{className:"text-center font-16 color-dark-blue"},"Are you sure want to change date of this task?"),s.a.createElement("div",{className:"px-1"},s.a.createElement("p",{className:"mb-0 font-500 font-14"},"here is the list of task that will be affected :"),s.a.createElement("ul",{className:"dependency-modal-task-list font-12"},this.state.affectedTasks.map(function(e,t){if(e)return s.a.createElement("li",{key:e.title}," Day - ",e.day," ",e.title)})))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({moveConfirmationModal:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.confirmMove()}},"Yes"))),s.a.createElement(Wa.a,{show:this.state.moveErrorModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0"},this.state.moveErrorMessage instanceof Array?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"text-center font-16 color-dark-blue"},"Unable to update status of this task as the task(s) on which this task is dependent, are not marked as completed yet."),s.a.createElement("div",{className:"px-1"},s.a.createElement("p",{className:"mb-0 font-500 font-14"},"Here is the list of task which are not completed."),s.a.createElement("ul",{className:"dependency-modal-task-list font-12"},this.state.moveErrorMessage.map(function(e,t){if(e)return s.a.createElement("li",{key:e.title}," Day - ",e.day," ",e.title)})))):this.state.moveErrorMessage),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.closeErrorModal()}},"OK"))))}}]),t}(s.a.Component),$s=Object(B.b)(function(e){return{taskData:e.reducer.taskData,variablesRefs:e.reducer.variablesRefs,dependencyTasks:e.reducer.dependencyTasks}},{getTaskDetailsAction:en,uploadDocumentAction:Xa,listDocAction:Ka,adminGetVarriableRefAction:Rn,updateDocAction:Za,updateTaskAction:an,getActualValuesAction:function(e){return function(t){return mt.getMethod(ct.transactionEvent+"/actual?eventId="+e,!0).then(function(e){return e.status,t({type:Me}),e.data})}},addDocAction:Qa,deleteCommentAction:function(e,t){return function(a){return mt.deleteMethod(ct.comments+e,!0,t).then(function(e){return e.status,a({type:Re}),e})}},addCommentAction:function(e,t){return function(a){return mt.postMethod(ct.comments+t,e,!0).then(function(e){return 200==e.status?a({type:Oe,uploadSuccess:!0}):a({type:Oe,uploadSuccess:!1}),e})}},GetDependencytasksAction:On,updateDepedentTaskAction:sn,deleteDocFromTaskAction:function(e,t){return function(a){return mt.putMethod(ct.deleteDocumentFromTask+t,e,!0).then(function(e){return""!==e._id?a({type:He,isDocAdded:!0}):a({type:He,isDocAdded:!1}),e})}}})(Js),er=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getTasks=function(){var e=[["TO DO for Agent, TC and/or Admin",[0,7]],["Auto email to Septic:",[1,4]],["Radon Inspector has to upload document",[3,6]],["Auto Text to Buyer\u2019s 11:30 a.m.",[7,7]],["After SEPTIC Inspector has been picked: EMAIL to Client:",[8,9]],["Text to Inspector:",[10,10]]].map(function(e,t){var a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),s=new Date(a.getFullYear(),a.getMonth(),a.getDate());return n.setDate(a.getDate()+e[1][0]),s.setDate(a.getDate()+e[1][1]),{start:n,end:s,name:e[0],id:"Task "+t,progress:100}});return e[1].dependencies="Task 0",e[2].dependencies="Task 1, Task 0",e[3].dependencies="Task 2",e[5].dependencies="Task 4",e[0].custom_class="bar-milestone",e[0].progress=100,e},a.state={viewMode:"Day",editTask:"",tasks:[],showLoader:!1,taskId:"",OpenTaskDetail:!1,moveConfirmationModal:!1,affectedTasks:[],moveTaskPostData:{},clickedTaskId:"",reloadPage:!1},a.onDateChange=a.onDateChange.bind(Object(Rt.a)(a)),a.onTaskClick=a.onTaskClick.bind(Object(Rt.a)(a)),a.customPopupHtml=a.customPopupHtml.bind(Object(Rt.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({showLoader:!0}),this.props.getAllTasksAction(this.props.transactionId).then(function(t){if(void 0!==e.props.tasks&&null!==e.props.tasks){var a=e.props.tasks.data;e.setState({tasks:e.formatTasks(a),originalTasks:a,showLoader:!1})}setTimeout(function(){Et()(".gannt-timeline.body .bar-milestone").each(function(){var e=Et()(this)[0].getBoundingClientRect().width;Et()(this).find(".bar").width(e+10)})},50)})}},{key:"componentDidMount",value:function(){setTimeout(function(){Et()(".gannt-timeline.body .bar-milestone").each(function(){var e=Et()(this)[0].getBoundingClientRect().width;Et()(this).find(".bar").width(e+10)})},500)}},{key:"formatTasks",value:function(e){return e.map(function(e,t){var a=new Date(e.eventStartDate),n=(a.setDate(a.getDate()-1),"bar-milestone-scheduled");return"SCHEDULED"==e.status&&(n="bar-milestone-scheduled"),"COMPLETED"==e.status&&(n="bar-milestone-completed"),e.overDue&&(n="bar-milestone-overdue"),{start:new Date(e.eventEndDate),end:new Date(e.eventEndDate),name:e.title,id:e._id,progress:100,taskData:e,dependencies:e.predecessor,custom_class:"bar-milestone "+n}})}},{key:"templatesScroll",value:function(){var e=Et()(".gannt-timeline.body .gantt-container").scrollLeft();Et()(".gannt-timeline.head .gantt-container").scrollLeft(e)}},{key:"customPopupHtml",value:function(e){setTimeout(function(){Et()(".gannt-timeline.body .bar-milestone").each(function(){var e=Et()(this)[0].getBoundingClientRect().width;Et()(this).find(".bar").width(e+10)})},20)}},{key:"onDateChange",value:function(e,t,a){}},{key:"onTaskClick",value:function(e){this.setState({taskId:""}),this.setState({taskId:e.id,editTask:"open"})}},{key:"deleteTask",value:function(e){var t=this;this.props.deleteTaskAction(e).then(function(e){t.getAllTasks("delete")})}},{key:"updateTasks",value:function(e){"update"==e&&(this.getAllTasks(),this.setState({editTask:"",taskId:""})),setTimeout(function(){Et()(".gannt-timeline.body .bar-milestone").each(function(){var e=Et()(this)[0].getBoundingClientRect().width;Et()(this).find(".bar").width(e+10)})},20)}},{key:"getAllTasks",value:function(){var e=this;this.props.getAllTasksAction(this.props.transactionId).then(function(t){if(void 0!==e.props.tasks&&null!==e.props.tasks){var a=e.props.tasks.data;e.setState({tasks:e.formatTasks(a),originalTasks:a,showLoader:!1,editTask:"",taskId:""}),setTimeout(function(){Et()(".gannt-timeline.body .bar-milestone").each(function(){var e=Et()(this)[0].getBoundingClientRect().width;Et()(this).find(".bar").width(e+10)})},20)}})}},{key:"confirmMove",value:function(){this.setState({moveConfirmationModal:!1,showLoader:!0}),this.updateDependency(this.state.moveTaskPostData,this.state.moveTaskPostData._id)}},{key:"updateDependency",value:function(e,t){var a=this;this.props.updateDepedentTaskAction(t,e).then(function(e){a.setState({showLoader:!1})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"gannt-timeline-wrapper"},this.state.showLoader?s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement("div",null,this.state.tasks.length<=0?s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No task found"))):s.a.createElement("div",null,this.state.tasks.length>0&&s.a.createElement("div",{className:"gannt-timeline head"},s.a.createElement(Os.a,{tasks:this.state.tasks,viewMode:this.state.viewMode,customPopupHtml:this.customPopupHtml,scrollOffsets:this.state.scrollOffsets})),this.state.tasks.length>0&&s.a.createElement("div",null,s.a.createElement("div",{className:"gannt-timeline body",onScroll:function(){return e.templatesScroll()}},s.a.createElement(Os.a,{tasks:this.state.tasks,viewMode:this.state.viewMode,customPopupHtml:this.customPopupHtml,scrollOffsets:this.state.scrollOffsets,onDateChange:this.onDateChange,onClick:this.onTaskClick})),s.a.createElement("div",{className:this.state.editTask+"  task-single calendar-add-task"},""!=this.state.taskId&&s.a.createElement($s,{taskId:this.state.taskId,deleteTask:function(t){e.deleteTask(t)},onUpdate:function(t){return e.updateTasks(t)},transactionData:this.props.transactionData,reloadPage:function(){return e.getAllTasks()},fromTimeline:!0,closeDetailsModal:function(){return e.setState({editTask:""})}}))))),s.a.createElement(Wa.a,{show:this.state.moveConfirmationModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement("p",null,"Are you sure you move this task?"),"here is the list of task that will be affected :",this.state.affectedTasks.map(function(e,t){if(e)return s.a.createElement("li",{key:e.title}," Day - ",e.day," ",e.title)})),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({moveConfirmationModal:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.confirmMove()}},"Yes"))))}}]),t}(s.a.Component),tr=Object(B.b)(function(e){return{tasks:e.reducer.tasks}},{getAllTasksAction:$a,getTaskDetailsAction:en,updateTaskAction:an,updateDepedentTaskAction:sn})(er),ar=a(1422),nr=a(1423),sr=a(1424),rr=a(1425),lr=a(1426),or=a(647),ir=(a(1262),a(53),new Date),cr=ir.getMonth()+1+"/"+ir.getDate()+"/"+ir.getFullYear();ir.getFullYear(),ir.getMonth(),ir.getDate();function mr(e){return s.a.createElement("img",{src:Ca.a})}var dr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).showContingencie=function(e){0==e?a.setState({showContingencie:"show"}):a.setState({showContingencie:""})},a.setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.state={propertyInfo:!1,buyerInfo:!1,agreedInfo:!1,transactionInfo:!1,campaignInfo:!1,showContingencie:"",startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),photoIndex:0,isOpen:!1,transactionId:a.props.transactionId,buyerDataInfo:{email:"",firstname:"",lastName:"",mobileNumber:""},propertyDataInfo:{city:"",image:[],name:"",state:"",street:"",street1:"",zipcode:""},priceDataInfo:{agreedOpenPrice:"",emd:""},transactionDataInfo:{transactionType:"",campaign:"",startDate:"",closeDate:""},campDataInfo:{leadSource:"",condo:!1,builtBefore1978:!1,hoa:!1},contingencies:{},allTransdata:{},campaignStyle:[],newcampContingencies:[],campContingencies:[],finalConti:[],ownerId:"",status:"",acceptedFiles:[],isInitialState:!0,showLoader:!1,startTransaction:!1,promptMsg:"",initialValues:{startDate:"",closeDate:""},chanedSts:"SCHEDULED",showStartDate:!0,showCloseDate:!0,updateDate:!1,userRole:localStorage.getItem("usertype").toUpperCase(),updatedKeys:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"propertyInfoModal",value:function(){this.setState({propertyInfo:!this.state.propertyInfo})}},{key:"buyerInfoModal",value:function(){this.setState({buyerInfo:!this.state.buyerInfo})}},{key:"agreedInfoModal",value:function(){this.setState({agreedInfo:!this.state.agreedInfo})}},{key:"transactionInfoModal",value:function(){this.setState({transactionInfo:!this.state.transactionInfo})}},{key:"campaignInfoModal",value:function(){this.setState({campaignInfo:!this.state.campaignInfo})}},{key:"componentWillMount",value:function(){var e=this;this.setState({showLoader:!0}),this.props.getTransactionDataAction(this.state.transactionId).then(function(t){if(void 0!==e.props.transactionData&&null!==e.props.transactionData){var a=e.props.transactionData,n={startDate:e.props.transactionData.startDate,closeDate:e.props.transactionData.endDate};if(e.props.transactionData.property){var s=e.props.transactionData.property.zipcode.toString();if(s.length>5){var r=s.slice(0,5)+"-"+s.slice(5,9);e.props.transactionData.property.zipcode=r}}e.setState({allTransdata:a,buyerDataInfo:e.props.transactionData.buyer,buyerAgentDataInfo:{email:e.props.transactionData.buyerAgentEmail,fname:e.props.transactionData.buyerAgentFirstname,lname:e.props.transactionData.buyerAgentLastName,mobile:e.props.transactionData.buyerAgentMobileNumber},propertyDataInfo:e.props.transactionData.property||{},priceDataInfo:{agreedOpenPrice:e.props.transactionData.agreedOpenPrice,emd:e.props.transactionData.emd},transactionDataInfo:{transactionType:e.props.transactionData.transactionType,campaign:e.props.transactionData.campaign,startDate:e.props.transactionData.startDate,closeDate:e.props.transactionData.endDate},campDataInfo:{leadSource:e.props.transactionData.leadSource,condo:e.props.transactionData.condo,builtBefore1978:e.props.transactionData.builtBefore1978,hoa:e.props.transactionData.hoa},campContingencies:e.props.transactionData.contingencies,newcampContingencies:e.props.transactionData.contingencies,finalConti:e.props.transactionData.contingencies,ownerId:e.props.transactionData.ownerId,status:e.props.transactionData.status,isInitialState:!1,initialValues:n},function(){e.setState({showLoader:!1})})}}),this.props.getBuyerAgentMasterTemplateAction().then(function(t){e.setState({campaignStyle:e.props.buyerMasterTemplates})})}},{key:"updateTransactionData",value:function(e,t){if("hoa"===e){var a=this.state.campDataInfo;a.hoa=t,this.updateAPI(a,"camp")}}},{key:"setContingencyForCamp",value:function(e){for(var t=[],a=0,n=0,s=this.state.campaignStyle.length;n<s;n++){var r=this.state.campaignStyle[n];r._id===e&&(t=r.contingencies,a=r.campaignDays)}var l=Gt()(),o=Gt()().subtract(-a,"days"),i=[];for(var c in t)t.hasOwnProperty(c)&&i.push({name:c,startDate:l.format("YYYY-MM-DD"),endDate:o.format("YYYY-MM-DD")});this.setState({newcampContingencies:i})}},{key:"changeTransStatus",value:function(e){var t=e.target.value,a="";"INPROGRESS"===t&&(a="start"),"PAUSED"===t&&(a="pause"),"INPROGRESS"===t&&"PAUSED"===this.state.status&&(a="resume"),"CANCELED"===t&&(a="cancel"),""!==a&&this.openConfirmPopup(a)}},{key:"openConfirmPopup",value:function(e){var t="";"start"===e&&(t="Please confirm the new start date & closing date",this.setState({showStartDate:!0,showCloseDate:!0,chanedSts:"INPROGRESS"})),"resume"===e&&(t="Please select the new closing date",this.setState({showStartDate:!1,showCloseDate:!0,chanedSts:"INPROGRESS"})),"pause"===e&&(t="All the pending tasks will be stopped and the transaction will be marked as Paused, Are you sure want to continue?",this.setState({showStartDate:!1,showCloseDate:!1,chanedSts:"PAUSED"})),"cancel"===e&&(t="All the pending tasks will be marked as cancled. Are you sure want to continue?",this.setState({showStartDate:!1,showCloseDate:!1,chanedSts:"CANCELED"})),""!==t&&this.setState({promptMsg:t,startTransaction:!0})}},{key:"closeConfirmPopup",value:function(){this.setState({promptMsg:"",startTransaction:!1})}},{key:"changeTransactionStatus",value:function(e){var t=this,a=this.state.transactionId,n={status:this.state.chanedSts};n.startDate=new Date(e.startDate),n.endDate=new Date(e.closeDate),this.props.changeTransactionStatusAction(a,n).then(function(e){t.props.getTransactionDataAction(a).then(function(e){if(void 0!==t.props.transactionData&&null!==t.props.transactionData){t.props.setTransSts(t.state.chanedSts);var a={startDate:t.props.transactionData.startDate,closeDate:t.props.transactionData.endDate};if(t.props.transactionData.property){var n=t.props.transactionData.property.zipcode.toString();if(n.length>5){var s=n.slice(0,5)+"-"+n.slice(5,9);t.props.transactionData.property.zipcode=s}}t.setState({allTransdata:e,buyerDataInfo:t.props.transactionData.buyer,propertyDataInfo:t.props.transactionData.property||{},priceDataInfo:{agreedOpenPrice:t.props.transactionData.agreedOpenPrice,emd:t.props.transactionData.emd},transactionDataInfo:{transactionType:t.props.transactionData.transactionType,campaign:t.props.transactionData.campaign,startDate:t.props.transactionData.startDate,closeDate:t.props.transactionData.endDate},campDataInfo:{leadSource:t.props.transactionData.leadSource,condo:t.props.transactionData.condo,builtBefore1978:t.props.transactionData.builtBefore1978,hoa:t.props.transactionData.hoa},campContingencies:t.props.transactionData.contingencies,finalConti:t.props.transactionData.contingencies,ownerId:t.props.transactionData.ownerId,status:t.state.chanedSts,initialValues:a,promptMsg:"",startTransaction:!1,updateDate:!0})}})})}},{key:"uploadImage",value:function(e){for(var t=this,a=e.target.files,n=[],s=new FormData,r=0;r<a.length;r++)s.append("file",a[r]),n.push(a[r].name);mt.postFormDataMethod(ct.uploadPropertyImage,s,!0).then(function(e){t.setState({updatedKeys:["image"]}),t.updateAPI(n,"images")})}},{key:"deleteImage",value:function(e){this.state.propertyDataInfo.image.length;this.setState({updatedKeys:["image"]}),this.updateAPI(e,"delImage")}},{key:"updateTranConData",value:function(e){this.setState({campContingencies:e}),this.state.isInitialState||this.updateAPI(e,"conti-up")}},{key:"updateAPI",value:function(e,t){for(var a=this,n=this.state.buyerDataInfo,s=this.state.propertyDataInfo,r=this.state.priceDataInfo,l=this.state.campDataInfo,o=this.state.transactionDataInfo,i=this.state.campContingencies,c=0;c<i.length;c++)i[c].startDate=o.startDate,i[c].endDate=i[c].endDate>o.closeDate?o.closeDate:i[c].endDate;"buyer"===t&&(n=e),"property"===t&&(s=e),"price"===t&&(r=e),"camp"===t&&(l=e),"trans"===t&&(o=e);var m={property:s,buyer:n,emd:r.emd,agreedOpenPrice:r.agreedOpenPrice,draft:!1,hoa:l.hoa,condo:l.condo,builtBefore1978:l.builtBefore1978,leadSource:l.leadSource,transactionType:o.transactionType,startDate:o.startDate,endDate:o.closeDate,campaign:o.campaign,contingencies:i,updatedKeys:this.state.updatedKeys};if("trans"===t&&o.campaign!==e.campaign){for(var d=this.state.newcampContingencies,u=0;u<d.length;u++)d[u].startDate=o.startDate,d[u].endDate=d[u].endDate>o.closeDate?o.closeDate:d[u].endDate;m.contingencies=d}if("status"===t&&(m.status=e.status),"images"===t){for(var p=0;p<e.length;p++)s.image.push(e[p]);m.property=s}if("delImage"===t){var h;h=s.image.filter(function(t){return!(t==e)}),s.image=h,m.property=s}if("conti-up"===t&&(m.contingencies=e),m.hoa){for(var g=!1,f=0;f<m.contingencies.length;f++)"HOA Docs"===m.contingencies[f].name&&(g=!0);g||m.contingencies.push({endDate:m.startDate,name:"HOA Docs",startDate:m.closeDate})}else{for(var E=[],v=0;v<m.contingencies.length;v++)"HOA Docs"!==m.contingencies[v].name&&E.push(m.contingencies[v]);m.contingencies=E}if((""==m.campaign&&delete m.campaign,m.property)&&m.property.zipcode.toString().length>5){var y=m.property.zipcode.replace(/\-/g,"");m.property.zipcode=y}this.props.updateTransactionDataAction(this.state.transactionId,m).then(function(e){if(void 0!==e&&null!==e){if(e.property){var t=e.property.zipcode.toString();if(t.length>5){var n=t.slice(0,5)+"-"+t.slice(5,9);e.property.zipcode=n}}var s=e;a.setState({propertyInfo:!1,buyerInfo:!1,agreedInfo:!1,transactionInfo:!1,campaignInfo:!1,allTransdata:s,buyerDataInfo:e.buyer,propertyDataInfo:e.property,priceDataInfo:{agreedOpenPrice:e.agreedOpenPrice,emd:e.emd},transactionDataInfo:{transactionType:e.transactionType,campaign:e.campaign,startDate:e.startDate,closeDate:e.endDate},campDataInfo:{leadSource:e.leadSource,condo:e.condo,builtBefore1978:e.builtBefore1978,hoa:e.hoa},campContingencies:e.contingencies}),a.props.isDataUpdate(a.props.updatedTransData.property),a.props.isTransactionUpdate(a.props.updatedTransData)}})}},{key:"formatNumber",value:function(e){return e.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{key:"render",value:function(){var e=this,t=(this.state.startDate.format("MM/DD/YYYY"),this.state.closeDate.format("MM/DD/YYYY"),"");if(void 0!==this.state.allTransdata.modifiedDate){var a=new Date(this.state.allTransdata.modifiedDate);t=a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()}var n="";if(void 0!==this.state.allTransdata.startDate){var r=this.props.updated&&!this.state.updateDate?new Date(this.props.updatedData.startDate):new Date(this.state.allTransdata.startDate);n=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()}var l="";if(void 0!==this.state.allTransdata.endDate){var o=this.props.updated&&!this.state.updateDate?new Date(this.props.updatedData.endDate):new Date(this.state.allTransdata.endDate);l=o.getMonth()+1+"/"+o.getDate()+"/"+o.getFullYear()}var i=[];for(var c in aa){var m=s.a.createElement("option",{key:c,value:c},aa[c]);i.push(m)}for(var d=[],u="",p=0,h=this.state.campaignStyle.length;p<h;p++){var g=this.state.campaignStyle[p];this.state.transactionDataInfo.campaign===g._id&&(u=g.name);var f=s.a.createElement("option",{key:g._id,value:g._id},g.name);d.push(f)}var E={_id:this.state.transactionId,property:this.state.propertyDataInfo,buyer:this.state.buyerDataInfo,emd:this.state.priceDataInfo.emd,agreedOpenPrice:this.state.priceDataInfo.agreedOpenPrice,draft:!1,hoa:this.state.campDataInfo.hoa,condo:this.state.campDataInfo.condo,builtBefore1978:this.state.campDataInfo.builtBefore1978,leadSource:this.state.campDataInfo.leadSource,transactionType:this.state.transactionDataInfo.transactionType,startDate:this.state.transactionDataInfo.startDate,endDate:this.state.transactionDataInfo.closeDate,campaign:this.state.transactionDataInfo.campaign,contingencies:this.state.campContingencies,isInitialState:this.state.isInitialState},v=[];void 0!==this.state.propertyDataInfo&&this.state.propertyDataInfo.image&&this.state.propertyDataInfo.image.map(function(t,a){v.push(ct.AdminCreateTransactionUrl+"/upload?id="+e.state.ownerId+"&img="+t)});var y=this.state,b=y.photoIndex,N=y.isOpen;return s.a.createElement("div",{className:"trans-tab-single"},this.state.showLoader?s.a.createElement("div",{className:"page-loader fixed"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"page-head-row page-head-row-inner align-items-center ml-0 mr-0"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"trans-timeline"},s.a.createElement("h6",null,"Days"),s.a.createElement("ul",null,s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"1")),s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"2")),s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"3")),s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"4")),s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"5")),s.a.createElement("li",{className:"green"},s.a.createElement("span",null,"6")),s.a.createElement("li",{className:"blue"},s.a.createElement("span",null,"7")),s.a.createElement("li",{className:"blue"},s.a.createElement("span",null,"8")),s.a.createElement("li",{className:"blue"},s.a.createElement("span",null,"9")),s.a.createElement("li",{className:"blue"},s.a.createElement("span",null,"10")),s.a.createElement("li",null,s.a.createElement("span",null,"11")),s.a.createElement("li",null,s.a.createElement("span",null,"12")),s.a.createElement("li",null,s.a.createElement("span",null,"13")),s.a.createElement("li",null,s.a.createElement("span",null,"14")),s.a.createElement("li",null,s.a.createElement("span",null,"15")),s.a.createElement("li",null,s.a.createElement("span",null,"16")),s.a.createElement("li",null,s.a.createElement("span",null,"17")),s.a.createElement("li",null,s.a.createElement("span",null,"18")),s.a.createElement("li",null,s.a.createElement("span",null,"19")),s.a.createElement("li",null,s.a.createElement("span",null,"20")))))),s.a.createElement("div",{className:"container-custom admin-content-area"},s.a.createElement(Ut.a,{className:"pt-3"},s.a.createElement(Yt.a,{xs:"12",sm:"3",className:"mb-3"},s.a.createElement("div",{className:"trans-carousel",style:{position:"relative"}},s.a.createElement(va.a,{className:"slide-transaction",interval:!1,indicators:!1,fade:!0,controls:!((this.state.propertyDataInfo.image||[]).length<=1)},(this.state.propertyDataInfo.image||[]).map(function(t,a){return s.a.createElement(va.a.Item,{key:t+a},null==t||""==t?s.a.createElement("img",{className:"d-block w-100",src:Na.a}):s.a.createElement(ka.a,{src:ct.AdminCreateTransactionUrl+"/upload?id="+e.state.ownerId+"&img="+t},s.a.createElement("img",null),s.a.createElement("img",{src:Na.a}),s.a.createElement(mr,null)),s.a.createElement("div",{className:"dropzone-options"},s.a.createElement(x.a,{variant:"transparent",className:"",onClick:function(){return e.setState({isOpen:!0})}},s.a.createElement(ar.a,null)),N&&s.a.createElement(or.a,{mainSrc:v[b],nextSrc:v[(b+1)%v.length],prevSrc:v[(b+v.length-1)%v.length],onCloseRequest:function(){return e.setState({isOpen:!1})},onMovePrevRequest:function(){return e.setState({photoIndex:(b+v.length-1)%v.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(b+1)%v.length})}}),s.a.createElement(x.a,{variant:"transparent",className:""},s.a.createElement("a",{href:ct.AdminCreateTransactionUrl+"/upload?id="+e.state.ownerId+"&img="+t,style:{color:"#fff"}},s.a.createElement(nr.a,null))),s.a.createElement(x.a,{variant:"transparent",className:"",onClick:function(){return e.deleteImage(t)}},s.a.createElement(yn.a,null)),s.a.createElement(x.a,{variant:"transparent",className:"dropzone-options-file"},s.a.createElement("label",{htmlFor:"browse"},s.a.createElement(sr.a,null)),s.a.createElement("input",{type:"file",id:"browse",multiple:!0,onChange:function(t){return e.uploadImage(t)}}))))}),(this.state.propertyDataInfo.image||[]).length<=0&&s.a.createElement(va.a.Item,null,s.a.createElement("img",{className:"d-block w-100",src:Na.a}),s.a.createElement("div",{className:"dropzone-options"},s.a.createElement(x.a,{variant:"transparent",className:"dropzone-options-file"},s.a.createElement("label",{htmlFor:"browse"},s.a.createElement(sr.a,null)),s.a.createElement("input",{type:"file",id:"browse",multiple:!0,onChange:function(t){return e.uploadImage(t)}}))))))),s.a.createElement(Yt.a,{xs:"12",sm:"3",className:"mb-3"},s.a.createElement("div",{className:"trans-edit-block"},"BUYER"===this.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.propertyInfoModal()}},s.a.createElement(la.a,null)),s.a.createElement("h4",{className:"font-14 color-blue-4"},"Property Information"),s.a.createElement("h2",{className:"font-20 mb-1 font-600"},this.state.propertyDataInfo.street+(""!==this.state.propertyDataInfo.street1?" "+this.state.propertyDataInfo.street1:""),",",s.a.createElement("br",null)," ",s.a.createElement("span",{className:"text-capitalize"},this.state.propertyDataInfo.city+", "),this.state.propertyDataInfo.state+" "+this.state.propertyDataInfo.zipcode),s.a.createElement("div",{className:"c-select status-select mt-2 mb-2"},s.a.createElement("select",{name:"status",id:"",value:this.props.transStatus,className:"form-control",onChange:function(t){return e.changeTransStatus(t)},disabled:"BUYER"==this.state.userRole},s.a.createElement("option",{value:"INPROGRESS"},"In Progress"),s.a.createElement("option",{value:"SCHEDULED"},"Scheduled"),s.a.createElement("option",{value:"PAUSED"},"Paused"),s.a.createElement("option",{value:"COMPLETED"},"Completed"),s.a.createElement("option",{value:"CANCELED"},"Canceled"))),s.a.createElement("p",{className:"mb-0 font-14"},"Updated on: ",t))),s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("div",{className:"trans-edit-block"},"BUYER"===this.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.buyerInfoModal()}},s.a.createElement(la.a,null)),"BUYER"===this.state.userRole?s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",{className:"font-14 color-blue-4"},"Buyer Agent Information"),s.a.createElement("h1",{className:"font-20 mb-1 font-600 text-capitalize"},this.state.buyerAgentDataInfo.fname+" "+this.state.buyerAgentDataInfo.lname),s.a.createElement("table",{border:"0",className:"mt-2 trans-table trans-table-normal"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key",style:{width:"35px"}},s.a.createElement(rr.a,null)),s.a.createElement("td",{className:"text-val font-14"},s.a.createElement("div",{className:"email-case"},this.state.buyerAgentDataInfo.email))),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key"},s.a.createElement(lr.a,null)),s.a.createElement("td",{className:"text-val font-14"},this.state.buyerAgentDataInfo.mobile))))):s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",{className:"font-14 color-blue-4"},"Buyer Information"),s.a.createElement("h1",{className:"font-20 mb-1 font-600"},this.state.buyerDataInfo.firstname+" "+this.state.buyerDataInfo.lastName),s.a.createElement("table",{border:"0",className:"mt-2 trans-table trans-table-normal"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key",style:{width:"35px"}},s.a.createElement(rr.a,null)),s.a.createElement("td",{className:"text-val font-14"},s.a.createElement("div",{className:"email-case"},this.state.buyerDataInfo.email))),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key"},s.a.createElement(lr.a,null)),s.a.createElement("td",{className:"text-val font-14"},this.state.buyerDataInfo.mobileNumber)))))))),s.a.createElement("hr",{className:"row my-0"}),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12",sm:"3",className:"pt-3 trans-edit-left"},s.a.createElement("div",{className:"mb-4 trans-edit-block"},"BUYER"===this.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.agreedInfoModal()}},s.a.createElement(la.a,null)),s.a.createElement("table",{className:"trans-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key blue"},"Sales Price:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-22 font-600"},"$",this.formatNumber(this.state.allTransdata.agreedOpenPrice))),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-14 font-500"},"Earnest Money Deposit:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-16 color-black"},"$",this.formatNumber(this.state.allTransdata.emd)))))),s.a.createElement("div",{className:"mb-4 trans-edit-block"},"BUYER"===this.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.transactionInfoModal()}},s.a.createElement(la.a,null)),s.a.createElement("table",{className:"font-14 trans-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Transaction Type:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},this.state.allTransdata.transactionType)),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Campaign Style:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},u)),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Start date:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},n)),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Expected Closing Date:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},l))))),s.a.createElement("div",{className:"trans-edit-block"},"BUYER"===this.state.userRole?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.campaignInfoModal()}},s.a.createElement(la.a,null)),s.a.createElement("table",{className:"font-14 trans-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Lead source:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},this.state.allTransdata.leadSource)),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Built before 1978: ")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},this.state.allTransdata.builtBefore1978?"Yes":"No")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"HOA:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},this.state.allTransdata.hoa?"Yes":"No")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-key font-500"},"Condo:")),s.a.createElement("tr",null,s.a.createElement("td",{className:"text-val font-600"},this.state.allTransdata.condo?"Yes":"No")))))),s.a.createElement(Yt.a,{xs:"12",sm:"9",className:"pt-3 set-contingencies-detail"},s.a.createElement(Wn,{isMasterTemplate:!1,isUpdateTrans:!0,updateTransactionData:function(t,a){return e.updateTransactionData(t,a)},campContingencies:this.state.campContingencies,transID:this.state.allTransdata._id,transdata:this.state.allTransdata,contiCamp:function(t){return e.updateTranConData(t)},startDate:this.state.transactionDataInfo.startDate,endDate:this.state.transactionDataInfo.closeDate,getTransactionData:function(){return E}})))),s.a.createElement(Wa.a,{show:this.state.propertyInfo,onHide:function(){return e.propertyInfoModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.propertyDataInfo,enableReinitialize:!0,validationSchema:Tt.object().shape({street:Tt.string().required("Please enter Address 1"),zipcode:Tt.string().required("Please enter Zip Code").matches(new RegExp("^[0-9]{5}(?:-[0-9]{4})?$"),{message:"Please enter valid Zip code",excludeEmptyString:!0}),city:Tt.string().required("Please enter City"),state:Tt.string().required("Please select State")}),onSubmit:function(t,a){a.setSubmitting;var n=Object.keys(e.state.propertyDataInfo).filter(function(a){return e.state.propertyDataInfo[a]!==t[a]});e.setState({updatedKeys:n}),e.updateAPI(t,"property")}},function(t){t.handleChange;var a=t.errors,n=t.values,r=(t.handleBlur,t.setFieldValue),l=(t.submitForm,t.touched);t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Property Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"street"},"Address 1",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"street",type:"text",value:n.street,className:"form-control"+(a.street&&l.street?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"street",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"street1"},"Address 2"),s.a.createElement(Ct.b,{name:"street1",type:"text",value:n.street1,className:"form-control"+(a.street1&&l.street1?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"street1",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"zipcode"},"Zip Code",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"zipcode",type:"text",value:n.zipcode,className:"form-control"+(a.zipcode&&l.zipcode?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"zipcode",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"city"},"City",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"city",type:"text",value:n.city,className:"form-control"+(a.city&&l.city?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"city",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"state"},"State",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"state",id:"",defaultValue:n.state,disabled:"BUYER"==e.state.userRole,onChange:function(e){r("state",e.target.value)},className:"form-control"},s.a.createElement("option",{value:""},"Select"),i)),s.a.createElement(Ct.a,{name:"state",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Save")))})),s.a.createElement(Wa.a,{show:this.state.buyerInfo,onHide:function(){return e.buyerInfoModal()},initialValues:this.state.buyerDataInfo,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.buyerDataInfo,enableReinitialize:!0,validationSchema:Tt.object().shape({firstname:Tt.string().required("Please enter Buyer's First Name"),lastName:Tt.string().required("Please enter Buyer's Last Name"),email:Tt.string().required("Please enter E-mail Address"),mobileNumber:Tt.string().required("Please enter valid Mobile Number.")}),onSubmit:function(t,a){a.setSubmitting;var n=Object.keys(e.state.buyerDataInfo).filter(function(a){return e.state.buyerDataInfo[a]!==t[a]});e.setState({updatedKeys:n}),e.updateAPI(t,"buyer")}},function(e){var t=e.handleChange,a=e.errors,n=e.values,r=e.handleBlur,l=(e.setFieldValue,e.submitForm,e.touched);e.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Buyer Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"firstname"},"Buyers First Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"firstname",type:"text",value:n.firstname,className:"form-control"+(a.firstname&&l.firstname?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"firstname",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"lastName"},"Buyers Last Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"lastName",type:"text",value:n.lastName,className:"form-control"+(a.lastName&&l.lastName?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"lastName",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"E-mail Address",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"email",type:"text",value:n.email,className:"form-control"+(a.email&&l.email?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"email",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"mobileNumber"},"Mobile Number",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",className:"form-control"+(a.mobileNumber&&l.mobileNumber?" is-invalid":""),formControlProps:{fullWidth:!0},value:n.mobileNumber,name:"mobileNumber",onChange:t,onBlur:r},function(e){return s.a.createElement(Ct.b,e)}),s.a.createElement(Ct.a,{name:"mobileNumber",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Save")))})),s.a.createElement(Wa.a,{show:this.state.agreedInfo,onHide:function(){return e.agreedInfoModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.priceDataInfo,enableReinitialize:!0,validationSchema:Tt.object().shape({agreedOpenPrice:Tt.string().required("Please enter Agreed Open Price"),emd:Tt.string().required("Please enter EMD Deposit")}),onSubmit:function(t,a){a.setSubmitting;var n=Object.keys(e.state.priceDataInfo).filter(function(a){return e.state.priceDataInfo[a]!==t[a]});e.setState({updatedKeys:n}),e.updateAPI(t,"price")}},function(e){e.handleChange;var t=e.errors,a=e.values,n=(e.handleBlur,e.setFieldValue,e.submitForm,e.touched);e.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Price Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"mobileNumber"},"Agreed Open Price",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"agreedOpenPrice",type:"number",value:a.agreedOpenPrice,className:"form-control"+(t.agreedOpenPrice&&n.agreedOpenPrice?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"agreedOpenPrice",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"EMD Deposit",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{name:"emd",type:"number",value:a.emd,className:"form-control"+(t.emd&&n.emd?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"emd",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Save")))})),s.a.createElement(Wa.a,{show:this.state.transactionInfo,onHide:function(){return e.transactionInfoModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.transactionDataInfo,enableReinitialize:!0,validationSchema:Tt.object().shape({transactionType:Tt.string().required("Please select Transaction Type"),campaign:Tt.string().required("Please select Campaign Style")}),onSubmit:function(t,a){a.setSubmitting;if(!window.confirm("Changing the campaign will delete all the existing tasks & documents. Are you sure want to update?"))return e.transactionInfoModal(),!1;e.setContingencyForCamp(t.campaign);var n=Object.keys(e.state.transactionDataInfo).filter(function(a){return e.state.transactionDataInfo[a]!==t[a]});e.setState({updatedKeys:n}),e.updateAPI(t,"trans")}},function(t){t.handleChange,t.errors;var a=t.values,n=(t.handleBlur,t.setFieldValue);t.submitForm,t.touched,t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Transaction Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"transactionType"},"Transaction Type",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"transactionType",id:"",className:"form-control",defaultValue:a.transactionType,disabled:"BUYER"==e.state.userRole,onChange:function(e){n("transactionType",e.target.value)}},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Purchase"},"Purchase"))),s.a.createElement(Ct.a,{name:"transactionType",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"campaign"},"Campaign Style",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"campaign",id:"",className:"form-control",defaultValue:a.campaign,disabled:"BUYER"==e.state.userRole,onChange:function(t){var a=t.target.value;if(""!==a){for(var s=0,r=0,l=e.state.campaignStyle.length;r<l;r++){var o=e.state.campaignStyle[r];o._id===a&&(s=o.campaignDays)}var i=Gt()(),c=Gt()().subtract(-s,"days");n("campaign",t.target.value),n("startDate",i.format("YYYY-MM-DD")),n("closeDate",c.format("YYYY-MM-DD"))}else n("campaign","")}},s.a.createElement("option",{value:""},"Select"),d)),s.a.createElement(Ct.a,{name:"campaign",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Start Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.startDate),onEvent:function(t,s){n("startDate",s.startDate.format("YYYY-MM-DD"));var r=a.campaign;if(""!==r){for(var l=0,o=0,i=e.state.campaignStyle.length;o<i;o++){var c=e.state.campaignStyle[o];c._id===r&&(l=c.campaignDays)}var m=s.startDate.subtract(-l,"days");n("closeDate",m.format("YYYY-MM-DD"))}},minDate:cr},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.startDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Expected Closing Date",s.a.createElement("span",{className:"text-danger"},"*"),"\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.closeDate),onEvent:function(e,t){n("closeDate",t.startDate.format("YYYY-MM-DD"))},minDate:Gt()(a.startDate)},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.closeDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Save")))})),s.a.createElement(Wa.a,{show:this.state.campaignInfo,onHide:function(){return e.campaignInfoModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.campDataInfo,enableReinitialize:!0,validationSchema:Tt.object().shape({}),onSubmit:function(t,a){a.setSubmitting;var n=Object.keys(e.state.campaignInfo).filter(function(a){return e.state.campaignInfo[a]!==t[a]});e.setState({updatedKeys:n}),e.updateAPI(t,"camp")}},function(e){e.handleChange;var t=e.errors,a=e.values,n=(e.handleBlur,e.setFieldValue),r=(e.submitForm,e.touched);e.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Campaign Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"leadSource"},"Lead Source"),s.a.createElement(Ct.b,{name:"leadSource",type:"text",value:a.leadSource,className:"form-control"+(t.leadSource&&r.leadSource?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"leadSource",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},s.a.createElement("input",{type:"checkbox",className:"custom-control-input",defaultChecked:a.builtBefore1978,id:"checkBuilt",name:"builtBefore1978",onChange:function(e){n("builtBefore1978",e.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkBuilt"},"Built Before 1978")),s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},s.a.createElement("input",{type:"checkbox",className:"custom-control-input",defaultChecked:a.hoa,id:"checkHoa",name:"hoa",onChange:function(e){n("hoa",e.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkHoa"},"HOA")),s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline font-600"},s.a.createElement("input",{type:"checkbox",className:"custom-control-input",defaultChecked:a.condo,id:"checkCondo",name:"condo",onChange:function(e){n("condo",e.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"checkCondo"},"Condo")))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Save")))}))),s.a.createElement(Wa.a,{show:this.state.startTransaction,onHide:function(){return e.closeConfirmPopup()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValues,enableReinitialize:!0,validationSchema:Tt.object().shape({}),onSubmit:function(t,a){a.setSubmitting;e.changeTransactionStatus(t)}},function(t){t.handleChange,t.errors;var a=t.values,n=(t.handleBlur,t.setFieldValue);t.submitForm,t.touched,t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Update Transaction")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement("div",null,s.a.createElement("p",{className:"font-14 color-grey-2"},e.state.promptMsg)),e.state.showStartDate&&e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Start Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.startDate),onEvent:function(t,a){n("startDate",a.startDate.format("YYYY-MM-DD"));for(var s=e.state.transactionDataInfo.campaign,r=0,l=0,o=e.state.campaignStyle.length;l<o;l++){var i=e.state.campaignStyle[l];i._id===s&&(r=i.campaignDays)}var c=a.startDate.subtract(-r,"days");n("closeDate",c.format("YYYY-MM-DD"))},minDate:cr},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.startDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))),s.a.createElement(Yt.a,{xs:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Expected Closing Date",s.a.createElement("span",{className:"text-danger"},"*"),"\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.closeDate),onEvent:function(e,t){n("closeDate",t.startDate.format("YYYY-MM-DD"))},minDate:Gt()(a.startDate)},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.closeDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),e.state.showStartDate&&!e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Start Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,minDate:cr,startDate:Gt()(a.startDate),onEvent:function(t,a){n("startDate",a.startDate.format("YYYY-MM-DD"));for(var s=e.state.transactionDataInfo.campaign,r=0,l=0,o=e.state.campaignStyle.length;l<o;l++){var i=e.state.campaignStyle[l];i._id===s&&(r=i.campaignDays)}var c=a.startDate.subtract(-r,"days");n("closeDate",c.format("YYYY-MM-DD"))}},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.startDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),!e.state.showStartDate&&e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Expected Closing Date",s.a.createElement("span",{className:"text-danger"},"*"),"\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,minDate:cr,startDate:Gt()(a.closeDate),onEvent:function(e,t){n("closeDate",t.startDate.format("YYYY-MM-DD"))}},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.closeDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){return e.closeConfirmPopup()}},"Cancel"),s.a.createElement(x.a,{type:"submit",variant:"primary",className:"btn-blue w-140"},"Yes")))})))}}]),t}(s.a.Component),ur=Object(B.b)(function(e){return{transactionData:e.reducer.transactionData,buyerMasterTemplates:e.reducer.buyerMasterTemplates,totalBuyerTemplates:e.reducer.totalBuyerTemplates,updatedTransData:e.reducer.updatedTransData}},{getTransactionDataAction:Ja,updateTransactionDataAction:function(e,t){var a=ct.UpdateTransactionUrl;return a=a.replace("{transactionsId}",e),function(e){return mt.putMethod(a,t,!0).then(function(t){return 200==t.status?e({type:me,updatedTransData:t.data}):e({type:me,updatedTransData:[]}),t.data})}},getBuyerAgentMasterTemplateAction:$n,changeTransactionStatusAction:nn})(dr),pr=a(1442),hr=a(1427),gr=(a(1263),a(53)),fr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).editTask=function(e){0==e?a.setState({editTask:"open"}):a.props.onUpdate("")},a.bindSubmitForm=function(e){a.submitMyForm=e},a.setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.state={show:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),taskType:"Communication",showText:!0,taskData:{transactionId:"",campaign:"",title:"",day:0,contingency:"",assignee:"",status:"SCHEDULED",eventType:"COMMUNICATION",communicationSubject:[""],communicationTo:[""],description:[""],communicationType:"EMAIL",eventStartDate:new Date,eventEndDate:new Date,time:"",document:!0},editEmailTo:!1,editcommunicationDesctription:!1,emailRefVar:[],variablesRefs:[],textRefVar:[],AllRefVarForMapping:[],AllRefVar:[],emailTextValForEditor:Bs.EditorState.createEmpty(),actualEmailTextValForEditor:Bs.EditorState.createEmpty(),detailsValForEditor:Bs.EditorState.createEmpty(),actualValues:{},showLoader:!1,contingencies:[],DependencyModal:!1,acceptedFiles:[],assigneeOptions:[{label:"select",value:""}]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"DependencyModal",value:function(){this.setState({DependencyModal:!this.state.DependencyModal})}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"showTaskType",value:function(e){e+"".toUpperCase()=="COMMUNICATION"?this.setState({taskType:!0}):this.setState({taskType:!1})}},{key:"clearCommunication",value:function(e,t){var a=this;e("communicationTo",[""]),e("communicationSubject",[""]),e("description",[""]);var n=this.state.taskData;n.communicationTo=[""],n.communicationSubject=[""],n.description=[""],this.setState({actualValues:{}}),this.setState({taskData:n},function(){a.getEditorContent(a.state.taskData)},function(){t({})}),t({})}},{key:"showText",value:function(e){"EMAIL"==(e+"").toUpperCase()?this.setState({showText:!0}):this.setState({showText:!1})}},{key:"getAllTasks",value:function(){var e=this;this.props.getTaskDetailsAction(this.props.taskId).then(function(t){t.communicationTo[0]="{("+t.communicationTo[0]+")}",t.communicationSubject[0]="{("+t.communicationSubject[0]+")}",e.props.getActualValuesAction(e.props.taskId).then(function(t){e.setState({actualValues:t})}),e.setState({taskData:t},function(){e.getEditorContent(e.state.taskData)}),e.showTaskType((t.type+"").toUpperCase()),e.showText((t.communicationType+"").toUpperCase())})}},{key:"getVariables",value:function(e){var t=this;this.props.adminGetVarriableRefAction().then(function(a){for(var n=[],s=[],r=[],l=[],o=[],i=t.props.variablesRefs||[],c=0,m=i.length;c<m;c++)r.push({id:i[c].name,display:i[c].name}),l.push(i[c].name),o.push({text:i[c].name,value:i[c].name.replace("@",""),url:""}),"EMAIL"===i[c].communicationtype&&n.push({id:i[c].name,display:i[c].name}),"TEXT"===i[c].communicationtype&&s.push({id:i[c].name,display:i[c].name});t.setState({variablesRefs:i,emailRefVar:n,textRefVar:s,AllRefVar:r,AllRefVarForEditor:o,AllRefVarForMapping:l},function(){var a=[];t.state.variablesRefs.forEach(function(t){"all"!==t.contingency&&t.contingency!==(e||"")||"user"!==t.account||a.push({label:t.name,value:t.name})}),t.setState({assigneeOptions:a})})})}},{key:"getEditorContent",value:function(e){var t=Bs.EditorState.createEmpty(),a=Bs.EditorState.createEmpty(),n=Gs()(e.description&&e.description.length>0&&e.description[0]);if(n){var s=Bs.ContentState.createFromBlockArray(n.contentBlocks);t=Bs.EditorState.createWithContent(s)}if("INTERACTIVE"===(e.type+"").toUpperCase()){var r=Gs()(e.description&&e.description.length>0&&e.description[0]);if(r){var l=Bs.ContentState.createFromBlockArray(r.contentBlocks);a=Bs.EditorState.createWithContent(l)}}this.setState({emailTextValForEditor:t,detailsValForEditor:a})}},{key:"updateTask",value:function(e,t,a,n,s){this.myRef.current.setSubmitting(),this.submitMyForm();var r=e;"communicationTo"==a||"communicationSubject"==a?(t(a,n,!0),r[a]=n,"save"==s&&Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r)):"description"==a?"save"==s&&Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r):"status"==a?1==this.myRef.current.state.values.document?this.myRef.current.state.values.documentId.length>0?(t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r)):console.log("Documents required."):(t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r)):(r[a]=n,t(a,n,!0),Object.keys(this.myRef.current.state.errors).length<=0&&this.handleSubmit(r))}},{key:"toggleCommunicationTo",value:function(e,t,a,n){this.updateTask(e,t,"communicationTo",a,n),""==a[0]&&0!=this.state.editEmailTo||this.setState({editEmailTo:!this.state.editEmailTo})}},{key:"toggleCommunicationSubject",value:function(e,t,a,n){this.updateTask(e,t,"communicationSubject",a,n),""==a[0]&&0!=this.state.editcommunicationSubject||this.setState({editcommunicationSubject:!this.state.editcommunicationSubject})}},{key:"toggleDescription",value:function(e,t,a,n){this.updateTask(e,t,"description",a,n),"<p></p>\n"==a[0]&&0!=this.state.editcommunicationDesctription||this.setState({editcommunicationDesctription:!this.state.editcommunicationDesctription})}},{key:"handleSubmit",value:function(e){var t=this,a=e;a.eventType=a.type;var n=[];a.communicationTo&&(a.communicationTo[0]+"").split(",").forEach(function(e){var t=e.replace(/\{\(/g,"").replace(/\)\}/g,"")||"";n.push(t.trim())}),a.communicationTo=n,a.communicationSubject=[a.communicationSubject?(a.communicationSubject[0]+"").replace("{(","").replace(")}",""):""],this.setState({showLoader:!0}),this.props.updateTaskAction(a,this.state.taskData._id).then(function(e){t.setState({showLoader:!1}),t.props.onUpdate("update")})}},{key:"componentWillMount",value:function(){var e=this.props.transactionData.contingencies;this.setState({contingencies:e}),this.getVariables()}},{key:"handleSubmit",value:function(e,t){var a=this,n=e;n.communicationTo=[n.communicationTo?(n.communicationTo[0]+"").replace(/\{\(/g,"").replace(/\)\}/g,""):""],n.communicationSubject=[n.communicationSubject?(n.communicationSubject[0]+"").replace(/\{\(/g,"").replace(/\)\}/g,""):""],this.setState({showLoader:!0}),this.props.updateTaskAction(n,t).then(function(e){a.setState({showLoader:!1})})}},{key:"addTask",value:function(e){var t=this,a=e;a.transactionId=this.props.transactionData._id,a.communicationTo=[a.communicationTo?(a.communicationTo[0]+"").replace("{(","").replace(")}",""):""],a.communicationSubject=[a.communicationSubject?(a.communicationSubject[0]+"").replace("{(","").replace(")}",""):""],this.setState({showLoader:!0}),this.props.createTaskAction(a).then(function(e){var a=new FormData,n=[];if(t.setState({showLoader:!0}),t.state.acceptedFiles.length>0){for(var s=0;s<t.state.acceptedFiles.length;s++)n.push(t.state.acceptedFiles[s].name),a.append("file",t.state.acceptedFiles[s]);t.props.uploadDocumentAction(a,t.props.transactionData._id).then(function(a){n.forEach(function(a){var n={transactionId:t.props.transactionData._id,location:"Closing Documents",transactionEventId:e.data._id,document:a};t.setState({showLoader:!0}),t.props.addDocAction(n).then(function(e){t.setState({showLoader:!1}),t.props.onUpdate("update")},function(e){t.setState({showLoader:!1}),t.props.onUpdate("update")})})},function(e){t.setState({showLoader:!1}),t.props.onUpdate("update")})}else t.setState({showLoader:!1}),t.props.onUpdate("update")})}},{key:"handleDateChange",value:function(e,t,a,n){var s=this.state.taskData,r=Gt()(e).format("YYYY-MM-DD"),l=Gt()(e).format("HH:mm");"time"==t&&(r=Gt()(n.eventEndDate).format("YYYY-MM-DD"));var o=Gt()(r+" "+l);a("eventEndDate",new Date(o.format("YYYY-MM-DD HH:mm"))),this.setState({taskData:s})}},{key:"setFiles",value:function(e){var t=this.state.acceptedFiles;t=gr.uniqBy(gr.concat(t,e),"name"),this.setState({acceptedFiles:t})}},{key:"deleteDocument",value:function(e){var t=this.state.acceptedFiles;t.splice(e,1),this.setState({acceptedFiles:t})}},{key:"render",value:function(){var e=this,t=this.state.taskData,a=this.props.transactionData.endDate||"",n=Tt.object().shape({title:Tt.string().required("Please enter Task Title"),eventType:Tt.string().required("Please select Task Type"),communicationTo:Tt.array().nullable().test("email",this.state.showText?"Please enter Email Recipient":"Please enter Text Recipient",function(e){return""!=e[0]}),communicationSubject:Tt.array().nullable().test("subject","Please enter Subject",function(t){return 0==e.state.showText||""!=t[0]}),description:Tt.array().nullable().test("description","Please enter Description",function(e){return"<p></p>\n"!=e&&""!=e})});this.state.taskType||(n=Tt.object().shape({title:Tt.string().required("Please enter Task Title"),eventType:Tt.string().required("Please select Task Type"),assignee:Tt.string().required("Please Select Assignee."),description:Tt.array().nullable().test("description","Please enter Description",function(e){return"<p></p>\n"!=e&&""!=e})}));return s.a.createElement("div",null,s.a.createElement("div",{className:"progress-div",style:{display:"none"}},s.a.createElement("div",{className:"progress-outer"},"Uploading...",s.a.createElement(hr.a,{animated:!0,now:20}))),s.a.createElement(Ct.d,{ref:this.myRef,validateOnBlur:!0,initialValues:t,enableReinitialize:!0,validationSchema:n,onSubmit:function(t,a){a.errors,a.setSubmitting;e.addTask(t)}},function(t){t.handleChange;var n,r=t.errors,l=t.values,o=t.handleBlur,i=t.setFieldValue,c=(t.submitForm,t.touched),m=(t.loginError,t.setErrors);return console.log(l),s.a.createElement(Ct.c,{className:"add-task-modal"},s.a.createElement(Ut.a,{className:"mx-0 task-title-row"},s.a.createElement(Yt.a,{className:"d-flex align-items-center"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Task Title")),s.a.createElement(Yt.a,{className:"col-auto task-schedule"},s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{className:"col-auto px-0 hide-991"},s.a.createElement("div",{className:"text-right"},s.a.createElement(x.a,{onClick:function(){return e.editTask(1)},variant:"transparent",className:"pl-0"},s.a.createElement(j.a,null)))))),s.a.createElement(Yt.a,{xs:"12",className:"task-head-name"},s.a.createElement(Ct.b,{name:"title",type:"text",className:"task-add-input form-control",placeholder:"Write task here",value:l.title,onChange:function(e){i("title",e.target.value)}}),s.a.createElement(Ct.a,{name:"title",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Ut.a,{className:"mx-0 mt-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Contingency"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"contingency",id:"",className:"form-control form-control-xs",value:l.contingency,onChange:function(t){i("contingency",t.target.value),e.getVariables(t.target.value)}},s.a.createElement("option",{value:""},"Select"),e.state.contingencies.map(function(e){return s.a.createElement("option",{key:e.name,value:e.name},e.name)}))),s.a.createElement(Ct.a,{name:"contingency",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-3"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Type"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"",id:"",value:l.eventType,className:"form-control form-control-xs",onChange:function(t){i("eventType",t.target.value),e.showTaskType(t.target.value)}},s.a.createElement("option",{value:"COMMUNICATION"},"Communication"),s.a.createElement("option",{value:"INTERACTIVE"},"Interactive"))),s.a.createElement(Ct.a,{name:"eventType",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"ml-3 mt-0"}),s.a.createElement(Ut.a,{className:"mx-0 mt-3 task-date-row"},s.a.createElement(Yt.a,{className:"pr-0 col-auto mb-3"},s.a.createElement("div",{className:"icon-wrapper blue-wrapper task-date"},s.a.createElement("div",{className:"react-bootstrap-daterangepicker-container"},s.a.createElement("div",{className:"date-label"},s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(Tn.a,null)),s.a.createElement("span",{className:"form-control-label"},"Due Date:")),void 0!=l.contingency&&""!=l.contingency?s.a.createElement(Cs.a,{selected:l.eventEndDate,onChange:function(t){return e.handleDateChange(t,"date",i,l)},minDate:new Date(e.props.transactionData.startDate||""),maxDate:new Date(e.state.contingencies.filter(function(e){return e.name==l.contingency})[0].endDate),dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker"}):s.a.createElement(Cs.a,{selected:l.eventEndDate>new Date(e.props.transactionData.startDate||"")?l.eventEndDate:new Date(e.props.transactionData.startDate||""),onChange:function(t){return e.handleDateChange(t,"date",i,l)},minDate:new Date(e.props.transactionData.startDate||""),maxDate:new Date(a),dateFormat:"MM-d-yyyy",className:"form-control form-control-sm pl-1 date-picker"}),s.a.createElement(Cs.a,{selected:l.eventEndDate,onChange:function(t){return e.handleDateChange(t,"time",i,l)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",className:"form-control form-control-sm pl-1"}))))),e.state.taskType?s.a.createElement("div",{style:{backgroundColor:"#f8f8f8"}},s.a.createElement(Ut.a,{className:"mx-0 bg-blue-5 py-2 mb-2"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-1"},"Communication Type"),s.a.createElement("div",{className:"form-group mb-0"},s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check1",value:"EMAIL",onChange:function(t){e.showText(t.target.value),e.clearCommunication(i,m),i("communicationType","EMAIL"),m({})},checked:"EMAIL"===l.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check1"},"Email")),s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check2",value:"TEXT",onChange:function(t){e.showText(t.target.value),e.clearCommunication(i,m),i("communicationType","TEXT"),m({})},checked:"TEXT"===l.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check2"},"Text"))),s.a.createElement(Ct.a,{name:"communicationType",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular"},s.a.createElement(Hs.b,{singleLine:!0,name:"communicationTo[0]",type:"text",value:l.communicationTo?l.communicationTo[0]:"",className:"mail-row-mension "+(r.communicationTo&&r.communicationTo[0]&&c.communicationTo&&c.communicationTo[0]?" is-invalid":""),onChange:function(e){i("communicationTo",[e.target.value])},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.showText?e.state.emailRefVar:e.state.textRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"communicationTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),e.state.showText?s.a.createElement("div",null,s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Subject")),s.a.createElement(Yt.a,{className:"mail-row-field-big"},s.a.createElement(Hs.b,{singleLine:!0,name:"communicationSubject[0]",type:"text",value:l.communicationSubject?l.communicationSubject[0]:"",className:"mail-row-mension "+(r.communicationSubject&&r.communicationSubject[0]&&c.communicationSubject&&c.communicationSubject[0]?" is-invalid":""),onChange:function(e){i("communicationSubject",[e.target.value])},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.AllRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"communicationSubject",component:"div",className:"invalid-feedback",style:{display:"block"}})))):"",s.a.createElement("hr",{className:"mt-2"}),s.a.createElement(Ut.a,{className:"mx-0 align-items-center pb-3"},e.state.showText?s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"description[0]",editorState:e.state.emailTextValForEditor,onEditorStateChange:function(t){var a=Fs()(Object(Bs.convertToRaw)(t.getCurrentContent())),n=Et()("<output>").append(Et.a.parseHTML(a));Et.a.map(n.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var s=n.html();i("description",[s]),e.setState({emailTextValForEditor:t})},hashtag:{}}))):s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Ct.b,{component:"textarea",name:"description[0]",className:"form-control font-14",rows:"4",value:l.description?l.description[0]:"",onChange:function(e){i("description",[e.target.value])}})),s.a.createElement(Ct.a,{name:"description",component:"div",className:"invalid-feedback",style:{display:"block"}}))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mb-2 bg-blue-5 py-2"},s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},s.a.createElement("input",(n={name:"docRequired",type:"checkbox",className:"custom-control-input",id:"docRequired"},Object(Nt.a)(n,"name","type"),Object(Nt.a)(n,"checked",l.document),Object(Nt.a)(n,"onChange",function(e){i("document",e.target.checked)}),n)),s.a.createElement("label",{className:"custom-control-label",htmlFor:"docRequired"},"Document upload required")))),s.a.createElement(Ut.a,{className:"mx-0 mail-row assign-var-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Assign to")),s.a.createElement(Yt.a,{className:"assign-var-select"},s.a.createElement(ws.a,{onBlur:o,fullWidth:!0,onChange:function(e){i("assignee",e.value)},value:{label:l.assignee,value:l.assignee},className:"react-select-wrapper react-select-multi",name:"assignee",options:e.state.assigneeOptions}),s.a.createElement(Ct.a,{name:"assignee",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,null,s.a.createElement("h5",{className:"font-14 color-blue-4"},"Detail"),s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"description[0]",editorState:e.state.detailsValForEditor,onEditorStateChange:function(t){var a=Fs()(Object(Bs.convertToRaw)(t.getCurrentContent())),n=Et()("<output>").append(Et.a.parseHTML(a));Et.a.map(n.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var s=n.html();i("description",[s]),e.setState({detailsValForEditor:t})},hashtag:{}})),s.a.createElement(Ct.a,{name:"description",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement("div",{style:{backgroundColor:"#f8f8f8",padding:"0px 15px 15px 15px"}},s.a.createElement(bn.a,{maxSize:1e8,accept:["image/*","application/pdf","application/msword"],onDrop:function(t){e.setFiles(t)}},function(e){var t=e.getRootProps,a=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",Object.assign({className:"dropzone-transaction drop-task"},t()),s.a.createElement("input",a()),s.a.createElement(Ps.a,null),s.a.createElement("p",null,s.a.createElement("strong",null,"Attach or Drop document here"))))})),e.state.acceptedFiles.map(function(t,a){return s.a.createElement(Ut.a,{className:"mx-0 align-items-center mt-3"},s.a.createElement(Yt.a,{className:"col-auto font-14 font-500"},t.name),s.a.createElement(x.a,{variant:"transparent",className:"comments-delete",onClick:function(){return e.deleteDocument(a)}},s.a.createElement(yn.a,null)))}),s.a.createElement(Ut.a,{className:"mx-0 py-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement(x.a,{type:"submit",size:"sm",className:"btn-blue w-140"},"Add Task"))))}),s.a.createElement(Wa.a,{show:this.state.DependencyModal,onHide:function(){return e.DependencyModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 dependency-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Set Dependency")),s.a.createElement(Wa.a.Body,null,s.a.createElement(Zs,null))))}}]),t}(s.a.Component),Er=Object(B.b)(function(e){return{taskData:e.reducer.taskData,variablesRefs:e.reducer.variablesRefs}},{getTaskDetailsAction:en,adminGetVarriableRefAction:Rn,createTaskAction:function(e){return function(t){return mt.postMethod(ct.transactionEvent,e,!0).then(function(e){return e._id,t({type:xe}),e})}},uploadDocumentAction:Xa,addDocAction:Qa,updateDocAction:Za,listDocAction:Ka,updateTaskAction:an})(fr),vr=a(1443),yr=a(1438),br=a(1428),Nr=a(649),Dr=a.n(Nr),kr=a(53),Tr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).addTask=function(e){window.innerWidth>991?a.setState({editTask:"",addTask:"open",taskId:""}):a.setState({OpenTaskAdd:!a.state.OpenTaskAdd})},a.state={addTask:"",editTask:"",show:!1,OpenTaskDetail:!1,OpenTaskAdd:!1,home:!0,radon:!1,hoa:!1,tasks:[],originalTasks:[],filteredTasks:[],searchedTasks:[],taskData:{},taskId:"",activeAccordion:[],taskFilter:s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"status-mark status-mark-grey"}),"All Tasks"),openTask:"",showLoader:!1,searchParam:"",filterParam:"all",userRole:localStorage.getItem("usertype").toUpperCase(),deleteId:"",deleteTaskModal:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"editTask",value:function(e){var t=this;this.setState({taskId:e,editTask:""},function(){window.innerWidth>991?t.setState({editTask:"open",addTask:""}):t.setState({OpenTaskDetail:!t.state.OpenTaskDetail})})}},{key:"setOpen",value:function(e){1==e&&this.setState({home:!this.state.home}),2==e&&this.setState({radon:!this.state.radon}),3==e&&this.setState({hoa:!this.state.hoa})}},{key:"formatTasks",value:function(e){var t=kr.groupBy(e,function(e){return e.contingency||"General"}),a=[],n=[];return Object.keys(t).forEach(function(e){var s={name:e,data:t[e],open:!1};a.push(s),n.push(!0)}),a.forEach(function(e){e.data=kr.sortBy(e.data,"eventEndDate")}),a.sort(function(e,t){return"General"==t.name?1:-1}),this.setState({activeAccordion:n}),a}},{key:"componentWillMount",value:function(){this.getAllTasks(),void 0!=this.props.history.location.taskId&&this.editTask(this.props.history.location.taskId)}},{key:"getAllTasks",value:function(e){var t=this;this.setState({showLoader:!0,addTask:""}),"VENDOR"===localStorage.getItem("usertype").toUpperCase()?"delete"==e?(window.innerWidth>991?this.setState({editTask:"",addTask:""}):this.setState({OpenTaskDetail:!1}),this.props.getVendorTasksAction(this.props.transactionId).then(function(e){t.setState({tasks:t.formatTasks(t.props.vendorTasks.data),originalTasks:t.props.vendorTasks.data,filteredTasks:t.props.vendorTasks.data,showLoader:!1})})):this.props.getVendorTasksAction(this.props.transactionId).then(function(e){t.setState({tasks:t.formatTasks(t.props.vendorTasks.data),originalTasks:t.props.vendorTasks.data,filteredTasks:t.props.vendorTasks.data,showLoader:!1})}):"BUYER"===localStorage.getItem("usertype").toUpperCase()?this.props.getBuyerTasksAction(this.props.transactionId).then(function(e){t.setState({tasks:t.formatTasks(t.props.buyerTasks.data),originalTasks:t.props.buyerTasks.data,filteredTasks:t.props.buyerTasks.data,showLoader:!1})}):"delete"==e?(window.innerWidth>991?this.setState({editTask:"",addTask:""}):this.setState({OpenTaskDetail:!1}),this.props.getAllTasksAction(this.props.transactionId).then(function(e){t.setState({tasks:t.formatTasks(t.props.tasks.data),originalTasks:t.props.tasks.data,filteredTasks:t.props.tasks.data,showLoader:!1})})):this.props.getAllTasksAction(this.props.transactionId).then(function(e){t.setState({tasks:t.formatTasks(t.props.tasks.data),originalTasks:t.props.tasks.data,filteredTasks:t.props.tasks.data,showLoader:!1})})}},{key:"toggleAccordion",value:function(e){var t=this.state.activeAccordion;t[e]=1!=t[e],this.setState({activeAccordion:t})}},{key:"renderCollapse",value:function(e,t){var a=this;return s.a.createElement(pr.a.Collapse,{eventKey:t},s.a.createElement("div",null,e.map(function(e,t){return s.a.createElement(Ut.a,{key:"ts"+t,className:a.state.taskId==e._id?"mx-0 align-items-center task-row active":"mx-0 align-items-center task-row"},s.a.createElement(Yt.a,{className:"col-auto task-status-col"},e.overDue?s.a.createElement("span",{className:"task-status task-status-orange"}):s.a.createElement(s.a.Fragment,null,"SCHEDULED"==e.status&&s.a.createElement("span",{className:"task-status task-status-blue"}),"COMPLETED"==e.status&&s.a.createElement("span",{className:"task-status task-status-green"}))),s.a.createElement(Yt.a,{className:"task-name-col",onClick:function(){return a.editTask(e._id)}},s.a.createElement("div",{className:"task-name"},e.title),s.a.createElement("div",{className:"task-date"},s.a.createElement("em",null,"Due date: ",Gt()(e.eventEndDate).format("MM/DD/YYYY hh:mm a")))),"VENDOR"===a.state.userRole||"BUYER"===a.state.userRole?"":s.a.createElement(Yt.a,{className:"col-auto px-0 task-action-col"},s.a.createElement(M.a,{alignRight:!0,className:"task-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){a.deleteModal(e._id)}},"Delete task")))))})))}},{key:"changeTaskFilter",value:function(e){var t=this,a=this.state.originalTasks,n=s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"status-mark status-mark-grey"})," All Tasks");"scheduled"==e&&(n=s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"status-mark status-mark-blue"}),"Scheduled Tasks"),a=a.filter(function(t){return t.status.toLowerCase()==e&&0==t.overDue})),"overdue"==e&&(n=s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"status-mark status-mark-orange"}),"Overdue Tasks"),a=a.filter(function(e){return e.overDue})),"completed"==e&&(n=s.a.createElement(s.a.Fragment,null," ",s.a.createElement("span",{className:"status-mark status-mark-green"}),"Completed Tasks"),a=a.filter(function(t){return(t.status+"").toLowerCase()==e&&0==t.overDue})),"all"==e&&(a=this.state.originalTasks),a=a.filter(function(e){return e.title.toLowerCase().includes(t.state.searchParam.trim().toLowerCase())}),this.setState({taskFilter:n,tasks:this.formatTasks(a),filteredTasks:a,filterParam:e})}},{key:"searchTasks",value:function(e){var t=this,a=this.state.originalTasks,n=[];"scheduled"==this.state.filterParam&&(n=a.filter(function(e){return e.status.toLowerCase()==t.state.filterParam&&0==e.overDue})),"overdue"==this.state.filterParam&&(n=a.filter(function(e){return e.overDue})),"completed"==this.state.filterParam&&(n=a.filter(function(e){return(e.status+"").toLowerCase()==t.state.filterParam&&0==e.overDue})),"all"==this.state.filterParam&&(n=this.state.originalTasks),a=n.filter(function(t){return t.title.toLowerCase().includes(e.trim().toLowerCase())}),this.setState({searchParam:e,tasks:this.formatTasks(a),searchedTasks:a})}},{key:"deleteTask",value:function(e){var t=this;this.setState({deleteTaskModal:!1}),this.props.deleteTaskAction(e).then(function(e){t.getAllTasks("delete")})}},{key:"deleteModal",value:function(e){this.setState({deleteId:e,deleteTaskModal:!0})}},{key:"updateTasks",value:function(e){"update"==e?this.getAllTasks():this.setState({addTask:"",editTask:"",taskId:""})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null," ",this.state.showLoader?s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"task-page"},"VENDOR"===this.state.userRole||"BUYER"===this.state.userRole?"":s.a.createElement(Ut.a,{className:"mx-0 px-0 page-head-row page-head-row-inner align-items-center mt-10"},s.a.createElement(Yt.a,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-head",onClick:function(){return e.addTask()}}," + Add Task"))),s.a.createElement("div",{className:"VENDOR"===this.state.userRole||"BUYER"===this.state.userRole?"task-block task-block-vendor":"task-block"},s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,{className:"px-0"},s.a.createElement(Ut.a,{className:"mx-0 py-1 align-items-center page-head-row-small task-search"},s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"icon-wrapper"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search by Name",onChange:function(t){e.searchTasks(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{className:"col-auto",align:"right"},s.a.createElement(M.a,{alignRight:!0},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0 d-flex align-items-center"},this.state.taskFilter),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){e.changeTaskFilter("all")}},s.a.createElement("span",{className:"status-mark status-mark-grey"}),"All Tasks"),s.a.createElement(M.a.Item,{onClick:function(){e.changeTaskFilter("scheduled")}},s.a.createElement("span",{className:"status-mark status-mark-blue"}),"Scheduled Tasks"),s.a.createElement(M.a.Item,{onClick:function(){e.changeTaskFilter("overdue")}},s.a.createElement("span",{className:"status-mark status-mark-orange"}),"Overdue Tasks"),s.a.createElement(M.a.Item,{onClick:function(){e.changeTaskFilter("completed")}},s.a.createElement("span",{className:"status-mark status-mark-green"}),"Completed Tasks"))))),s.a.createElement("div",{className:"task-content"},this.state.tasks.length<=0&&""==this.state.addTask&&s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No task found"))),this.state.tasks.map(function(t,a){return s.a.createElement(vr.a,{defaultExpanded:!0,className:"task-combo"},s.a.createElement(yr.a,{expandIcon:s.a.createElement(Dr.a,null),"aria-controls":"panel1a-content",className:"task-row task-accordion card-header",id:"panel1a-header"},s.a.createElement("span",null),t.name),s.a.createElement(br.a,{className:"task-row-detail"},s.a.createElement("div",{className:"task-row-group"},t.data.map(function(t,a){return s.a.createElement(Ut.a,{key:"ts"+a,className:e.state.taskId==t._id?"mx-0 align-items-center task-row active":"mx-0 align-items-center task-row"},s.a.createElement(Yt.a,{className:"col-auto task-status-col"},"COMPLETED"==t.status?s.a.createElement("span",{className:"task-status task-status-green"}):s.a.createElement(s.a.Fragment,null,t.overDue?s.a.createElement("span",{className:"task-status task-status-orange"}):s.a.createElement(s.a.Fragment,null,"SCHEDULED"==t.status&&s.a.createElement("span",{className:"task-status task-status-blue"})))),s.a.createElement(Yt.a,{className:"task-name-col",onClick:function(){return e.editTask(t._id)}},s.a.createElement("div",{className:"task-name"},t.title),s.a.createElement("div",{className:"task-date"},s.a.createElement("em",null,"Due date: ",Gt()(t.eventEndDate).format("MM/DD/YYYY hh:mm a")))),"VENDOR"===e.state.userRole?"":s.a.createElement(Yt.a,{className:"col-auto px-0 task-action-col"},s.a.createElement(M.a,{alignRight:!0,className:"task-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,"VENDOR"===e.state.userRole||"BUYER"===e.state.userRole?"":s.a.createElement(M.a.Item,{onClick:function(){e.deleteModal(t._id)}},"Delete task")))))}))))}))),s.a.createElement(Yt.a,{className:"px-0 col-auto"},s.a.createElement("div",{className:this.state.editTask+" task-single calendar-add-task"},"open"==this.state.editTask&&s.a.createElement($s,{taskId:this.state.taskId,transactionData:this.props.transactionData,deleteTask:function(t){e.deleteModal(t)},onUpdate:function(t){return e.updateTasks(t)}})),s.a.createElement("div",{className:this.state.addTask+" task-single calendar-add-task"},"open"==this.state.addTask&&s.a.createElement(Er,{onUpdate:function(t){return e.updateTasks(t)},taskId:this.state.taskId,transactionData:this.props.transactionData})))),s.a.createElement(Wa.a,{show:this.state.OpenTaskDetail,onHide:function(){return e.editTask()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-view-page task-mobile-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0}),s.a.createElement(Wa.a.Body,null,s.a.createElement($s,{taskId:this.state.taskId,transactionData:this.props.transactionData,deleteTask:function(t){e.deleteModal(t)},onUpdate:function(t){return e.updateTasks(t)}}))),s.a.createElement(Wa.a,{show:this.state.OpenTaskAdd,onHide:function(){return e.addTask()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-view-page task-mobile-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0}),s.a.createElement(Wa.a.Body,null,s.a.createElement(Er,{onUpdate:function(t){return e.updateTasks(t)},taskId:this.state.taskId,transactionData:this.props.transactionData}))),s.a.createElement(Wa.a,{show:this.state.deleteTaskModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,"Are you sure you want to delete?")),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({deleteTaskModal:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.deleteTask(e.state.deleteId)}},"Yes")))))))}}]),t}(s.a.Component),Cr=Object(B.b)(function(e){return{tasks:e.reducer.tasks,vendorTasks:e.reducer.vendorTasks,buyerTasks:e.reducer.buyerTasks}},{getAllTasksAction:$a,getTaskDetailsAction:en,deleteTaskAction:tn,getVendorTasksAction:function(e){var t=localStorage.getItem("ID"),a=ct.vendorTasksUrl;return a=(a=a.replace("{transactionId}",e)).replace("{vendorId}",t),function(e){return mt.getMethod(a,!0).then(function(t){200==t.status?e({type:Ze,vendorTasks:t.data}):e({type:Ze,vendorTasks:[]})})}},getBuyerTasksAction:function(e){var t=ct.buyerTasksUrl+e;return function(e){return mt.getMethod(t,!0).then(function(t){200==t.status?e({type:et,buyerTasks:t.data}):e({type:et,buyerTasks:[]})})}}})(Tr),wr=new Date,Ar=wr.getMonth()+1+"/"+wr.getDate()+"/"+wr.getFullYear(),Sr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={allTransdata:[],propertyDataInfo:{},ownerId:"",userRole:localStorage.getItem("usertype").toUpperCase(),transStatus:"SCHEDULED",startTransaction:!1,promptMsg:"",initialValues:{startDate:"",closeDate:""},chanedSts:"SCHEDULED",showStartDate:!0,showCloseDate:!0,campaignStyle:[],updated:!1,activeKey:"first"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.transId;this.props.getTransactionDataAction(t).then(function(t){if(void 0!==e.props.transactionData&&null!==e.props.transactionData){var a={startDate:e.props.transactionData.startDate,closeDate:e.props.transactionData.endDate};e.setState({allTransdata:e.props.transactionData,propertyDataInfo:e.props.transactionData.property||{},ownerId:e.props.transactionData.ownerId,transStatus:e.props.transactionData.status,initialValues:a},function(){void 0!=e.props.history.location.taskId&&(console.log("in here"),e.setState({activeKey:"second"}))})}}),this.props.getBuyerAgentMasterTemplateAction().then(function(t){e.setState({campaignStyle:e.props.buyerMasterTemplates})})}},{key:"changeTransactionStatus",value:function(e){var t=this,a=this.props.match.params.transId,n={status:this.state.chanedSts};n.startDate=new Date(e.startDate),n.endDate=new Date(e.closeDate),this.props.changeTransactionStatusAction(a,n).then(function(e){t.props.getTransactionDataAction(a).then(function(e){if(void 0!==t.props.transactionData&&null!==t.props.transactionData){var a={startDate:t.props.transactionData.startDate,closeDate:t.props.transactionData.endDate};t.setState({allTransdata:e,propertyDataInfo:t.props.transactionData.property||{},ownerId:t.props.transactionData.ownerId,transStatus:t.props.transactionData.status,initialValues:a,promptMsg:"",startTransaction:!1,updated:!0})}})})}},{key:"openConfirmPopup",value:function(e){var t="";"start"===e&&(t="Please confirm the new start date & closing date",this.setState({showStartDate:!0,showCloseDate:!0,chanedSts:"INPROGRESS"})),"resume"===e&&(t="Please select the new closing date",this.setState({showStartDate:!1,showCloseDate:!0,chanedSts:"INPROGRESS"})),"pause"===e&&(t="All the pending tasks will be stopped and the transaction will be marked as Paused, Are you sure want to continue?",this.setState({showStartDate:!1,showCloseDate:!1,chanedSts:"PAUSED"})),"cancel"===e&&(t="All the pending tasks will be marked as cancled. Are you sure want to continue?",this.setState({showStartDate:!1,showCloseDate:!1,chanedSts:"CANCELED"})),""!==t&&this.setState({promptMsg:t,startTransaction:!0})}},{key:"closeConfirmPopup",value:function(){this.setState({promptMsg:"",startTransaction:!1})}},{key:"gotoUserProfile",value:function(e){this.props.history.push("/UserProfile/"+e.ownerId)}},{key:"render",value:function(){var e=this,t=this.props.match.params.transId,a="";if(void 0!==this.state.propertyDataInfo){var n=this.state.propertyDataInfo.image;void 0!==n&&n.length>0&&(a=this.state.propertyDataInfo.image[0])}var r="";return"BUYER"!==this.state.userRole&&("SCHEDULED"===this.state.transStatus&&(r=s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.openConfirmPopup("start")},className:"switch-button py-0"},s.a.createElement("span",null,"Start")," ",s.a.createElement(ls.a,null))),"INPROGRESS"===this.state.transStatus&&(r=s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.openConfirmPopup("pause")},className:"switch-button py-0"}," ",s.a.createElement("span",null,"Pause")," ",s.a.createElement(os.a,null))),"PAUSED"===this.state.transStatus&&(r=s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.openConfirmPopup("resume")},className:"switch-button py-0"}," ",s.a.createElement("span",null,"Resume")," ",s.a.createElement(is.a,null))),"CANCELED"===this.state.transStatus&&(r=s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.openConfirmPopup("start")},className:"switch-button py-0"},s.a.createElement("span",null,"Start")," ",s.a.createElement(ls.a,null)))),s.a.createElement("div",null,s.a.createElement(cs.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",activeKey:this.state.activeKey,onSelect:function(t){e.props.history.location.taskId=void 0,e.setState({activeKey:t})},mountOnEnter:!0,unmountOnExit:!0},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,{xs:"12",sm:"3"},s.a.createElement("div",{className:"trans-combo align-items-center"},s.a.createElement("div",{className:"trans-img"},s.a.createElement("img",{src:""!=a?ct.AdminCreateTransactionUrl+"/upload?id="+this.state.ownerId+"&img="+a:Na.a,alt:""})),s.a.createElement("div",{className:"trans-info"},s.a.createElement("h5",null,this.state.propertyDataInfo.street+(""!==this.state.propertyDataInfo.street1?" "+this.state.propertyDataInfo.street1:"")),s.a.createElement("p",null,this.state.propertyDataInfo.city+", "+this.state.propertyDataInfo.state+" "+this.state.propertyDataInfo.zipcode),"BUYER"==this.state.userRole?s.a.createElement("p",null,"Buyer Agent:",s.a.createElement("span",{className:"color-dark-blue font-500 c-pointer text-capitalize",onClick:function(){return e.gotoUserProfile(e.state)}}," "+this.state.allTransdata.buyerAgentFirstname+" "+this.state.allTransdata.buyerAgentLastName)):""))),"VENDOR"!==this.state.userRole?s.a.createElement(Yt.a,{xs:"12",sm:"6"},"BUYER"===this.state.userRole?s.a.createElement(f.a,{className:"justify-content-center align-items-end trans-tabs"},s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"first"},"Transaction Detail")),s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"second"},"Task")),s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"fifth"},"Document"))):s.a.createElement(f.a,{className:"justify-content-center align-items-end trans-tabs"},s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"first"},"Transaction Detail")),s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"second"},"Task")),s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(f.a.Link,{eventKey:"third"},"Timeline")),s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"fifth"},"Document")),s.a.createElement(f.a.Item,{className:"hide-767"},s.a.createElement(f.a.Link,{eventKey:"sixth"},"Activity")))):"","VENDOR"===this.state.userRole?s.a.createElement(Yt.a,{xs:"12",sm:"6"},s.a.createElement(f.a,{className:"justify-content-center align-items-end trans-tabs"},s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"first"},"Task")),s.a.createElement(f.a.Item,null,s.a.createElement(f.a.Link,{eventKey:"second"},"Document")))):"",s.a.createElement(Yt.a,{xs:"12",sm:"3"},s.a.createElement("div",{className:"d-flex justify-content-end align-items-center switch-div"},s.a.createElement("div",null,"VENDOR"===this.state.userRole||"BUYER"===this.state.userRole?"":s.a.createElement("div",null,r)),s.a.createElement(p.b,{to:"/transactions",className:"nav-link p-0 color-black sep-left"},s.a.createElement(j.a,{style:{stroke:"#fff",height:"40px",width:"40px"}}))))),s.a.createElement("div",{className:"trans-tab-content"},"VENDOR"===this.state.userRole?s.a.createElement(cs.a.Content,null,s.a.createElement(cs.a.Pane,{eventKey:"first"},s.a.createElement(Cr,{transactionId:t,history:this.props.history,transactionData:this.state.allTransdata})),s.a.createElement(cs.a.Pane,{eventKey:"second"},s.a.createElement(Ns,{transactionId:t}))):s.a.createElement(cs.a.Content,null,s.a.createElement(cs.a.Pane,{eventKey:"first"},s.a.createElement(ur,{transactionId:t,isDataUpdate:function(t){return e.setState({propertyDataInfo:t})},isTransactionUpdate:function(t){return e.setState({allTransdata:t})},setTransSts:function(t){return e.setState({transStatus:t})},transStatus:this.state.transStatus,updatedData:this.state.allTransdata,updated:this.state.updated})),s.a.createElement(cs.a.Pane,{eventKey:"second"},s.a.createElement(Cr,{transactionId:t,history:this.props.history,transactionData:this.state.allTransdata})),s.a.createElement(cs.a.Pane,{eventKey:"third",transactionId:t},s.a.createElement(tr,{transactionId:t,transactionData:this.state.allTransdata})),s.a.createElement(cs.a.Pane,{eventKey:"fifth"},s.a.createElement(Ns,{transactionId:t})),s.a.createElement(cs.a.Pane,{eventKey:"sixth"},s.a.createElement(xs,{transactionId:t,transactionData:this.state.allTransdata}))))),s.a.createElement(Wa.a,{show:this.state.startTransaction,onHide:function(){return e.closeConfirmPopup()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValues,enableReinitialize:!0,validationSchema:Tt.object().shape({}),onSubmit:function(t,a){a.setSubmitting;e.changeTransactionStatus(t)}},function(t){t.handleChange,t.errors;var a=t.values,n=(t.handleBlur,t.setFieldValue);t.submitForm,t.touched,t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Update Transaction")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement("div",null,s.a.createElement("p",{className:"font-20 color-black mb-2"},e.state.promptMsg)),e.state.showStartDate&&e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Start Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.startDate),onEvent:function(t,a){n("startDate",a.startDate.format("YYYY-MM-DD"));for(var s=e.state.allTransdata.campaign,r=0,l=0,o=e.state.campaignStyle.length;l<o;l++){var i=e.state.campaignStyle[l];i._id===s&&(r=i.campaignDays)}var c=a.startDate.subtract(-r,"days");n("closeDate",c.format("YYYY-MM-DD"))},minDate:Ar},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.startDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Expected Closing Date",s.a.createElement("span",{className:"text-danger"},"*"),"\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.closeDate),onEvent:function(e,t){n("closeDate",t.startDate.format("YYYY-MM-DD"))},minDate:Gt()(a.startDate)},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.closeDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),e.state.showStartDate&&!e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Start Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.startDate),onEvent:function(e,t){n("startDate",t.startDate.format("YYYY-MM-DD"))},minDate:Ar},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.startDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),!e.state.showStartDate&&e.state.showCloseDate&&s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"form-label",htmlFor:"emd"},"Expected Closing Date",s.a.createElement("span",{className:"text-danger"},"*"),"\u200b\u200b\u200b\u200b\u200b\u200b\u200b"),s.a.createElement(Lt.a,{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:Gt()(a.closeDate),onEvent:function(e,t){n("closeDate",t.startDate.format("YYYY-MM-DD"))}},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"MM/DD/YYYY",value:Gt()(a.closeDate).format("MM/DD/YYYY")}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null)))))))),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){return e.closeConfirmPopup()}},"Cancel"),s.a.createElement(x.a,{type:"submit",variant:"primary",className:"btn-blue w-140"},"Yes")))})))}}]),t}(s.a.Component),Ir=Object(B.b)(function(e){return{buyerMasterTemplates:e.reducer.buyerMasterTemplates,transactionData:e.reducer.transactionData,transactionStatus:e.reducer.transactionStatus}},{getTransactionDataAction:Ja,changeTransactionStatusAction:nn,getBuyerAgentMasterTemplateAction:$n})(Sr),xr=a(1432),Mr=a(406),Or=a.n(Mr),Rr=(a(1317),Or.a.momentLocalizer(Gt.a)),jr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggleTask=function(e){0==e?a.setState({addTask:"open"}):a.setState({addTask:""})},a.setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.state={events:[],alert:null,addTask:"",startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),viewTask:!1,viewState:"month",taskId:"",transactionData:{},showLoader:!1},a.hideAlert=a.hideAlert.bind(Object(Rt.a)(a)),a.formats={eventTimeRangeFormat:function(){return""}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"selectedEvent",value:function(e){var t=this;console.log(e),this.props.getTransactionDataAction(e.transactionId).then(function(a){a&&t.setState({viewTask:!t.state.viewTask,transactionData:a,taskId:e._id})})}},{key:"loadCalendarEvents",value:function(){var e=this;this.setState({showLoader:!0}),this.props.getAllCalendarEventsAction().then(function(t){var a=[];t&&(t.forEach(function(e){e.forEach(function(e){var t="blue";"SCHEDULED"==e.status?t="blue":"COMPLETED"==e.status&&(t="green"),Gt()(e.eventEndDate)<Gt()()&&(t="orange"),a.push({title:Gt()(e.eventEndDate).format("h:mm A, ")+e.title,allDay:!1,start:new Date(Gt()(e.eventEndDate).get("year"),Gt()(e.eventEndDate).get("month"),Gt()(e.eventEndDate).get("date"),Gt()(e.eventEndDate).get("hour"),Gt()(e.eventEndDate).get("minutes")),end:new Date(Gt()(e.eventEndDate).get("year"),Gt()(e.eventEndDate).get("month"),Gt()(e.eventEndDate).get("date"),Gt()(e.eventEndDate).get("hour"),Gt()(e.eventEndDate).get("minutes")),color:t,_id:e._id,transactionId:e.transactionId})})}),e.setState({events:a,showLoader:!1}))},function(t){e.setState({showLoader:!1})})}},{key:"addNewEventAlert",value:function(e){console.log(e),this.toggleTask(0)}},{key:"addNewEvent",value:function(e,t){var a=this.state.events;a.push({title:e,start:t.start,end:t.end}),this.setState({alert:null,events:a})}},{key:"hideAlert",value:function(){this.setState({alert:null})}},{key:"deleteTask",value:function(e){var t=this;this.setState({viewTask:!1}),this.props.deleteTaskAction(e).then(function(e){t.loadCalendarEvents()})}},{key:"eventColors",value:function(e,t,a,n){var s="event-";return e.color?s+=e.color:s+="default",{className:s}}},{key:"componentWillMount",value:function(){this.loadCalendarEvents()}},{key:"changeView",value:function(e,t){t.onView(e),this.setState({viewState:e})}},{key:"render",value:function(){var e=this;this.state.startDate.format("MM/DD/YYYY"),this.state.closeDate.format("MM/DD/YYYY");return s.a.createElement(s.a.Fragment,null,this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement("div",{className:"calendar-page"},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{class:"title-med mt-0 pt-1"},"Calendar")),s.a.createElement(Yt.a,{align:"right"},s.a.createElement("ul",{className:"list-inline status-mark-list mb-0 font-12"},s.a.createElement("li",{className:"status-mark-text d-inline-flex align-items-center mr-2"},s.a.createElement("span",{className:"status-mark status-mark-blue"}),"Scheduled Tasks"),s.a.createElement("li",{className:"status-mark-text d-inline-flex align-items-center mr-2"},s.a.createElement("span",{className:"status-mark status-mark-orange"}),"Overdue Tasks"),s.a.createElement("li",{className:"status-mark-text d-inline-flex align-items-center mr-2"},s.a.createElement("span",{className:"status-mark status-mark-green"}),"Completed Tasks")))),s.a.createElement("div",{className:"admin-content-area mt-10"},s.a.createElement(Or.a,{views:["day","week","month"],localizer:Rr,selectable:!0,components:{toolbar:function(t){return s.a.createElement("div",{className:"rbc-calendar"},s.a.createElement("div",{className:"rbc-toolbar d-block"},s.a.createElement(Ut.a,{className:"justify-content-between align-items-center"},s.a.createElement(Yt.a,{xs:12,sm:4},s.a.createElement("span",{className:"rbc-btn-group d-flex"},s.a.createElement("button",{type:"button",onClick:function(){t.onNavigate("TODAY")}},"Today"),s.a.createElement("div",{className:"icon-wrapper ml-2"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Transaction list"}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null))))),s.a.createElement(Yt.a,{xs:12,sm:4,className:"px-0"},s.a.createElement("span",{className:"rbc-toolbar-label"},s.a.createElement("button",{type:"button",onClick:function(){t.onNavigate("PREV")}},s.a.createElement(xr.a,null)),(Gt()(t.date),console.log(t),s.a.createElement("span",null,t.label)),s.a.createElement("button",{type:"button",onClick:function(){t.onNavigate("NEXT")}},s.a.createElement(ds.a,null)))),s.a.createElement(Yt.a,{xs:12,sm:4,align:"right"},s.a.createElement("span",{className:"rbc-btn-group cal-view"},s.a.createElement("button",{type:"button",className:"day"==e.state.viewState&&"rbc-active",onClick:function(){return e.changeView("day",t)}},"Day"),s.a.createElement("button",{type:"button",className:"week"==e.state.viewState&&"rbc-active",onClick:function(){return e.changeView("week",t)}},"Week"),s.a.createElement("button",{type:"button",className:"month"==e.state.viewState&&"rbc-active",onClick:function(){return e.changeView("month",t)}},"Month"))))))}},events:this.state.events,defaultView:"month",scrollToTime:new Date(1970,1,1,6),defaultDate:new Date,onSelectEvent:function(t){return e.selectedEvent(t)},onSelectSlot:function(t){return e.addNewEventAlert(t)},tooltipAccessor:function(e){return e.title},eventPropGetter:this.eventColors}),s.a.createElement("div",{className:(this.state.viewTask&&"open")+" calendar-add-task task-single cal-task-slide"},this.state.viewTask&&s.a.createElement($s,{taskId:this.state.taskId,deleteTask:function(t){e.deleteTask(t)},onUpdate:function(t){e.loadCalendarEvents()},transactionData:this.state.transactionData,fromTimeline:!0,closeDetailsModal:function(){e.setState({viewTask:!1})}})))))}}]),t}(s.a.Component),Ur=Object(B.b)(function(e){return{taskData:e.reducer.taskData}},{getAllCalendarEventsAction:function(){return function(e){return mt.getMethod(ct.listAllCalendarEvents,!0).then(function(t){return 200==t.status?(e({type:tt,events:t.data}),t.data):(e({type:tt,events:[]}),[])})}},getTransactionDataAction:Ja,deleteTaskAction:tn})(jr),Yr=a(1433),Lr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={page:0,isEmailValid:!1,contact:{role:"Home Inspector",usertype:"VENDOR",firstname:"admin",lastname:"admin",mobileNumber:1234567890,email:"mai@fsd.co",showLoader:!1}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserRolesAction(),this.props.getContactByIdAction(this.props.contactData.id)}},{key:"next",value:function(){this.setState({page:1})}},{key:"addContact",value:function(e){var t=this;this.setState({showLoader:!0});var a={roles:e.roles,default:e.default};"other"==e.roles[0]?this.props.addUserRolesAction(e.other).then(function(e){a.roles=e._id,t.props.editContactAction(a,t.props.contact.contactId).then(function(e){t.setState({showLoader:!1}),t.props.onClose()})}):this.props.editContactAction(a,this.props.contact.contactId).then(function(e){t.setState({showLoader:!1}),t.props.onClose()})}},{key:"setFieldValue",value:function(e,t){var a=this.state.contact;a[e]=t,this.setState({contact:a})}},{key:"render",value:function(){var e=this;this.props.contact;return s.a.createElement("div",null,this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(Wa.a.Body,null,s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.props.contact,enableReinitialize:!0,validationSchema:Tt.object().shape({role:Tt.array().of(Tt.string().trim().required("Vendor Type is required."))}),onSubmit:function(t){console.log(t),e.addContact(t)}},function(t){var a=t.handleChange,n=t.values,r=(t.errors,t.setFieldValue);return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Email ID"),s.a.createElement(Ct.b,{type:"email",className:"form-control",name:"email",value:n.email,disabled:!0,handleChange:a})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Select Vendor Type",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{className:"form-control",name:"role[0]",value:n.roles?n.roles[0]:"",onChange:function(e){r("roles[0]",e.target.value)}},s.a.createElement("option",{value:""},"Select"),e.props.roles&&e.props.roles.map(function(e){return s.a.createElement("option",{value:e._id},e.name)}),s.a.createElement("option",{value:"other"},"Other"))),s.a.createElement(Ct.a,{name:"roles[0]",component:"div",className:"invalid-feedback",style:{display:"block"}})),n.roles&&"other"==n.roles[0]&&s.a.createElement("div",{className:"form-group"},s.a.createElement(Ct.b,{type:"text",name:"other",className:"form-control",placeholder:"Enter Custom type",required:!0,handleChange:a}))),s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},s.a.createElement("input",{type:"checkbox",name:"DefaultVendor",className:"custom-control-input",id:"DefaultVendor",checked:n.default,onChange:function(e){r("default",e.target.checked)},style:{marginLeft:"10px"}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"DefaultVendor"},"Default Vendor"))),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"First Name"),s.a.createElement(Ct.b,{type:"text",name:"firstname",className:"form-control",value:n.firstname,disabled:!0,handleChange:a})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Last Name"),s.a.createElement(Ct.b,{type:"text",name:"lastname",className:"form-control",value:n.lastname,disabled:!0,handleChange:a})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Phone No."),s.a.createElement(Ct.b,{type:"number",name:"mobileNumber",className:"form-control",value:n.mobileNumber,disabled:!0,handleChange:a})),s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",type:"submit"},"Update"))})),s.a.createElement(Wa.a.Footer,null))}}]),t}(s.a.Component),Pr=Object(B.b)(function(e){return{contactResponse:e.reducer.contactResponse,contact:e.reducer.contact,roles:e.reducer.roles}},{editContactAction:function(e,t){return function(a){return mt.putMethod(ct.addContact+"?id="+t,e,!0).then(function(e){return e.status,a({type:ge,contactResponse:e}),e.data})}},getContactByIdAction:function(e){return function(t){return mt.getMethod(ct.addContact+"?id="+e,!0).then(function(e){t(e?{type:pe,contact:e.data[0]}:{type:pe,contact:{}})})}},getUserRolesAction:pt,addUserRolesAction:ht})(Lr),Br=a(650),Vr=a.n(Br),Fr=a(53),_r=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={categories:[],show:!1,showEdit:!1,filtered:!1,showLoader:!1,searchParam:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setOpen",value:function(e){var t=this.state.categories;t[e].open=!t[e].open,this.setState({categories:t})}},{key:"setModalOpen",value:function(){this.setState({show:!this.state.show})}},{key:"edit",value:function(e){this.setState({showEdit:!this.state.showEdit,contactData:{id:e}})}},{key:"delete",value:function(e){var t=this;this.props.deleteContactAction(e).then(function(e){t.getAllContacts()})}},{key:"setAsDefault",value:function(e,t,a){var n,s=this,r=this.state.categories;r[e].data.forEach(function(e,s){e._id==t._id?(e.default=a,n=e):e.default=!1}),this.props.editSetAsDefaultContactAction(n,t.contactId).then(function(e){s.props.getContactsActions(),s.setState({categories:r})})}},{key:"componentWillMount",value:function(){this.getAllContacts()}},{key:"getAllContacts",value:function(){var e=this;this.setState({showLoader:!0,searchParam:""}),this.props.getContactsActions().then(function(t){var a={},n=e.props.contacts;e.props.getUserRolesAction().then(function(t){if(t){a=Fr.groupBy(n,function(e){return e.roles?e.roles[0]:""});var s={};Object.keys(a).forEach(function(e){var t={data:Fr.sortBy(a[e],"firstname"),open:!0};s[e]=t});var r={};Object.keys(s).sort(function(t,a){return(Fr.find(e.props.roles,function(e){return e._id==t})||{}).name>(Fr.find(e.props.roles,function(e){return e._id==a})||{}).name?1:-1}).forEach(function(e){r[e]=s[e]}),e.setState({categories:r,showLoader:!1})}else e.setState({categories:[],showLoader:!1})})},function(t){e.setState({categories:[],showLoader:!1})})}},{key:"handleOnClose",value:function(){this.setModalOpen(),this.getAllContacts()}},{key:"closeEdit",value:function(){this.setState({showEdit:!this.state.showEdit}),this.getAllContacts()}},{key:"search",value:function(e){var t=this,a=this.props.contacts,n=Fr.groupBy(a,function(e){return e.roles}),s={};Object.keys(n).forEach(function(e){var t={data:Fr.sortBy(n[e],"firstname"),open:!0};n[e]=t}),Object.keys(n).forEach(function(t){n[t].data=n[t].data.filter(function(t){return t.firstname.toLowerCase().includes(e.toLowerCase())||t.lastname.toLowerCase().includes(e.toLowerCase())}),n[t].data.length>0&&(s[t]=n[t])});var r={};Object.keys(s).sort(function(e,a){return Fr.find(t.props.roles,function(t){return t._id==e}).name>Fr.find(t.props.roles,function(e){return e._id==a}).name?1:-1}).forEach(function(e){r[e]=s[e]}),this.setState({filtered:!0,categories:r,searchParam:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"contact-page assign-vendor-step"},this.state.showLoader?s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))):s.a.createElement(s.a.Fragment,null,Object.keys(this.state.categories).length<=0&&0==this.state.filtered?s.a.createElement("div",{className:"container-custom admin-content-area no-data-container"},s.a.createElement("div",{className:"no-transaction no-contact"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("p",{className:"color-grey-2"},"No Contacts Found"),s.a.createElement("img",{src:Vr.a,className:"no-transaction-content",alt:""}),s.a.createElement("h2",{className:"no-transaction-content"},"Manage your Contact"),s.a.createElement("p",{className:"no-transaction-content color-grey-1"},"Want to assign new contact with your transaction,",s.a.createElement("br",null),' click on "Add new contact"'),s.a.createElement(x.a,{className:"text-uppercase btn-orange btn-orange-lg",onClick:function(){e.setModalOpen()}},"add new contact")))):s.a.createElement(s.a.Fragment,null,s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-inner align-items-center mt-10"},s.a.createElement(Yt.a,{xs:"4"},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},"Contacts")),s.a.createElement(Yt.a,{className:"contact-search"},s.a.createElement("div",{className:"icon-wrapper"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",value:this.state.searchParam,placeholder:"Search by Name",onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{align:"right",className:"contact-btn"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-head",onClick:function(){return e.setModalOpen()}},"Add New Contact"))),Object.keys(this.state.categories).length<=0&&this.state.filtered?s.a.createElement("div",{className:"no-transaction no-record"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Contacts found"))):s.a.createElement("div",{className:"container-custom admin-content-area"},s.a.createElement("div",{className:"inspector-list"},Object.keys(this.state.categories).map(function(t){return s.a.createElement("div",{key:t,className:"inspector-acc"},s.a.createElement("div",{className:"inspector-acc-head"},s.a.createElement(x.a,{variant:"link",onClick:function(){return e.setOpen(t)},"aria-controls":"example-collapse-text","aria-expanded":e.state.categories[t].open},Fr.find(e.props.roles,function(e){return e._id==t})?Fr.find(e.props.roles,function(e){return e._id==t}).name:t,s.a.createElement("span",null))),s.a.createElement(ps.a,{in:e.state.categories[t].open,className:"inspector-acc-body"},s.a.createElement(Ut.a,null,e.state.categories[t].data.map(function(a,n){return s.a.createElement(Yt.a,{xs:"12",sm:"3",key:n,className:"inspector-card"},s.a.createElement(M.a,{className:"contact-more"},s.a.createElement(M.a.Toggle,{variant:"transparent",className:"p-0",id:"dropdown-basic"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){e.edit(a.contactId)}},"Edit"),s.a.createElement(M.a.Item,{onClick:function(){e.setAsDefault(t,a,!0)}},"Set As Default"),s.a.createElement(M.a.Item,{onClick:function(){e.delete(a.contactId)}},"Delete"))),s.a.createElement("input",{type:"checkbox",checked:a.default,onChange:function(n){e.setAsDefault(t,a,n.target.checked)}}),s.a.createElement("div",{className:"inspector-card-body"},s.a.createElement("h4",null,a.firstname," ",a.lastname),s.a.createElement("h5",null,Fr.find(e.props.roles,function(e){return e._id==a.roles}).name),s.a.createElement("p",null,a.email),s.a.createElement("p",null,a.mobileNumber),s.a.createElement("div",{className:"check"},s.a.createElement(Yr.a,null))))}))))}))))),s.a.createElement(Wa.a,{show:this.state.show,onHide:function(){return e.setModalOpen()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med",backdrop:!1},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Create New Contact")),s.a.createElement(Bn,{onClose:function(){e.handleOnClose()}})),s.a.createElement(Wa.a,{show:this.state.showEdit,onHide:function(){return e.closeEdit()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med",backdrop:!1},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Edit Contact")),s.a.createElement(Pr,{contactData:this.state.contactData,onClose:function(){e.closeEdit()}})))}}]),t}(s.a.Component),Gr=Object(B.b)(function(e){return{contacts:e.reducer.contacts,roles:e.reducer.roles}},{getContactsActions:ut,deleteContactAction:function(e){return function(t){return mt.deleteMethod(ct.addContact+"?id="+e,!0).then(function(e){e.status,t({type:fe,contactResponse:e})})}},editSetAsDefaultContactAction:function(e,t){return function(a){return mt.putMethod(ct.addContact+"/default?id="+t,e,!0).then(function(e){e.status,a({type:ge,contactResponse:e})})}},getUserRolesAction:pt})(_r),zr=a(300),Hr=a.n(zr),qr=a(651),Wr=a(1434),Kr=a(140),Qr=a.n(Kr),Zr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).columns=[{name:"Name",selector:"name",sortable:!0,ignoreRowClick:!0},{name:"Licence No",selector:"licence",sortable:!0,width:"140px"},{name:"Company Name",selector:"company",sortable:!0},{name:"Mobile No.",selector:"mobile",sortable:!0,width:"140px"},{name:"Email",selector:"email",sortable:!0,width:"25%"},{name:"",selector:"active",sortable:!0,width:"105px",ignoreRowClick:!0},{name:"",selector:"reject",sortable:!0,width:"105px",ignoreRowClick:!0},{name:"",selector:"action",width:"60px",right:!0,ignoreRowClick:!0}],a.changePage=function(){var e=Object(qr.a)(Hr.a.mark(function e(t){var n;return Hr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:1!==t&&(n=a.props.users[a.props.users.length-1],n.modifiedDate);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={showArchieve:!1,show:!1,status:null,UserMessage:"",searchParam:"",toggleActive:"",showDelete:"Registration Requests",users:[],showLoader:!0,modalUserData:{},modalCmpnyData:{},recordPerPage:100,lastSyncTimestamp:"",totalRows:6,showRejections:!1,filterData:[],rejectedUsers:[],searchedRequests:[],originalRequestsUsers:[],filteredRequestsUsers:[],btnName:"Rejected Requests",isHideSts:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setModalOpen",value:function(e){var t={};t._id=e._id,t.brokerLicenseNo=e.brokerLicenseNo,t.licenseExpirationDate=e.licenseExpirationDate,t.firstname=e.firstname,t.lastname=e.lastname,t.mobileNumber=e.mobileNumber,t.otherNumber=""!=e.otherNumber?e.otherNumber:"-",t.emailId=e.email.address,t.showRejections=this.state.showRejections;var a={};""!==(a=e.companyInformation).website&&void 0!==a.website||(a.website="-"),""!==a.companySize&&void 0!==a.companySize||(a.companySize="-"),""!==a.typeOfBusiness&&void 0!==a.typeOfBusiness||(a.typeOfBusiness="-"),""!==a.faxNumber&&void 0!==a.faxNumber||(a.faxNumber="-"),this.setUserDataModal(t,a),this.setState({show:!this.state.show})}},{key:"setUserDataModal",value:function(e,t){this.setState({modalUserData:e,modalCmpnyData:t})}},{key:"colseModal",value:function(){this.setState({show:!this.state.show})}},{key:"toggleActive",value:function(){"active"==this.state.toggleActive?this.setState({toggleActive:""}):this.setState({toggleActive:"active"})}},{key:"componentWillMount",value:function(){var e=this;this.props.registrationRequestsAction(this.state.recordPerPage,this.state.lastSyncTimestamp).then(function(t){e.setState({users:e.props.users||[],originalRequestsUsers:e.props.users||[],filteredRequestsUsers:e.props.users||[]})})}},{key:"getRejectedUsers",value:function(e){var t=this;this.setState({status:!1,showLoader:!0}),!this.state.showRejections||e?this.props.rejectRegistartionsListAction().then(function(e){setTimeout(function(){this.setState({status:null,UserMessage:null})}.bind(t),3e3),t.setState({searchParam:"",showRejections:!0,showLoader:!1,showDelete:"Rejected Requests",users:e.data.data,originalRequestsUsers:e.data.data||[],filteredRequestsUsers:e.data.data||[],btnName:"Registration Requests",status:null,UserMessage:null})}):(this.props.registrationRequestsAction(this.state.recordPerPage,this.state.lastSyncTimestamp),this.setState({showRejections:!1,showLoader:!1,showDelete:"Registration Requests",btnName:"Rejected Requests"}))}},{key:"search",value:function(e){e=e.trim();var t;t=this.state.filteredRequestsUsers.filter(function(t){var a=!1;return Object.keys(t).forEach(function(n){if("firstname"==n||"lastName"==n||"mobileNumber"==n||"brokerLicenseNo"==n)(t[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0);else if("email"==n){(t[n].address+"").toLowerCase().includes(e.toLowerCase())&&(a=!0)}}),a}),this.setState({users:t,searchParam:e,isSearched:""!=e.trim()})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({showLoader:!1})}},{key:"activeUserAction",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.activeUserAction(e).then(function(e){t.state.showRejections?(t.getRejectedUsers(t.state.showRejections),t.setState({isHideSts:!1})):t.props.registrationRequestsAction(t.state.recordPerPage,t.state.lastSyncTimestamp).then(function(e){t.setState({isHideSts:!1})}),t.setState({showLoader:!1})}),setTimeout(function(){this.setState({status:null,UserMessage:null})}.bind(this),3e3)}},{key:"removeRegistration",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.removeRegistartionAction(e).then(function(e){t.props.status&&(setTimeout(function(){this.setState({status:null,UserMessage:null})}.bind(t),3e3),t.setState({isHideSts:!1}),t.state.showRejections?t.getRejectedUsers(!0):t.props.registrationRequestsAction(t.state.recordPerPage,t.state.lastSyncTimestamp).then(function(e){t.setState({isHideSts:!1})}),t.setState({showLoader:!1}))})}},{key:"rejectRegistration",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.rejectRegistartionAction(e).then(function(e){t.props.status&&(setTimeout(function(){this.setState({status:null,UserMessage:null})}.bind(t),3e3),t.props.registrationRequestsAction(t.state.recordPerPage,t.state.lastSyncTimestamp).then(function(e){t.setState({isHideSts:!1})})),t.setState({showLoader:!1})})}},{key:"render",value:function(){var e=this;console.log("this.state.status",this.state.status),console.log("this.props.UserMessage",this.props.UserMessage);for(var t=[],a=function(){var a=e.state.users[n],r={id:a._id,name:s.a.createElement(x.a,{variant:"link",className:"p-0",onClick:function(){return e.setModalOpen(a)}},a.firstname," ",a.lastname),licence:a.brokerLicenseNo,company:a.companyInformation?a.companyInformation.name:"",mobile:a.mobileNumber,email:s.a.createElement("div",{className:"email-case"},a.email.address),active:s.a.createElement(x.a,{variant:"transparent",className:"btn-blue btn-outlined btn-grid ",onClick:function(){return e.activeUserAction(a._id)}},"Activate"),reject:s.a.createElement(x.a,{variant:"transparent",className:"btn-blue btn-outlined btn-grid ",onClick:function(){return e.rejectRegistration(a._id)}},"Reject"),action:s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Wr.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{className:"color-dark-orange-3 font-14",onClick:function(){e.removeRegistration(a._id)}},"Remove")))};e.state.showRejections&&delete r.reject,t.push(r)},n=0,r=this.state.users.length;n<r;n++)a();return s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"title-med mt-0 pt-1"},this.state.showDelete)),s.a.createElement(Yt.a,{xs:"4",align:"right"},s.a.createElement("div",{className:"icon-wrapper ml-2"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search",value:this.state.searchParam,onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{className:"col-auto pl-0"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-blue btn-head w-140",onClick:function(){return e.getRejectedUsers()}},this.state.btnName))),null!==this.props.UserMessage&&!this.state.isHideSts&&null!==this.state.status&&this.state.status?s.a.createElement(Dt.a,{variant:"success"},this.state.UserMessage):"",null===this.props.UserMessage||this.state.isHideSts||null===this.state.status||this.state.status?"":s.a.createElement(Dt.a,{variant:"danger"},this.state.UserMessage),s.a.createElement("div",{className:"dt-content-area"},s.a.createElement(Qr.a,{columns:this.columns,data:t,selectableRows:!0,sortIcon:s.a.createElement(us.a,{className:"color-grey-1"}),highlightOnHover:!0,className:"rdt-requests",onRowSelected:this.getSelectedRows,noDataComponent:s.a.createElement("div",{className:"no-transaction no-record no-datatable"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Requests Found"))),pagination:!0,paginationServer:!0,paginationTotalRows:this.state.totalRows,paginationPerPage:this.state.recordPerPage,onChangePage:function(t){return e.changePage(t)},paginationRowsPerPageOptions:[this.state.recordPerPage]}),!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(Wa.a,{show:this.state.show,onHide:function(){return e.colseModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-small"},s.a.createElement(Wa.a.Header,{className:"modal-header-none",closeButton:!0}),s.a.createElement(Wa.a.Body,null,s.a.createElement("h2",{className:"font-24 mb-0 mt-2"},this.state.modalUserData.firstname," ",this.state.modalUserData.lastname),s.a.createElement("div",null,s.a.createElement("span",null,"Broker License: "),s.a.createElement("label",{className:"font-600 mb-0"},this.state.modalUserData.brokerLicenseNo)),s.a.createElement("div",{className:"font-14",style:{color:"#0052d6"}},s.a.createElement("span",null,"Expire on: "),s.a.createElement("span",null,this.state.modalUserData.licenseExpirationDate)),s.a.createElement("div",{className:"font-14 mt-2"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Mobile: "),s.a.createElement("span",null,this.state.modalUserData.mobileNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Phone: "),s.a.createElement("span",null,this.state.modalUserData.otherNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Email: "),s.a.createElement("span",null,this.state.modalUserData.emailId)),s.a.createElement("hr",null),s.a.createElement("h5",{className:"text-uppercase font-14 mb-0",style:{color:"#206ec5"}},"Company Information"),s.a.createElement("h2",{className:"font-24 mb-0"},this.state.modalCmpnyData.name),s.a.createElement("p",{className:"font-14 mb-2"},this.state.modalCmpnyData.address," ",s.a.createElement("br",null),this.state.modalCmpnyData.city,", ",this.state.modalCmpnyData.state," ",this.state.modalCmpnyData.zipcode),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Phone: "),s.a.createElement("span",null,this.state.modalCmpnyData.phoneNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Website: "),s.a.createElement("span",null,this.state.modalCmpnyData.website)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Type of Business: "),s.a.createElement("span",null,this.state.modalCmpnyData.typeOfBusiness)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Fax: "),s.a.createElement("span",null,this.state.modalCmpnyData.faxNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Company Size: "),s.a.createElement("span",null,this.state.modalCmpnyData.companySize)),s.a.createElement("hr",{className:"mb-0"})),s.a.createElement(Wa.a.Footer,null,this.state.showRejections?s.a.createElement(x.a,{variant:"primary",size:"sm",onClick:function(){return e.activeUserAction(e.state.modalUserData._id)},className:"btn-blue btn-grid btn-outlined"},"Activate"):s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,{variant:"primary",size:"sm",onClick:function(){return e.activeUserAction(e.state.modalUserData._id)},className:"btn-blue btn-grid btn-outlined"},"Activate"),s.a.createElement(x.a,{variant:"primary",size:"sm",onClick:function(){return e.activeUserAction(e.state.modalUserData._id)},className:"btn-blue btn-grid btn-outlined"},"Reject"))))))}}]),t}(s.a.Component),Xr=Object(B.b)(function(e){return{users:e.reducer.users,status:e.reducer.status,UserMessage:e.reducer.UserMessage}},{registrationRequestsAction:function(e,t){var a=ct.RegistrationRequestsUrl.replace("{recordPerPage}",e).replace("{modifieddate}",t);return function(e){return mt.getMethod(a,!0).then(function(t){200===t.status?e({type:q,users:t.data.data,totalUsers:t.data.total}):e({type:q,users:{}})})}},activeUserAction:function(e){return function(t){var a=ct.ApproveUserAccountUrl.replace("{userID}",e);return mt.postMethod(a,{action:"APPROVE"},!0).then(function(e){200===e.status?t({type:W,status:!0,UserMessage:"User has been activated."}):(e.status,t({type:W,status:!1,UserMessage:"Something went wrong. Please try again!"}))})}},removeRegistartionAction:function(e){return function(t){var a=ct.removeRegistrationRequest+e;return mt.deleteMethod(a,!0).then(function(e){return 200===e.status?t({type:Ue,status:!0,UserMessage:"Registration Request has been removed."}):(e.status,t({type:Ue,status:!1,UserMessage:"Something went wrong. Please try again!"})),e})}},rejectRegistartionAction:function(e){return function(t){var a=ct.rejectRegistrationRequest+e;return mt.getMethod(a,!0).then(function(e){return 200===e.status?t({type:Pe,status:!0,UserMessage:"Registration Request has been rejected."}):(e.status,t({type:Pe,status:!1,UserMessage:"Something went wrong. Please try again!"})),e})}},rejectRegistartionsListAction:function(e){return function(e){var t=ct.rejectedRegistrationList;return mt.getMethod(t,!0).then(function(t){return 200===t.status?e({type:Be,status:!0,users:t.data.data}):(t.status,e({type:Be,status:!1,users:{}})),t})}}})(Zr),Jr=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).columns=[{name:"BUYER AGENT NAME",selector:"name",sortable:!0,ignoreRowClick:!0},{name:"Licence No",selector:"licence",sortable:!0,width:"140px"},{name:"TRANSACTIONS",selector:"transactions",sortable:!0,width:"120px",center:!0},{name:"Company Name",selector:"company",sortable:!0},{name:"Mobile No.",selector:"mobile",sortable:!0},{name:"Email",selector:"email",sortable:!0,width:"25%"},{name:"",selector:"action",right:!0,ignoreRowClick:!0,width:"50px"}],a.state={showArchieve:!1,show:!1,showDelete:"Buyer Agent",showLoader:!0,modalUserData:{},modalCmpnyData:{},users:[],searchedRequests:[],originalRequestsUsers:[],filteredRequestsUsers:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"setModalOpen",value:function(e){var t={};t._id=e._id,t.brokerLicenseNo=e.brokerLicenseNo,t.licenseExpirationDate=e.licenseExpirationDate,t.firstname=e.firstname,t.lastname=e.lastname,t.mobileNumber=e.mobileNumber,t.otherNumber=""!=e.otherNumber?e.otherNumber:"-",t.emailId=e.email.address;var a={};""!==(a=e.companyInformation).website&&void 0!==a.website||(a.website="-"),""!==a.companySize&&void 0!==a.companySize||(a.companySize="-"),""!==a.faxNumber&&void 0!==a.faxNumber||(a.faxNumber="-"),""!==a.typeOfBusiness&&void 0!==a.typeOfBusiness||(a.typeOfBusiness="-"),this.setUserDataModal(t,a),this.setState({show:!this.state.show})}},{key:"setUserDataModal",value:function(e,t){this.setState({modalUserData:e,modalCmpnyData:t})}},{key:"colseModal",value:function(){this.setState({show:!this.state.show})}},{key:"componentWillMount",value:function(){this.props.buyerAgentsAction()}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"colseModal",value:function(){this.setState({show:!this.state.show})}},{key:"componentWillMount",value:function(){this.getBuyerAgentList()}},{key:"getBuyerAgentList",value:function(){this.props.buyerAgentsAction()}},{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({showLoader:!1})}},{key:"removeBuyerAgent",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.removeUsersAction(e).then(function(e){t.props.status&&(t.setState({showLoader:!1}),t.getBuyerAgentList())})}},{key:"search",value:function(e){e=e.trim();var t;t=this.state.filteredRequestsUsers.filter(function(t){var a=!1;return Object.keys(t).forEach(function(n){if("firstname"==n||"lastName"==n||"mobileNumber"==n||"brokerLicenseNo"==n)(t[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0);else if("email"==n){(t[n].address+"").toLowerCase().includes(e.toLowerCase())&&(a=!0)}}),a}),this.setState({users:t,searchParam:e,isSearched:""!=e.trim()})}},{key:"render",value:function(){for(var e=this,t=[],a=function(){var a=e.props.buyerAgents[n],r={id:a._id,name:s.a.createElement(x.a,{variant:"link",className:"p-0",onClick:function(){return e.setModalOpen(a)}},a.firstname," ",a.lastname),licence:a.brokerLicenseNo,company:a.companyInformation.name,mobile:a.mobileNumber,email:s.a.createElement("div",{className:"email-case"},a.email.address),action:s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Wr.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{className:"color-dark-orange-3 font-14",href:"javascript:void(0)",onClick:function(){e.removeBuyerAgent(a._id)}},"Remove")))};t.push(r)},n=0,r=this.props.buyerAgents.length;n<r;n++)a();return s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,null,s.a.createElement("h4",{className:"title-med mt-0 pt-1"},this.state.showDelete)),s.a.createElement(Yt.a,{xs:"4",align:"right"},s.a.createElement("div",{className:"icon-wrapper ml-2"},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search",value:this.state.searchParam,onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{className:"col-auto pl-0"},s.a.createElement(p.b,{to:"/BuyerAgent/create",className:"btn btn-primary btn-blue btn-head w-140"},"Invite Agent"))),s.a.createElement("div",{className:"dt-content-area"},s.a.createElement(Qr.a,{columns:this.columns,data:t,selectableRows:!0,sortIcon:s.a.createElement(us.a,{className:"color-grey-1"}),noDataComponent:s.a.createElement("div",{className:"no-transaction no-record no-datatable"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Buyer Agents Found"))),highlightOnHover:!0,className:"rdt-requests",onRowSelected:this.getSelectedRows}),!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(Wa.a,{show:this.state.show,onHide:function(){return e.colseModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-small"},s.a.createElement(Wa.a.Header,{className:"modal-header-none",closeButton:!0}),s.a.createElement(Wa.a.Body,null,s.a.createElement("h2",{className:"font-24 mb-0 mt-2"},this.state.modalUserData.firstname," ",this.state.modalUserData.lastname),s.a.createElement("div",null,s.a.createElement("span",null,"Broker License: "),s.a.createElement("label",{className:"font-600 mb-0"},this.state.modalUserData.brokerLicenseNo)),s.a.createElement("div",{className:"font-14",style:{color:"#0052d6"}},s.a.createElement("span",null,"Expire on: "),s.a.createElement("span",null,this.state.modalUserData.licenseExpirationDate)),s.a.createElement("div",{className:"font-14 mt-2"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Mobile: "),s.a.createElement("span",null,this.state.modalUserData.mobileNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Phone: "),s.a.createElement("span",null,this.state.modalUserData.otherNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Email: "),s.a.createElement("span",null,this.state.modalUserData.emailId)),s.a.createElement("hr",null),s.a.createElement("h5",{className:"text-uppercase font-14 mb-0",style:{color:"#206ec5"}},"Company Information"),s.a.createElement("h2",{className:"font-22 mb-0"},this.state.modalCmpnyData.name),s.a.createElement("p",{className:"font-14 mb-2"},this.state.modalCmpnyData.address," ",s.a.createElement("br",null),this.state.modalCmpnyData.city,", ",this.state.modalCmpnyData.state," ",this.state.modalCmpnyData.zipcode),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Phone: "),s.a.createElement("span",null,this.state.modalCmpnyData.phoneNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Website: "),s.a.createElement("span",null,this.state.modalCmpnyData.website)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Type of Business: "),s.a.createElement("span",null,this.state.modalCmpnyData.typeOfBusiness)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Fax: "),s.a.createElement("span",null,this.state.modalCmpnyData.faxNumber)),s.a.createElement("div",{className:"font-14"},s.a.createElement("label",{className:"mb-0 font-600 mr-2"},"Company Size: "),s.a.createElement("span",null,this.state.modalCmpnyData.companySize))))))}}]),t}(s.a.Component),$r=Object(B.b)(function(e){return{buyerAgents:e.reducer.buyerAgents,status:e.reducer.status,totalBuyerAgents:e.reducer.totalBuyerAgents}},{buyerAgentsAction:function(){return function(e){return mt.getMethod(ct.BuyerAgentListUrl,!0).then(function(t){200===t.status?e({type:Q,buyerAgents:t.data.data,totalBuyerAgents:t.data.total}):e({type:Q,buyerAgents:{}})})}},removeUsersAction:gt})(Jr),el=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).columns=[{name:"VENDOR NAME",selector:"name",sortable:!0,ignoreRowClick:!0},{name:"Mobile No.",selector:"mobile",sortable:!0},{name:"Email",selector:"email",sortable:!0,width:"25%"},{name:"",selector:"action",right:!0,ignoreRowClick:!0,width:"50px"}],a.state={showArchieve:!1,show:!1,showDelete:"Vendors",showLoader:!0,searchParam:"",modalUserData:{},modalCmpnyData:{},vendorUsers:[],searchedVendors:[],originalvendorUsers:[],filteredvendorUsers:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"colseModal",value:function(){this.setState({show:!this.state.show})}},{key:"getVendorsList",value:function(){var e=this;this.props.vendorUserAction().then(function(t){e.setState({vendorUsers:e.props.vendorUsers||[],originalvendorUsers:e.props.vendorUsers||[],filteredvendorUsers:e.props.vendorUsers||[],showLoader:!1})})}},{key:"componentWillMount",value:function(){this.getVendorsList()}},{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({showLoader:!1})}},{key:"removeBuyerAgent",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.removeUsersAction(e).then(function(e){t.props.status&&(t.setState({showLoader:!1}),t.getVendorsList())})}},{key:"search",value:function(e){e=e.trim();var t;t=this.state.filteredvendorUsers.filter(function(t){var a=!1;return Object.keys(t).forEach(function(n){if("firstname"==n||"lastName"==n||"mobileNumber"==n)(t[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0);else if("email"==n){(t[n].address+"").toLowerCase().includes(e.toLowerCase())&&(a=!0)}}),a}),this.setState({vendorUsers:t,searchedTransactions:t,searchParam:e,isSearched:""!=e.trim()})}},{key:"render",value:function(){for(var e=this,t=[],a=function(){var a=e.state.vendorUsers[n],r={id:a._id,name:s.a.createElement(p.b,{to:"/UserProfile/"+a._id,className:"p-0"},a.firstname+a.lastname),mobile:a.mobileNumber,email:s.a.createElement("div",{className:"email-case"},a.email.address),action:s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Wr.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{className:"color-dark-orange-3 font-14",href:"javascript:void(0)",onClick:function(){e.removeBuyerAgent(a._id)}},"Remove")))};t.push(r)},n=0,r=this.state.vendorUsers.length;n<r;n++)a();return s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},this.state.showDelete)),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement(jt.a.Group,{controlId:"",className:"mb-0 mr-2"},s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{className:"form-control form-control-sm form-control-head",style:{width:"175px"}},s.a.createElement("option",{value:""},"Select Vendor Type"),this.props.roles&&this.props.roles.map(function(e){return s.a.createElement("option",{value:e._id},e.name)}),s.a.createElement("option",{value:"other"},"Other"))))),s.a.createElement(Yt.a,{align:"right"},s.a.createElement("div",{className:"icon-wrapper ml-2",style:{width:"40%"}},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search",value:this.state.searchParam,onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null))))),s.a.createElement("div",{className:"dt-content-area"},s.a.createElement(Qr.a,{columns:this.columns,data:t,selectableRows:!0,sortIcon:s.a.createElement(us.a,{className:"color-grey-1"}),noDataComponent:s.a.createElement("div",{className:"no-transaction no-record no-datatable"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Vendors Found"))),highlightOnHover:!0,className:"rdt-requests",onRowSelected:this.getSelectedRows}),!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),t}(s.a.Component),tl=Object(B.b)(function(e){return{vendorUsers:e.reducer.vendorUsers,totalBuyerAgents:e.reducer.totalBuyerAgents,roles:e.reducer.roles,status:e.reducer.status}},{vendorUserAction:function(){return function(e){return mt.getMethod(ct.VendorsListUrl,!0).then(function(t){return 200===t.status?e({type:je,vendorUsers:t.data.data,totalVendors:t.data.data.total}):e({type:je,vendorUsers:{},totalVendors:null}),t})}},getUserRolesAction:pt,removeUsersAction:gt})(el),al=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).columns=[{name:"BUYER NAME",selector:"name",sortable:!0,ignoreRowClick:!0},{name:"Mobile No.",selector:"mobile",sortable:!0},{name:"Email",selector:"email",sortable:!0,width:"25%"},{name:"",selector:"action",right:!0,ignoreRowClick:!0,width:"50px"}],a.state={showArchieve:!1,show:!1,showDelete:"Home Buyers",showLoader:!0,searchParam:"",modalUserData:{},modalCmpnyData:{},buyers:[],searchedVendors:[],originalbuyers:[],filteredbuyers:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"colseModal",value:function(){this.setState({show:!this.state.show})}},{key:"getHomeBuyersList",value:function(){var e=this;this.props.homeBuyersUserAction().then(function(t){e.setState({buyers:e.props.buyers||[],originalbuyers:e.props.buyers||[],filteredbuyers:e.props.buyers||[]})})}},{key:"componentWillMount",value:function(){this.getHomeBuyersList()}},{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.setState({showLoader:!1})}},{key:"removeBuyerAgent",value:function(e){var t=this;this.setState({showLoader:!0}),this.props.removeUsersAction(e).then(function(e){t.props.status&&(t.setState({showLoader:!1}),t.getHomeBuyersList())})}},{key:"search",value:function(e){e=e.trim();var t;t=this.state.filteredbuyers.filter(function(t){var a=!1;return Object.keys(t).forEach(function(n){if("firstname"===n||"lastName"===n||"mobileNumber"===n)(t[n]+"").toLowerCase().includes(e.toLowerCase())&&(a=!0);else if("email"==n){(t[n].address+"").toLowerCase().includes(e.toLowerCase())&&(a=!0)}}),a}),this.setState({buyers:t,searchedTransactions:t,searchParam:e,isSearched:""!=e.trim()})}},{key:"render",value:function(){for(var e=this,t=[],a=0,n=this.state.buyers.length;a<n;a++){var r=this.state.buyers[a],l={id:r._id,name:s.a.createElement(p.b,{to:"/UserProfile/"+r._id,className:"p-0 text-capitalize"},r.firstname," ",r.lastname),mobile:r.mobileNumber,email:s.a.createElement("div",{className:"email-case"},r.email.address),action:s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Wr.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{className:"color-dark-orange-3 font-14"},"Remove")))};t.push(l)}return s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 page-head-row page-head-row-big align-items-center"},s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},this.state.showDelete)),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement(jt.a.Group,{controlId:"",className:"mb-0 mr-2"})),s.a.createElement(Yt.a,{align:"right"},s.a.createElement("div",{className:"icon-wrapper ml-2",style:{width:"40%"}},s.a.createElement(jt.a.Control,{type:"text",className:"form-control-head",placeholder:"Search",value:this.state.searchParam,onChange:function(t){e.search(t.target.value)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null))))),s.a.createElement("div",{className:"dt-content-area"},s.a.createElement(Qr.a,{columns:this.columns,data:t,selectableRows:!0,sortIcon:s.a.createElement(us.a,{className:"color-grey-1"}),noDataComponent:s.a.createElement("div",{className:"no-transaction no-record no-datatable"},s.a.createElement("div",{className:"no-transaction-inner"},s.a.createElement("img",{src:cn.a,alt:"no record"}),s.a.createElement("p",null,"No Home Buyers Found"))),highlightOnHover:!0,className:"rdt-requests",onRowSelected:this.getSelectedRows}),!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),t}(s.a.Component),nl=Object(B.b)(function(e){return{buyers:e.reducer.buyers,totalBuyerAgents:e.reducer.totalBuyerAgents,roles:e.reducer.roles,status:e.reducer.status}},{homeBuyersUserAction:function(){return function(e){return mt.getMethod(ct.BuyerListUrl,!0).then(function(t){return 200===t.status?e({type:lt,buyers:t.data.data,totalbuyers:t.data.data.total}):e({type:lt,buyers:{},totalbuyers:null}),t})}},getUserRolesAction:pt,removeUsersAction:gt})(al),sl=new Date,rl=sl.getMonth()+1+"/"+sl.getDate()+"/"+sl.getFullYear(),ll=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).defaultState=(a={usertype:"BUYERAGENT",firstname:"",lastname:"",email:"",recoveryEmail:"",password:"",confirmPassword:"",mobileNumber:"",otherNumber:"",brokerLicenseNo:"",licenseExpirationDate:rl,knowAboutUs:"",companyInformation:{name:"",website:"",address:"",zipcode:"",city:"",state:"",phoneNumber:"",faxNumber:"",typeOfBusiness:"",companySize:""},address:"",bio:"-",education:" ",certifications:"",awards:"",jobTitle:"",quote:"",avatar:"-",socialMediaHandles:{facebook:"",twitter:"",instagram:""}},Object(Nt.a)(a,"education",[]),Object(Nt.a)(a,"certifications",[]),Object(Nt.a)(a,"awards",[]),a),n.state=n.defaultState,n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getUserData",value:function(){return this.state}},{key:"getUserData",value:function(){return this.state}},{key:"updateUserData",value:function(e,t){this.setState(Object(Nt.a)({},e,t))}},{key:"updateUserCmpnyData",value:function(e,t){this.state.companyInformation[e]=t}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"getLastStep",value:function(e){0!==e&&1!==e||Et()(".saveBtn").html("Next"),2===e&&Et()(".saveBtn").html("Confirm & Save"),3===e&&this.submitAction()}},{key:"submitAction",value:function(){var e=this,t=this.state;delete t.recoveryEmail,delete t.confirmPassword,t.mobileNumber=t.mobileNumber.replace(/\-/g,""),t.otherNumber=t.otherNumber.replace(/\-/g,""),t.companyInformation.phoneNumber=t.companyInformation.phoneNumber.replace(/\-/g,""),this.props.inviteAgentAction(t).then(function(t){e.setState(e.defaultState)})}},{key:"render",value:function(){var e=this,t=[{name:"Personal Info",component:s.a.createElement(ta,{getUserData:function(){return e.getUserData()},updateUserData:function(t,a){e.updateUserData(t,a)}})},{name:"Company Info",component:s.a.createElement(sa,{getUserData:function(){return e.getUserData()},updateUserData:function(t,a){e.updateUserCmpnyData(t,a)}})},{name:"Review",component:s.a.createElement(oa,{getUserData:function(){return e.getUserData()}})}];return this.props.checkStatus&&this.props.history.push("/buyeragent"),s.a.createElement("div",{className:"reg-page agent-create"},s.a.createElement("div",{className:"loginBg"},s.a.createElement("div",{className:"step-progress"},s.a.createElement("div",{className:"reg-title-wrapper"},s.a.createElement("h4",{className:"title-big mt-0 pt-2"},"Create Buyer Agent Account"),s.a.createElement(p.b,{to:"/BuyerAgent",className:"nav-link p-0 color-black close-link"},s.a.createElement(j.a,{style:{stroke:"#fff",height:"40px",width:"40px"}}))),s.a.createElement("div",{className:"multi-step"},s.a.createElement(Ot.a,{steps:t,showNavigation:!0,backButtonCls:"btn btn-sm btn-primary btn-blue btn-outlined w-140 mr-3",nextButtonCls:"btn btn-sm btn-primary btn-blue w-140 saveBtn",onStepChange:function(t){return e.getLastStep(t)},hocValidationAppliedTo:[0,1]})))))}}]),t}(s.a.Component),ol=Object(B.b)(function(e){return{checkStatus:e.reducer.checkStatus,invieAgentMsg:e.reducer.invieAgentMsg}},{inviteAgentAction:function(e){return function(t){return mt.postMethod(ct.RegisterUrl,e,!0).then(function(e){200===e.status?t({type:Z,checkStatus:!0,invieAgentMsg:"Buyer Agent has been added successfully."}):(e.status,t({type:Z,checkStatus:!1,invieAgentMsg:"Something went wrong. Please try again!"}))})}}})(ll),il=a(1435),cl=a(409),ml=a.n(cl),dl=a(410),ul=a.n(dl),pl=a(411),hl=a.n(pl),gl={fontColor:{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0}]},fontBackgroundColor:{colors:[{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"}]},toolbar:["bold","strike","italic","link","bulletedList","numberedList","blockQuote","fontColor","fontBackgroundColor"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"}]}},fl=Gt()(),El=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).setStartDate=a.setStartDate.bind(Object(Rt.a)(a)),a.setEndDate=a.setEndDate.bind(Object(Rt.a)(a)),a.state={userData:{},onlyViewMode:!1,userRole:localStorage.getItem("usertype").toUpperCase(),userInfo:!1,bioInfo:!1,deletePrompt:!1,goalInfo:!1,educationInfo:!1,educationData:{},educationEdit:!0,educationIndex:"",educationInfoDate:"",educationInfoDate1:"",certificationsInfo:!1,certificationsInfoDate:"",certificationsData:{},certificationsEdit:!1,certificationsIndex:"",licenseExpDate:"",awardsInfo:!1,awardsInfoDate:"",awardsData:{},awardsEdit:!1,awardsIndex:"",companyInfo:!1,startDate:Gt()(),closeDate:Gt()().subtract(-29,"days"),deleteType:"",deleteIndex:"",showLoader:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){if(this.props.match.params.id){var e=this.props.match.params.id;this.setState({onlyViewMode:!0,token:e}),this.props.myProfileAction(e)}else this.props.myProfileAction()}},{key:"componentDidMount",value:function(){this.setState({userData:this.props.profileData})}},{key:"setDate",value:function(e,t){"educationInfo"==e&&(this.setState({educationInfoDate:t.value}),Et()("#fromyear").val(t.value)),"educationInfo1"==e&&(this.setState({educationInfoDate1:t.value}),Et()("#toyear").val(t.value)),"certificationsInfo"==e&&(this.setState({certificationsInfoDate:Gt()(t).format("MM/DD/YYYY")}),Et()("#certDescription").val(Gt()(t).format("MM/DD/YYYY"))),"awardsInfo"==e&&(this.setState({awardsInfoDate:Gt()(t).format("MM/DD/YYYY")}),Et()("#awardsDescription").val(Gt()(t).format("MM/DD/YYYY"))),"userInfo"==e&&this.setState({licenseExpDate:Gt()(t).format("MM/DD/YYYY")})}},{key:"updateProfile",value:function(e,t){var a=this,n=t;this.setState(Object(Nt.a)({},e,!1)),"educationInfo"==e&&(t=this.props.profileData,this.state.educationEdit?(t.education[this.state.educationIndex].name=n.name||"",t.education[this.state.educationIndex].description=this.state.educationInfoDate+"-"+this.state.educationInfoDate1||""):t.education.push({name:n.name||"",description:this.state.educationInfoDate+"-"+this.state.educationInfoDate1||""})),"certificationsInfo"==e&&(t=this.props.profileData,this.state.certificationsEdit?(t.certifications[this.state.certificationsIndex].name=n.name||"",t.certifications[this.state.certificationsIndex].description=n.description||""):t.certifications.push({name:n.name||"",description:n.description||""})),"awardsInfo"==e&&(t=this.props.profileData,this.state.awardsEdit?(t.awards[this.state.awardsIndex].name=n.name||"",t.awards[this.state.awardsIndex].description=n.description||""):t.awards.push({name:n.name||"",description:n.description||""}));var s={email:{address:t.email&&t.email.address||""},companyInformation:{name:t.companyInformation?t.companyInformation.name:"",website:t.companyInformation?t.companyInformation.website:"",address:t.companyInformation?t.companyInformation.address:"",zipcode:t.companyInformation?t.companyInformation.zipcode:"",city:t.companyInformation?t.companyInformation.city:"",state:t.companyInformation?t.companyInformation.state:"",phoneNumber:t.companyInformation?t.companyInformation.phoneNumber:"",faxNumber:t.companyInformation?t.companyInformation.faxNumber:"",typeOfBusiness:t.companyInformation?t.companyInformation.typeOfBusiness:"",companySize:t.companyInformation?t.companyInformation.companySize:""},socialMediaHandles:{facebook:t.socialMediaHandles?t.socialMediaHandles.facebook:"",twitter:t.socialMediaHandles?t.socialMediaHandles.twitter:"",instagram:"www.instagram.com/admin"},education:t.education,certifications:t.certifications,awards:t.awards,firstname:t.firstname||"",lastname:t.lastname||"",mobileNumber:t.mobileNumber||"",otherNumber:t.otherNumber||"",brokerLicenseNo:t.brokerLicenseNo||"",licenseExpirationDate:t.licenseExpirationDate||this.state.licenseExpDate,knowAboutUs:"Advertisement",address:t.address,bio:t.bio,jobTitle:t.jobTitle||"",quote:t.quote||"",avatar:"-"};this.setState({showLoader:!0}),this.props.updateProfileAction(s).then(function(e){a.props.myProfileAction().then(function(e){a.setState({showLoader:!1})},function(e){a.setState({showLoader:!1})})})}},{key:"setStartDate",value:function(e,t){this.setState({startDate:t.startDate})}},{key:"setEndDate",value:function(e,t){this.setState({closeDate:t.startDate})}},{key:"userModal",value:function(){this.setState({userInfo:!this.state.userInfo})}},{key:"bioModal",value:function(){this.setState({bioInfo:!this.state.bioInfo})}},{key:"goalModal",value:function(){this.setState({goalInfo:!this.state.goalInfo})}},{key:"educationModal",value:function(e,t){this.setState({educationInfo:!this.state.educationInfo,educationEdit:"edit"==e,educationData:"edit"==e?this.props.profileData.education[t]:{},educationIndex:t,educationInfoDate:"edit"==e?this.props.profileData.education[t].description.split("-")[0]:"",educationInfoDate1:"edit"==e?this.props.profileData.education[t].description.split("-")[0]:""})}},{key:"certificationsModal",value:function(e,t){setTimeout(function(){Et()(".modal-tabindex").removeAttr("tabindex")},100),this.setState({certificationsInfo:!this.state.certificationsInfo,certificationsEdit:"edit"==e,certificationsData:"edit"==e?this.props.profileData.certifications[t]:{},certificationsIndex:t})}},{key:"awardsModal",value:function(e,t){setTimeout(function(){Et()(".modal-tabindex").removeAttr("tabindex")},100),this.setState({awardsInfo:!this.state.awardsInfo,awardsEdit:"edit"==e,awardsData:"edit"==e?this.props.profileData.awards[t]:{},awardsIndex:t})}},{key:"companyModal",value:function(){this.setState({companyInfo:!this.state.companyInfo})}},{key:"deletePrompt",value:function(e,t){e?this.setState({deletePrompt:!this.state.deletePrompt,deleteType:e,deleteIndex:t}):this.setState({deletePrompt:!this.state.deletePrompt})}},{key:"confirmDelete",value:function(e,t){var a=this,n=this.props.profileData;n[e].splice(t,1),this.setState({showLoader:!0}),this.props.updateProfileAction(n).then(function(e){a.props.myProfileAction().then(function(e){a.setState({deletePrompt:!a.state.deletePrompt,showLoader:!1},function(e){a.setState({showLoader:!1})})},function(e){a.setState({showLoader:!1})})})}},{key:"goBack",value:function(){window.history.back()}},{key:"setMobile",value:function(e,t,a){a(t,e.replace(/-/g,""))}},{key:"render",value:function(){var e=this,t=[];for(var a in aa){var n=s.a.createElement("option",{key:a,value:a},aa[a]);t.push(n)}for(var r=[],l=0;l<50;l++)r.push({label:Gt()().subtract("years",l).year(),value:Gt()().subtract("years",l).year()});var o=r.filter(function(t){return t.value>=e.state.educationInfoDate}),i=this.props.profileData||{},c=i.bio||"",m="-";return i.companyInformation&&""!=i.companyInformation&&(m=ml()(i.companyInformation.address+", "+i.companyInformation.city+", <br>"+i.companyInformation.state+" "+i.companyInformation.zipcode)),s.a.createElement("div",{className:"profile-page"},this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement(Ut.a,{className:"mx-0 profile-basic-info"},s.a.createElement(Yt.a,{xs:"12",align:"right"},s.a.createElement(x.a,{variant:"transparent",className:"close-big p-0",onClick:function(){e.goBack()}},s.a.createElement(j.a,null))),s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement("div",{className:"profile-left"},s.a.createElement("div",{className:"profile-img"},s.a.createElement("img",{src:Y.a,alt:"user"})),s.a.createElement("div",{className:"text-center"},i.socialMediaHandles&&void 0!=i.socialMediaHandles.facebook&&""!=i.socialMediaHandles.facebook?s.a.createElement("a",{target:"_blank",href:i.socialMediaHandles.facebook.includes("://")?i.socialMediaHandles.facebook:"https://"+i.socialMediaHandles.facebook,title:"facebook"},s.a.createElement("img",{src:ul.a,alt:"facebook",style:{width:"24px",marginRight:"5px"}})):s.a.createElement("img",{src:ul.a,alt:"facebook",style:{width:"24px",marginRight:"5px"}}),i.socialMediaHandles&&void 0!=i.socialMediaHandles.twitter&&""!=i.socialMediaHandles.twitter?s.a.createElement("a",{target:"_blank",href:i.socialMediaHandles.twitter,title:"twitter"},s.a.createElement("img",{src:hl.a,alt:"twitter",style:{width:"24px",marginLeft:"5px"}})):s.a.createElement("img",{src:hl.a,alt:"twitter",style:{width:"24px",marginLeft:"5px"}})))),s.a.createElement(Yt.a,null,s.a.createElement("div",null,s.a.createElement("h4",{className:"font-24",style:{textTransform:"capitalize"}},i.firstname," ",i.lastname,this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.userModal()}},s.a.createElement(la.a,null)))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{className:"col-auto pr-5 mb-1"},s.a.createElement("div",{className:"font-14 color-grey-1 font-500"},"License No.:"),s.a.createElement("div",null,i.brokerLicenseNo),s.a.createElement("div",{className:"font-12"},"Expire on ",i.licenseExpirationDate)),""!=i.otherNumber&&null!=i.otherNumber&&s.a.createElement(Yt.a,{className:"col-auto mb-1"},s.a.createElement("div",{className:"font-14 color-grey-1 font-500"},"Phone (office):"),s.a.createElement("div",null,i.otherNumber)),s.a.createElement(Yt.a,{className:"col-auto mb-1"},s.a.createElement("div",{className:"font-14 color-grey-1 font-500"},"Mobile Phone:"),s.a.createElement("div",null,i.mobileNumber)),i.email&&s.a.createElement(Yt.a,{className:"col-auto mb-1"},s.a.createElement("div",{className:"font-14 color-grey-1 font-500"},"Email:"),s.a.createElement("div",{className:"email-case"},i.email.address))))),s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,{className:"col-auto hide-767"},s.a.createElement("div",{className:"profile-left"})),s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"mt-3 profile-block"},this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.bioModal()}},s.a.createElement(la.a,null)),s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Bio"),s.a.createElement("div",{className:"color-grey-1 font-14"},ml()(c))),s.a.createElement("div",{className:"mt-2 pt-2 profile-block profile-block-multi"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Goal")),s.a.createElement(Yt.a,null,this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"p-0 add-btn",onClick:function(){return e.goalModal()}},s.a.createElement(sr.a,null))))),s.a.createElement("div",{className:"mt-2 pt-2 profile-block profile-block-multi"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Education")),s.a.createElement(Yt.a,null,this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"p-0 add-btn",onClick:function(){return e.educationModal("add")}},s.a.createElement(sr.a,null)))),i.education&&i.education.map(function(t,a){return t?s.a.createElement("div",{className:"basic-info-block profile-block-multi"},s.a.createElement("div",{className:"inline-actions"},e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.educationModal("edit",a)}},s.a.createElement(la.a,null)),e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"delete-icn p-0",onClick:function(){return e.deletePrompt("education",a)}},s.a.createElement(il.a,null))),s.a.createElement("h6",{className:"mb-1"},t.name||"-"),s.a.createElement("p",{className:"color-grey-1 font-14"},t.description||"-")):""})),s.a.createElement("div",{className:"mt-2 profile-block profile-block-multi"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Certifications")),s.a.createElement(Yt.a,null,this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"p-0 add-btn",onClick:function(){return e.certificationsModal("add")}},s.a.createElement(sr.a,null)))),i.certifications&&i.certifications.map(function(t,a){return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement("div",{className:"basic-info-block"},s.a.createElement("div",{className:"inline-actions"},e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.certificationsModal("edit",a)}},s.a.createElement(la.a,null)),e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"delete-icn p-0",onClick:function(){return e.deletePrompt("certifications",a)}},s.a.createElement(il.a,null))),s.a.createElement("h6",{className:"mb-1"},t.name||"-"),s.a.createElement("p",{className:"color-grey-1 font-14"},t.description&&""!=t.description?"Issued "+Gt()(t.description).format("MMMM YYYY"):"-")))})),s.a.createElement("div",{className:"mt-2 profile-block profile-block-multi"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Awards")),s.a.createElement(Yt.a,null,this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"p-0 add-btn",onClick:function(){return e.awardsModal("add")}},s.a.createElement(sr.a,null)))),i.awards&&i.awards.map(function(t,a){return t?s.a.createElement("div",{className:"basic-info-block"},s.a.createElement("div",{className:"inline-actions"},e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.awardsModal("edit",a)}},s.a.createElement(la.a,null)),e.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"delete-icn p-0",onClick:function(){return e.deletePrompt("awards",a)}},s.a.createElement(il.a,null))),s.a.createElement("h6",{className:"mb-1"},t.name||"-"),s.a.createElement("p",{className:"color-grey-1 font-14"},t.description&&""!=t.description?Gt()(t.description).format("MMMM YYYY"):"-")):""}))),s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("div",{className:"mt-3 profile-block"},this.state.onlyViewMode?"":s.a.createElement(x.a,{variant:"transparent",className:"edit-icn p-0",onClick:function(){return e.companyModal()}},s.a.createElement(la.a,null)),s.a.createElement("h5",{className:"font-20 color-blue-4 font-600"},"Company information"),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"mb-1"},i.companyInformation&&i.companyInformation.name||"-"),s.a.createElement("p",{className:"color-grey-1 font-500 font-14",style:{lineHeight:"20px"}},m)),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"color-grey-1 font-500 font-14 mb-1"},"Phone (office)"),s.a.createElement("p",null,i.companyInformation&&i.companyInformation.phoneNumber||"-")),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"color-grey-1 font-500 font-14 mb-1"},"Fax"),s.a.createElement("p",null,i.companyInformation&&i.companyInformation.faxNumber||"-")),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"color-grey-1 font-500 font-14 mb-1"},"Website"),s.a.createElement("p",null,i.companyInformation&&i.companyInformation.website||"-")),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"color-grey-1 font-500 font-14 mb-1"},"Type of Business"),s.a.createElement("p",null,i.companyInformation&&i.companyInformation.typeOfBusiness||"-")),s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"color-grey-1 font-500 font-14 mb-1"},"Company Size"),s.a.createElement("p",null,i.companyInformation&&i.companyInformation.companySize||"-"))))),s.a.createElement(Wa.a,{show:this.state.userInfo,onHide:function(){return e.userModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Edit Information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:i,enableReinitialize:!0,validationSchema:Tt.object().shape({firstname:Tt.string().trim().required("Please enter First Name."),lastname:Tt.string().trim().required("Please enter Last Name."),brokerLicenseNo:Tt.string().trim().required("Please enter License Number."),otherNumber:Tt.string().nullable().test("mobileNumber","Please enter valid Phone Number",function(e){return void 0==e||""==e||10==e.length}),mobileNumber:Tt.string().nullable().required("Please enter Mobile Number.").test("mobileNumber","Please enter valid Mobile Number",function(e){return 10==(e||"").length}),socialMediaHandles:Tt.object().shape({facebook:Tt.string().trim().test("facebook","This field must be a valid URL",function(e){if(""==e)return!0;return/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)}),twitter:Tt.string().trim().test("twitter","This field must be a valid URL",function(e){if(""==e)return!0;return/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)})})}),onSubmit:function(t){e.updateProfile("userInfo",t)}},function(t){var a,n=t.handleChange,r=t.values,l=(t.errors,t.setFieldValue);t.onChange,t.onBlur;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12",sm:"3"},s.a.createElement("div",{className:"profile-img profile-img-big"},s.a.createElement("img",{src:Y.a,alt:"user"})),s.a.createElement("div",{className:"text-center"},s.a.createElement("label",{htmlFor:"userImg",className:"color-blue-4 font-500"},"Edit"),s.a.createElement("input",{type:"file",id:"userImg",style:{opacity:"0",position:"absolute"}}))),s.a.createElement(Yt.a,{xs:"12",sm:"9"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"First Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:r.firstname,name:"firstname",handleChange:n}),s.a.createElement(Ct.a,{name:"firstname",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Last Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:r.lastname,name:"lastname",handleChange:n}),s.a.createElement(Ct.a,{name:"lastname",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"License Number",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:r.brokerLicenseNo,name:"brokerLicenseNo",handleChange:n}),s.a.createElement(Ct.a,{name:"brokerLicenseNo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"License Expiration Date",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,alwaysShowCalendars:!1,minDate:fl,onApply:function(e,t){l("licenseExpirationDate",t.startDate.format("MM/DD/YYYY"))}},s.a.createElement("input",(a={className:"form-control",name:"licenseExpirationDate",type:"text",size:"lg",placeholder:"MM/DD/YYYY",value:r.licenseExpirationDate},Object(Nt.a)(a,"name","licenseExpirationDate"),Object(Nt.a)(a,"handleChange",n),a)),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))),s.a.createElement(Ct.a,{name:"licenseExpirationDate",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Phone Number (office)"),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},value:r.otherNumber,name:"otherNumber",className:"form-control",onChange:function(t){e.setMobile(t.target.value,"otherNumber",l)}},function(e){return s.a.createElement(Ct.b,e)}),s.a.createElement(Ct.a,{name:"otherNumber",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:12,sm:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Mobile Number",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:r.mobileNumber,name:"mobileNumber",onChange:function(t){e.setMobile(t.target.value,"mobileNumber",l)}},function(e){return s.a.createElement(Ct.b,e)}),s.a.createElement(Ct.a,{name:"mobileNumber",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Email ID"),s.a.createElement(Ct.b,{type:"email",className:"form-control",value:r.email?r.email.address:"",disabled:!0,name:"email.address",handleChange:n}),s.a.createElement(Ct.a,{name:"email.address",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Facebook URL"),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:r.socialMediaHandles?r.socialMediaHandles.facebook:"",name:"socialMediaHandles.facebook",handleChange:n}),s.a.createElement(Ct.a,{name:"socialMediaHandles.facebook",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Twitter URL"),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:r.socialMediaHandles?r.socialMediaHandles.twitter:"",name:"socialMediaHandles.twitter",handleChange:n}),s.a.createElement(Ct.a,{name:"socialMediaHandles.twitter",component:"div",className:"invalid-feedback",style:{display:"block"}})))))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",type:"submit",size:"sm",className:"btn-blue w-140"},"Update"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({userInfo:!e.state.userInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.bioInfo,onHide:function(){return e.bioModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Biodata")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:i,enableReinitialize:!0},function(t){t.handleChange;var a=t.values,n=t.setFieldValue;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement(Ys.a,{onInit:function(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},onChange:function(e,t){void 0!=t&&n("bio",t.getData())},editor:js.a,name:"bio",data:a.bio,config:gl})))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){return e.updateProfile("bioInfo",a)}},"Update"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({bioInfo:!e.state.bioInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.goalInfo,onHide:function(){return e.goalModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Goal")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,null,s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Title"),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"title"}))),s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Target"),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"target"})))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({goalInfo:!e.state.goalInfo})}},"Add"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({goalInfo:!e.state.goalInfo})}},"Cancel")))))),s.a.createElement(Wa.a,{show:this.state.educationInfo,onHide:function(){return e.educationModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Education")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.educationData,enableReinitialize:!0},function(t){var a=t.handleChange,n=t.handleBlur,l=t.values;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Institute"),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"name",value:l.name,handleChange:a})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Year from"),s.a.createElement("div",{className:"icon-wrapper blue-wrapper"},s.a.createElement(ws.a,{id:"fromyear",placeholder:"From Year",onBlur:n,fullWidth:!0,onChange:function(t){return e.setDate("educationInfo",t)},value:e.state.educationInfoDate?{label:e.state.educationInfoDate,value:e.state.educationInfoDate}:{label:l.description&&""!=l.description?l.description.split("-")[0]:"",value:l.description&&""!=l.description?l.description.split("-")[0]:""},className:"react-select-wrapper react-select-multi",name:"year",options:r})))),s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Year to"),s.a.createElement("div",{className:"icon-wrapper blue-wrapper"},s.a.createElement(ws.a,{id:"toyear",placeholder:"To Year",onBlur:n,fullWidth:!0,onChange:function(t){return e.setDate("educationInfo1",t)},value:e.state.educationInfoDate1?{label:e.state.educationInfoDate1,value:e.state.educationInfoDate1}:{label:l.description&&""!=l.description?l.description.split("-")[1]:"",value:l.description&&""!=l.description?l.description.split("-")[1]:""},className:"react-select-wrapper react-select-multi",name:"year1",options:o}))))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){e.updateProfile("educationInfo",l)}},e.state.educationEdit?"Update":"Add"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({educationInfo:!e.state.educationInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.certificationsInfo,onHide:function(){return e.certificationsModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786 modal-tabindex"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Certification")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.certificationsData,enableReinitialize:!0},function(t){var a=t.handleChange,n=t.values,r=t.setFieldValue;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Institute"),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"name",value:n.name,handleChange:a})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Issued Date"),s.a.createElement("div",{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,startDate:n.description,showDropdowns:!0,onApply:function(e,t){r("description",t.startDate.format("MM/DD/YYYY"))}},s.a.createElement("input",{className:"form-control",type:"text",size:"lg",placeholder:"MM/DD/YYYY",id:"certDescription",name:"description",value:n.description,handleChange:a}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){e.updateProfile("certificationsInfo",n)}},e.state.certificationsEdit?"Update":"Add"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({certificationsInfo:!e.state.certificationsInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.awardsInfo,onHide:function(){return e.awardsModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786 modal-tabindex"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Awards")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.awardsData,enableReinitialize:!0},function(t){var a=t.handleChange,n=t.values,r=t.setFieldValue;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Institute"),s.a.createElement(Ct.b,{type:"text",className:"form-control",name:"name",value:n.name,handleChange:a})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Issued Date"),s.a.createElement("div",{className:"icon-wrapper blue-wrapper"},s.a.createElement(Ft.a,{singleDatePicker:!0,showDropdowns:!0,startDate:n.description,onApply:function(e,t){r("description",t.startDate.format("MM/DD/YYYY"))}},s.a.createElement("input",{className:"form-control",type:"text",size:"lg",id:"awardsDescription",placeholder:"MM/DD/YYYY",name:"description",value:n.description,handleChange:a}),s.a.createElement("span",{className:"form-control-icn form-control-icn-sm"},s.a.createElement(Tn.a,null))))))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",onClick:function(){e.updateProfile("awardsInfo",n)}},e.state.awardsEdit?"Update":"Add"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({awardsInfo:!e.state.awardsInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.companyInfo,onHide:function(){return e.companyModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-786"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Company information")),s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:i,enableReinitialize:!0,validationSchema:Tt.object().shape({companyInformation:Tt.object().shape({name:Tt.string().trim().required("Please enter Company Name"),address:Tt.string().trim().required("Please enter Company Address"),city:Tt.string().trim().required("Please enter City"),state:Tt.string().trim().required("Please select State"),website:Tt.string().url("this field must be an URL.(ex : http://something.com)"),zipcode:Tt.string().required("Please enter Zip code.").matches(new RegExp("^[0-9]{5}(?:-[0-9]{4})?$"),{message:"Please enter valid Zip code",excludeEmptyString:!0}),phoneNumber:Tt.string().required("Please enter Phone No").length(10,"Phone Number Must be of 10 digits")})}),onSubmit:function(t){e.updateProfile("companyInfo",t)}},function(a){var n,r=a.handleChange,l=a.values,o=a.setFieldValue;return s.a.createElement(Ct.c,{className:"form-sm form-admin"},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Name",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.name:"",name:"companyInformation.name",handleChange:r}),s.a.createElement(Ct.a,{name:"companyInformation.name",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Website"),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.website:"",name:"companyInformation.website",handleChange:r}),s.a.createElement(Ct.a,{name:"companyInformation.website",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Address",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.address:"",name:"companyInformation.address",handleChange:r}),s.a.createElement(Ct.a,{name:"companyInformation.address",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Zip Code",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.zipcode:"",name:"companyInformation.zipcode",handleChange:r}),s.a.createElement(Ct.a,{name:"companyInformation.zipcode",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"City",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.city:"",name:"companyInformation.city",handleChange:r}),s.a.createElement(Ct.a,{name:"companyInformation.city",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:4},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"State",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement("div",{className:"c-select"},s.a.createElement(Ct.b,{component:"select",className:"form-control",placeholder:"State",value:l.companyInformation?l.companyInformation.state:"",name:"companyInformation.state",handleChange:r},s.a.createElement("option",{value:""},"Select"),";",t)),s.a.createElement(Ct.a,{name:"companyInformation.state",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Phone No.",s.a.createElement("span",{className:"text-danger"},"*")),s.a.createElement(Xt.a,{mask:"999-999-9999",maskChar:"",formControlProps:{fullWidth:!0},className:"form-control",value:l.companyInformation?l.companyInformation.phoneNumber:"",name:"companyInformation.phoneNumber",onChange:function(t){e.setMobile(t.target.value,"companyInformation.phoneNumber",o)}},function(e){return s.a.createElement(Ct.b,e)}),s.a.createElement(Ct.a,{name:"companyInformation.phoneNumber",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Fax"),s.a.createElement(Ct.b,{type:"text",className:"form-control",value:l.companyInformation?l.companyInformation.faxNumber:"",name:"companyInformation.faxNumber",handleChange:r})))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Type of Business"),s.a.createElement("div",{className:"c-select"},s.a.createElement(Ct.b,(n={name:"",component:"select",className:"form-control",placeholder:"Type of Business",value:l.companyInformation?l.companyInformation.typeOfBusiness:""},Object(Nt.a)(n,"name","companyInformation.typeOfBusiness"),Object(Nt.a)(n,"handleChange",r),n),s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Brokerage"},"Brokerage"))),s.a.createElement(Ct.a,{name:"companyInformation.typeOfBusiness",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:6},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{className:"control-label"},"Company Size"),s.a.createElement("div",{className:"c-select"},s.a.createElement(Ct.b,{component:"select",className:"form-control",placeholder:"Company Size",value:l.companyInformation?l.companyInformation.companySize:"",name:"companyInformation.companySize",handleChange:r},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"1-10"},"Small (1-10)"),s.a.createElement("option",{value:"11-24"},"Medium (11-24)"),s.a.createElement("option",{value:"24+"},"Large (24+)"))),s.a.createElement(Ct.a,{name:"companyInformation.companySize",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement("div",{className:"modal-footer modal-footer-inner"},s.a.createElement(x.a,{variant:"primary",size:"sm",className:"btn-blue w-140",type:"submit"},"Update"),s.a.createElement(x.a,{variant:"outlined",size:"sm",className:"btn-blue w-140",onClick:function(){return e.setState({companyInfo:!e.state.companyInfo})}},"Cancel")))}))),s.a.createElement(Wa.a,{show:this.state.deletePrompt,onHide:function(){return e.deletePrompt()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},s.a.createElement(qa.a,null),s.a.createElement("p",null,"Are you sure you want to delete?")),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.deletePrompt()}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.confirmDelete(e.state.deleteType,e.state.deleteIndex)}},"Yes"))))}}]),t}(s.a.Component),vl=Object(B.b)(function(e){return{profileData:e.reducer.profileData}},{myProfileAction:dt,updateProfileAction:function(e){return function(t){return mt.putMethod(ct.MyProfileUrl,e,!0).then(function(e){""!==e._id?t({type:G,updatedProfileData:e}):(e.status,t({type:G,updatedProfileData:{}}))})}}})(El),yl=a(1436),bl=a(1437),Nl=a(304),Dl=a.n(Nl),kl=a(305),Tl=a.n(kl),Cl=[{value:"Email",label:"Email"},{value:"Text",label:"Text"},{value:"Interactive",label:"Interactive"}],wl=a(53),Al=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),r=Object(wn.a)(s,1)[0];return n.splice(a,0,r),n},Sl=function(e,t,a,n){var s={};if(e&&t&&a&&n){var r=Array.from(e),l=Array.from(t),o=r.splice(a.index,1),i=Object(wn.a)(o,1)[0];l.splice(0,0,i),s[a.droppableId]=r,s[n.droppableId]=l}return s},Il=Bs.EditorState.createEmpty(),xl=Bs.EditorState.createEmpty(),Ml=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).id2List={droppable:"items",droppable2:"selected",droppable0:"sd"},a.getList=function(e){return a.state.tasksList[e]||[]},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n)if(t.droppableId===n.droppableId){var s=Al(a.getList(t.droppableId),t.index,n.index),r={items:s};"droppable2"===t.droppableId&&(r={selected:s}),a.setState(r)}else{var l=Sl(a.getList(t.droppableId),a.getList(n.droppableId),t,n),o=a.state.tasksList;o[t.droppableId]=l[t.droppableId],o[n.droppableId]=l[n.droppableId],o[n.droppableId][0].day=n.droppableId.replace("droppable",""),a.getDataToPost(o[n.droppableId][0]),a.updateTaskData(o[n.droppableId][0],"drag")}},a.addTaskSlide=function(e,t){var n=0;0===e&&(n=t.target.getAttribute("data-day")),Il=Bs.EditorState.createEmpty(),xl=Bs.EditorState.createEmpty();var s={eventtemplateId:"",eventDay:n,commId:"",taskTitle:"",taskType:"COMMUNICATION",communicationType:"EMAIL",emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",description:"",contingency:"",time:540};a.setState({isUpdate:!1}),0==e?a.setState({communicationTask:"",interactiveTask:"",initialValueAddTask:s,taskType:"COMMUNICATION",showText:!0},function(){a.setState({addTask:"open"})}):a.setState({addTask:"",initialValueAddTask:s})},a.state={AllRefVar:[],AllRefVarForMapping:[],DependencyModal:!1,activeCampaign:"Select",addTask:"",affectedTasks:[],allContingencies:[],assigneeOptions:[{label:"select",value:""}],buyerMasterTemplates:[],campaignDaysCnt:0,campaignstyles:[],communicationTask:"",contingencies:[],currentCampian:{},dependencyIsActive:!1,editCampaign:!1,emailRefVar:[],initialValueAddTask:{assignee:"",communicationType:0,contingency:"",description:"",document:!0,emailSubject:"",emailText:"",emailTo:"",eventDay:0,msgText:"",msgTo:"",taskTitle:"",taskType:"Communication",time:540},initialValueEditCampaign:{campaignDays:0,campaignDesc:"",campainId:"",campainName:""},interactiveTask:"",isCampFromClone:!1,isCampUpdate:!1,isTemplateOptSelected:!1,isUpdate:!1,items:[],moveConfirmationModal:!1,moveTaskPostData:{},selected:[],showAllVariableListStyle:{display:"none"},showEmailVariableList:!1,showEmailVariableListStyle:{display:"none"},showLoader:!0,showText:!0,showTextVariableListStyle:{display:"none"},taskType:"Communication",tasksList:{},originalTaskList:{},tempTemplate:{},textRefVar:[],variablesRefs:[],campContingencies:[],contingencyOptions:[],showFilterDropdown:!1,filterParam:{},filterType:null,filterContingency:null,filtered:!1,searchParam:"",searched:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getStyle",value:function(e,t){if(!t.isDropAnimating)return e;var a=t.dropAnimation,n=a.moveTo,s=a.curve,r=a.duration,l="translate(".concat(n.x,"px, ").concat(n.y,"px)");return Object(Cn.a)({},e,{background:"#ff8",borderColor:"#e6e67a",transform:"".concat(l," ").concat("scale(1.05)"),transition:"all ".concat(s," ").concat(r+1,"s")})}},{key:"closeModal",value:function(e){this.setState({DependencyModal:!this.state.DependencyModal}),this.changeCampaign(this.state.currentCampian._id)}},{key:"templatesScroll",value:function(){var e=Et()(".master-template-body").scrollLeft();Et()(".master-template-header").scrollLeft(e)}},{key:"goToDate",value:function(){var e=Et()(".go-to-dropdown").val(),t=Et()(".master-template-column").outerWidth();Et()(".master-template-body").animate({scrollLeft:t*e},800)}},{key:"getDataToPost",value:function(e){var t=e;if("COMMUNICATION"===e.type.name.toUpperCase()){var a=!0;if("EMAIL"===e.communicationType.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:0,emailTo:e.communicationTo,emailSubject:e.communicationSubject,emailText:e.description,msgTo:"",msgText:"",assignee:e.assignee,description:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,time:e.time,predecessor:e.predecessor||[],successor:e.successor||[],predecessorData:e.predecessorData||[],successorData:e.successorData||[]},taskType:"COMMUNICATION",showText:a};if("TEXT"===e.communicationType.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.communicationType,communicationType:1,msgTo:e.communicationTo,msgText:e.description,emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,description:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,time:e.time,predecessor:e.predecessor||[],successor:e.successor||[],predecessorData:e.predecessorData||[],successorData:e.successorData||[]},taskType:"COMMUNICATION",showText:a=!1}}if("INTERACTIVE"===e.type.name.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:0,msgTo:"",msgText:"",emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,description:e.description,contingency:void 0!==e.contingency?e.contingency:"",document:void 0!==e.document&&e.document,time:e.time,predecessor:e.predecessor||[],successor:e.successor||[],predecessorData:e.predecessorData||[],successorData:e.successorData||[]},taskType:"INTERACTIVE",showText:!1}}},{key:"editTask",value:function(e){var t=[];this.state.variablesRefs.forEach(function(a){"all"!==a.contingency&&a.contingency!==e.contingency||"user"!==a.account||t.push({label:a.name,value:a.name})}),this.setState({assigneeOptions:t}),Il=Bs.EditorState.createEmpty(),xl=Bs.EditorState.createEmpty();var a=e,n={};try{if("COMMUNICATION"===e.type.name.toUpperCase()){var s=!0;if("EMAIL"===e.communicationType.toUpperCase()){var r=Gs()(e.description&&e.description.length>0&&e.description[0]);if(r){var l=Bs.ContentState.createFromBlockArray(r.contentBlocks);Il=Bs.EditorState.createWithContent(l)}var o,i=void 0!==e.communicationTo&&null!==e.communicationTo?e.communicationTo.split(" "):[];for(o=0;o<i.length;o++){-1!=this.state.AllRefVarForMapping.indexOf(i[o])&&(i[o]="{("+i[o]+")}")}var c,m=void 0!==e.communicationSubject&&null!==e.communicationSubject?e.communicationSubject.split(" "):[];for(c=0;c<m.length;c++){-1!=this.state.AllRefVarForMapping.indexOf(m[c])&&(m[c]="{("+m[c]+")}")}n={eventId:e._id,campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],predecessor:e.predecessor||[],successor:e.successor||[],eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name.toUpperCase(),communicationType:e.communicationType,emailTo:i.join(" "),emailSubject:m.join(" "),emailText:e.description||"",msgTo:"",msgText:"",assignee:e.assignee,description:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,time:e.time},n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"COMMUNICATION",showText:s})}if("TEXT"===e.communicationType.toUpperCase()){var d,u=void 0!==e.communicationTo&&null!==e.communicationTo?e.communicationTo.split(" "):[];for(d=0;d<u.length;d++){-1!=this.state.AllRefVarForMapping.indexOf(u[d])&&(u[d]="{("+u[d]+")}")}n={eventId:e._id,campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],predecessor:e.predecessor||[],successor:e.successor||[],eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name.toUpperCase(),communicationType:e.communicationType,msgTo:u.join(" "),msgText:e.description,emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,description:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,time:e.time},s=!1,n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"COMMUNICATION",showText:s})}this.setState({communicationTask:"",addTask:"open",interactiveTask:""})}}catch(E){}if("INTERACTIVE"===e.type.name.toUpperCase()){var p=Gs()(e.description&&e.description.length>0&&e.description[0]);if(p){var h=Bs.ContentState.createFromBlockArray(p.contentBlocks);xl=Bs.EditorState.createWithContent(h)}var g,f=void 0!==e.communicationTo&&null!==e.communicationTo?e.communicationTo.split(" "):[];for(g=0;g<f.length;g++){-1!=this.state.AllRefVarForMapping.indexOf(f[g])&&(f[g]="{("+f[g]+")}")}n={eventId:e._id,campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],predecessor:e.predecessor||[],successor:e.successor||[],eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name.toUpperCase(),communicationType:e.communicationType,msgTo:"",msgText:"",emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,description:e.description,contingency:void 0!==e.contingency?e.contingency:"",document:void 0!==e.document&&e.document,time:e.time},n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"INTERACTIVE",showText:!1}),this.setState({communicationTask:"",addTask:"open",interactiveTask:""})}this.setState({isUpdate:!0})}},{key:"showTaskType",value:function(e,t){this.setState({selectValue:e.target.value}),"COMMUNICATION"==e.target.value?(this.state.initialValueAddTask.taskType="COMMUNICATION",this.setState({taskType:"COMMUNICATION",showText:!0}),"EMAIL"===t.communicationType?this.setState({showText:!0}):this.setState({showText:!1})):(this.state.initialValueAddTask.taskType="INTERACTIVE",this.setState({taskType:"INTERACTIVE",showText:!1}))}},{key:"showText",value:function(e){"EMAIL"==e.target.value?this.setState({showText:!0}):this.setState({showText:!1})}},{key:"editCampaign",value:function(e){if(this.setState({editCampaign:!this.state.editCampaign}),""!==e)this.setState({initialValueEditCampaign:{campainId:e._id,campainName:e.name,campaignDays:e.campaignDays,campaignDesc:e.description,contingencies:e.contingencies},isCampUpdate:!0,isTemplateOptSelected:!0});else{for(var t={},a=0;a<this.state.allContingencies.length;a++)t[this.state.allContingencies[a].name]=this.state.allContingencies[a].name;this.setState({initialValueEditCampaign:{campainName:"",campaignDays:"",campaignDesc:"",contingencies:t},isCampUpdate:!1,isTemplateOptSelected:!1})}}},{key:"getContingenciesByCampIdForClone",value:function(e){for(var t=this.state.campaignstyles,a=[],n=0;n<t.length;n++)t[n]._id===e&&(a=t[n].contingencies);return a}},{key:"createCampaign",value:function(e){var t=this;this.setState({showLoader:!0});var a,n=e.contingencies;this.state.isTemplateOptSelected&&this.state.isCampFromClone?(a={campaign:e.selectedCampaign,name:e.campainName,description:e.campaignDesc,campaignDays:e.campaignDays,contingencies:n},this.props.adminCopyCampaignMaterTemplateAction(a).then(function(e){var a=t.state.campaignstyles;a.push(t.props.addedCampaign),t.setState({campaignstyles:a}),t.changeCampaign(t.props.addedCampaign._id),t.setState({showLoader:!1})})):(a={name:e.campainName,description:e.campaignDesc,campaignDays:e.campaignDays,contingencies:n},this.props.createCampaignAction(a).then(function(e){var a=t.state.campaignstyles;a.push(t.props.newCampaign),t.setState({campaignstyles:a}),t.changeCampaign(t.props.newCampaign._id),t.setState({showLoader:!1})})),this.setState({editCampaign:!this.state.editCampaign})}},{key:"selectCampaignCreate",value:function(e){0==e.target.value?this.setState({isTemplateOptSelected:!0,isCampFromClone:!0}):this.setState({isTemplateOptSelected:!0,isCampFromClone:!1})}},{key:"existingCampaignList",value:function(){for(var e=[],t=0,a=this.state.campaignstyles.length;t<a;t++){var n=this.state.campaignstyles[t],r=s.a.createElement("option",{value:n._id,key:"camp-"+n._id},n.name);e.push(r)}return e}},{key:"getActiveCampaign",value:function(e){this.setState({activeCampaign:e})}},{key:"componentDidMount",value:function(){var e=this,t=navigator.userAgent;t.match("Macintosh")?Et()(".master-template-header").addClass("mac"):t.match("Windows")&&Et()(".master-template-header").addClass("win"),this.props.getBuyerAgentMasterTemplateAction(),this.props.getAllContigencyAction().then(function(t){e.setState({allContingencies:t})})}},{key:"updateCampaignData",value:function(e){var t=this,a={name:e.campainName,description:e.campaignDesc,campaignDays:e.campaignDays,contingencies:e.contingencies};this.props.updateTaskAction(a,"&model=campaign","",e.campainId,0,0).then(function(e){t.props.getBuyerAgentMasterTemplateAction().then(function(e){var a=[];if(void 0!==t.props.buyerMasterTemplates&&0!==t.props.buyerMasterTemplates.length){for(var n=0,s=t.props.buyerMasterTemplates.length;n<s;n++){var r=t.props.buyerMasterTemplates[n],l={_id:r._id,name:r.name,description:r.description,campaignDays:r.campaignDays,contingencies:r.contingencies,createdDate:r.createdDate,modifiedDate:r.modifiedDate,predecessor:r.predecessor,successor:r.successor,isBySystem:!(void 0===r.system||!r.system)};a.push(l)}t.setState({campaignstyles:a,campaignDaysCnt:t.props.buyerMasterTemplates[0].campaignDays,activeCampaign:t.props.buyerMasterTemplates[0].name,currentCampian:t.props.buyerMasterTemplates[0]},function(){t.changeCampaign(t.state.currentCampian._id)})}})}),this.setState({editCampaign:!this.state.editCampaign})}},{key:"updateTaskData",value:function(e,t){var a,n,s=this;console.log(e),this.setState({showLoader:!0}),"drag"==t?(n=e._id,a={_id:e._id,communicationSubject:[e.communicationSubject],predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],communicationTo:[e.communicationTo],communicationType:e.taskType,contingency:e.contingency,description:e.description,campaign:this.state.currentCampian._id,day:Number(e.day),eventType:e.type?e.type.name:"COMMUNICATION",title:e.label,document:e.document,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time,assignee:e.assignee.replace(/\{\(/g,"").replace(/\)\}/g,"")||""}):(n=e.commId,a={_id:e.commId,communicationSubject:"TEXT"==e.communicationType?[]:[e.emailSubject],predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],communicationTo:"TEXT"==e.communicationType?[e.msgTo]:[e.emailTo],communicationType:e.communicationType,contingency:e.contingency,description:"COMMUNICATION"==e.taskType?"TEXT"==e.communicationType?e.msgText:e.emailText:e.description,campaign:this.state.currentCampian._id,day:Number(e.eventDay),eventType:e.taskType||"COMMUNICATION",title:e.taskTitle,document:e.document,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time,assignee:e.assignee.replace(/\{\(/g,"").replace(/\)\}/g,"")||""}),this.props.updateTaskAction(a,"",0,n,e.commId,"").then(function(t){if(void 0!=t&&t.length>0){var r=t||[];s.setState({moveConfirmationModal:!0,affectedTasks:r,moveTaskPostData:{postData:a,model:"both",eventtemplateId:n,communicationtemplateId:e.commId,type:""}})}else void 0!=t&&t.hasOwnProperty("message")?s.setState({moveErrorModal:!0,moveErrorMessage:t.message}):s.props.updateDependentTaskAction(a,"",0,n,e.commId,"").then(function(e){s.changeCampaign(s.state.currentCampian._id)})}),this.setState({addTask:"",showLoader:!1})}},{key:"confirmMove",value:function(){var e=this;this.setState({moveConfirmationModal:!1,showLoader:!0}),this.props.updateDependentTaskAction(this.state.moveTaskPostData.postData,"both",0,this.state.moveTaskPostData.eventtemplateId,this.state.moveTaskPostData.communicationtemplateId,this.state.moveTaskPostData.type).then(function(t){e.setState({showLoader:!1}),e.changeCampaign(e.state.currentCampian._id)})}},{key:"changeCampaign",value:function(e,t){var a=this;this.setState({showLoader:!0,addTask:""}),this.props.getTasksByCampaignIdAction(e).then(function(e){var t=e.data;a.setState({campaignDaysCnt:t[0].campaignDays,activeCampaign:t[0].name,currentCampian:t[0]},function(){a.getContingencyOptions()});var n="",s={};t&&(n=t[0]);var r=[];if(void 0!==n&&""!==n&&null!==n)for(var l=n.events,o=0;o<l.length;o++)r["day"+l[o].day]=r["day"+l[o].day]||[],r["day"+l[o].day].push(l[o]);for(var i=0,c=a.state.campaignDaysCnt;i<c;i++){for(var m=void 0!==r["day"+i]?r["day"+i]:[],d=[],u=0;u<m.length;u++){var p;if("COMMUNICATION"===m[u].type.name)(p={})._id=m[u]._id,p.type=m[u].type,p.eventType=m[u].eventType,p.predecessorData=m[u].predecessorData?m[u].predecessorData:[],p.successorData=m[u].successorData?m[u].successorData:[],p.day=m[u].day,p.label=m[u].title,p.contingency=m[u].contingency||"",p.communicationType=m[u].communicationType,p.communicationTo=m[u].communicationTo?m[u].communicationTo[0]:"",p.communicationSubject=m[u].communicationSubject?m[u].communicationSubject[0]:"",p.description=m[u].description,p.modifiedDate=m[u].modifiedDate,p.predecessor=m[u].predecessor,p.successor=m[u].successor,p.time=m[u].time,p.assignee=m[u].assignee,d.push(p);else(p={template:m[u].template})._id=m[u]._id,p.eventtemplateId=m[u]._id,p.predecessorData=m[u].predecessorData?m[u].predecessorData:[],p.successorData=m[u].successorData?m[u].successorData:[],p.type=m[u].type,p.eventType=m[u].eventType,p.isActive=m[u].isActive,p.day=m[u].day,p.label=m[u].title,p.contingency=m[u].contingency,p.description=m[u].description,p.modifiedDate=m[u].modifiedDate,p.predecessor=m[u].predecessor,p.successor=m[u].successor,p.time=m[u].time,p.assignee=m[u].assignee,d.push(p)}d.sort(function(e,t){return e.modifiedDate>t.modifiedDate?-1:1}),s["droppable"+i]=d}a.setState({tasksList:s,originalTaskList:s,showLoader:!1})})}},{key:"createTaskData",value:function(e){var t=this;console.log("create data",e),this.setState({showLoader:!0});var a={campaign:this.state.currentCampian._id,title:e.taskTitle,day:e.eventDay,contingency:e.contingency,eventType:e.taskType,time:e.time};if("INTERACTIVE"===e.taskType)a.assignee=e.assignee.replace("{(","").replace(")}",""),a.description=e.description,a.document=e.document;else if("EMAIL"===e.communicationType){var n=e.emailTo.replace("{(","").replace(")}",""),s=e.emailSubject.replace("{(","").replace(")}","");a.communicationType="EMAIL",a.communicationTo=[n],a.communicationSubject=[s],a.description=e.emailText}else{var r=e.msgTo.replace("{(","").replace(")}","");a.communicationType="TEXT",a.communicationTo=r,a.description=e.msgText}this.props.createTaskAction(a).then(function(e){t.changeCampaign(e.campaign||t.state.currentCampian._id)}),this.setState({addTask:""}),this.setState({initialValueAddTask:{taskTitle:"",taskType:"Communication",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",description:"",contingency:"",document:!0,eventDay:0,time:540}})}},{key:"deleteTask",value:function(e){var t=this;this.props.deleteTaskAction(e._id).then(function(e){t.changeCampaign(t.state.currentCampian._id)})}},{key:"clearTaskDataFromModal",value:function(){this.setState({initialValueAddTask:{taskTitle:"",taskType:"Communication",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",description:"",contingency:"",document:!0,eventDay:0,time:540}})}},{key:"DependencyModal",value:function(e,t){var a=this;if(e){var n=e.eventDay,s=e.eventId,r=e.campaignId;this.props.GetDependencytasksAction(r,n,s,"USER").then(function(e){200==e.status&&a.setState({DependencyModal:!a.state.DependencyModal,dependencytasklist:a.props.dependencyTasks,actiontaken:t})})}else this.setState({DependencyModal:!this.state.DependencyModal})}},{key:"componentWillMount",value:function(){var e=this;this.setState({showLoader:!0}),this.props.adminGetVarriableRefAction().then(function(t){for(var a=[],n=[],s=[],r=[],l=[],o=0,i=e.props.variablesRefs.length;o<i;o++)s.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name}),r.push(e.props.variablesRefs[o].name),l.push({text:e.props.variablesRefs[o].name,value:e.props.variablesRefs[o].name.replace("@",""),url:""}),"EMAIL"===e.props.variablesRefs[o].communicationtype&&a.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name}),"TEXT"===e.props.variablesRefs[o].communicationtype&&n.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name});e.setState({variablesRefs:e.props.variablesRefs,emailRefVar:a,textRefVar:n,AllRefVar:s,AllRefVarForEditor:l,AllRefVarForMapping:r})}),this.props.getBuyerAgentMasterTemplateAction().then(function(t){var a=[];if(void 0!==e.props.buyerMasterTemplates&&0!==e.props.buyerMasterTemplates.length){for(var n=0,s=e.props.buyerMasterTemplates.length;n<s;n++){var r=e.props.buyerMasterTemplates[n],l={_id:r._id,name:r.name,description:r.description,campaignDays:r.campaignDays,contingencies:r.contingencies,createdDate:r.createdDate,modifiedDate:r.modifiedDate,predecessor:r.predecessor,successor:r.successor,isBySystem:!(void 0===r.system||!r.system)};a.push(l)}e.setState({campaignstyles:a,campaignDaysCnt:e.props.buyerMasterTemplates[0].campaignDays,activeCampaign:e.props.buyerMasterTemplates[0].name,currentCampian:e.props.buyerMasterTemplates[0]},function(){e.getContingencyOptions()})}var o="",i={};void 0!==e.props.buyerMasterTemplates&&(o=e.props.buyerMasterTemplates[0]);var c=[];if(void 0!==o&&""!==o&&null!==o){var m=o.events,d=0;for(s=m.length;d<s;d++)c["day"+m[d].day]=c["day"+m[d].day]||[],c["day"+m[d].day].push(m[d])}for(n=0,s=e.state.campaignDaysCnt;n<s;n++){for(var u=void 0!==c["day"+n]?c["day"+n]:[],p=[],h=0;h<u.length;h++){var g;if("COMMUNICATION"===u[h].type.name)(g={})._id=u[h]._id,g.type=u[h].type,g.eventType=u[h].eventType,g.day=u[h].day,g.label=u[h].title,g.contingency=u[h].contingency||"",g.communicationType=u[h].communicationType,g.communicationTo=u[h].communicationTo?u[h].communicationTo[0]:"",g.communicationSubject=u[h].communicationSubject?u[h].communicationSubject[0]:"",g.description=u[h].description,g.modifiedDate=u[h].modifiedDate,g.predecessorData=u[h].predecessorData?u[h].predecessorData:[],g.successorData=u[h].successorData?u[h].successorData:[],g.successor=u[h].successor?u[h].successor:[],g.predecessor=u[h].predecessor?u[h].predecessor:[],g.time=u[h].time,g.assignee=u[h].assignee,p.push(g);else(g={template:u[h].template})._id=u[h]._id,g.eventtemplateId=u[h]._id,g.type=u[h].type,g.eventType=u[h].eventType,g.isActive=u[h].isActive,g.day=u[h].day,g.label=u[h].title,g.contingency=u[h].contingency,g.description=u[h].description,g.modifiedDate=u[h].modifiedDate,g.predecessorData=u[h].predecessorData?u[h].predecessorData:[],g.successorData=u[h].successorData?u[h].successorData:[],g.successor=u[h].successor?u[h].successor:[],g.predecessor=u[h].predecessor?u[h].predecessor:[],g.time=u[h].time,g.assignee=u[h].assignee,p.push(g)}p=wl.sortBy(p,"time"),i["droppable"+n]=p}e.setState({tasksList:i,originalTaskList:i})}),this.setState({showLoader:!1})}},{key:"componentWillReceiveProps",value:function(e){if(this.setState(e),void 0!==e.variablesRefs){for(var t=[],a=[],n=[],s=0,r=e.variablesRefs.length;s<r;s++)n.push({id:e.variablesRefs[s].name,display:e.variablesRefs[s].name}),"EMAIL"===e.variablesRefs[s].communicationtype&&t.push({id:e.variablesRefs[s].name,display:e.variablesRefs[s].name}),"TEXT"===e.variablesRefs[s].communicationtype&&a.push({id:e.variablesRefs[s].name,display:e.variablesRefs[s].name});this.setState({variablesRefs:e.variablesRefs,emailRefVar:t,textRefVar:a,AllRefVar:n})}}},{key:"getContingenciesByCamp",value:function(){var e=this.state.currentCampian,t=[];for(var a in t.push(s.a.createElement("option",{value:"",key:"contingencies0"},"Select")),e.contingencies)e.contingencies.hasOwnProperty(a)&&t.push(s.a.createElement("option",{value:a,key:a},a));return t}},{key:"closeErrorModal",value:function(){this.setState({moveErrorModal:!1}),this.changeCampaign(this.state.currentCampian._id)}},{key:"renderDaysLayer1",value:function(){var e=this,t=[];if(void 0!==this.state.currentCampian.system&&this.state.currentCampian.system)for(var a=0,n=this.state.campaignDaysCnt;a<n;a++)t.push(s.a.createElement("div",{className:"master-template-column",key:a},s.a.createElement("div",null,s.a.createElement("h2",null,"Day ",a))));else for(a=0,n=this.state.campaignDaysCnt;a<n;a++)t.push(s.a.createElement("div",{className:"master-template-column",key:a},s.a.createElement("div",null,s.a.createElement("h2",null,"Day ",a),s.a.createElement(x.a,{variant:"primary",className:"btn-blue","data-day":a,onClick:function(t){e.addTaskSlide(0,t)}},s.a.createElement(sr.a,{className:"mr-2"}),"Add New Task"))));return t}},{key:"getDaysList",value:function(){for(var e=[],t=0,a=this.state.campaignDaysCnt;t<a;t++)e.push(s.a.createElement("option",{value:t,key:t},t));return e}},{key:"renderDefaultDaysTasks",value:function(){var e=this,t="";void 0!==this.props.buyerMasterTemplates&&(t=this.props.buyerMasterTemplates[0]);var a=[];if(void 0!==t&&""!==t&&null!==t)for(var n=t.events,r=0,l=n.length;r<l;r++)a["day"+n[r].day]=a["day"+n[r].day]||[],a["day"+n[r].day].push(n[r]);var o=[],i=function(){var t=e.state.tasksList["droppable"+r]||[];o.push(s.a.createElement("div",{className:"master-template-column",key:"day-task"+r},s.a.createElement(Mn.c,{droppableId:"droppable"+r},function(a,n){return s.a.createElement("div",{ref:a.innerRef,style:(n.isDraggingOver,{background:"#fff",width:"100%"})},t.map(function(t,a){return s.a.createElement(Mn.b,{className:"demos",isDragDisabled:!(void 0===e.state.currentCampian.system||!e.state.currentCampian.system),key:t._id,draggableId:t._id,index:a},function(a,n){return s.a.createElement("div",Object.assign({className:"card-single",ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:e.getStyle(a.draggableProps.style,n)}),void 0!==e.state.currentCampian.system&&e.state.currentCampian.system?"":s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action card-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{href:"",onClick:function(){return e.editTask(t)}},"Edit"),s.a.createElement(M.a.Item,{href:"",onClick:function(){return e.deleteTask(t)}},"Delete"))),s.a.createElement("div",{className:"card-single-content",onClick:function(){if(void 0!==e.state.currentCampian.system&&e.state.currentCampian.system)return!1;e.editTask(t)}},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,"INTERACTIVE"===t.type.name?s.a.createElement(yl.a,{className:"card-type"}):s.a.createElement("div",null,"EMAIL"===t.communicationType?s.a.createElement(wt.a,{className:"card-type"}):s.a.createElement(bl.a,{className:"card-type"})))),s.a.createElement("h2",{title:t.label},s.a.createElement(Dl.a,{text:t.label,maxLine:"2",ellipsis:"...",trimRight:!0,basedOn:"letters"}))))})}),a.placeholder)})))};for(r=0,l=this.state.campaignDaysCnt;r<l;r++)i();return o}},{key:"renderCampaignDaysDropDown",value:function(){for(var e=[],t=0,a=this.state.campaignDaysCnt;t<a;t++){var n=s.a.createElement("option",{value:t,key:"campDay-"+t},t);e.push(n)}return e}},{key:"getEmailVariableListDropDown",value:function(){for(var e=this.state.emailRefVar,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&!0===e.shiftKey?e.preventDefault():"Enter"===e.key&&!1===e.shiftKey&&e.preventDefault()}},{key:"showEmailVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showEmailVariableListStyle:{display:"block"}})}},{key:"getTextVariableListDropDown",value:function(){for(var e=this.state.textRefVar,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"showTextVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showTextVariableListStyle:{display:"block"}})}},{key:"hideEmailTextVariableList",value:function(){this.setState({showEmailVariableListStyle:{display:"none"},showTextVariableListStyle:{display:"none"}})}},{key:"getAllVariableListDropDown",value:function(){for(var e=this.state.variablesRefs,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"showAllVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showAllVariableListStyle:{display:"block"}})}},{key:"changeDay",value:function(e){"prev"==e?Et()(".go-to-dropdown").val(Et()(".go-to-dropdown").val()-1>=0?Et()(".go-to-dropdown").val()-1:0):Et()(".go-to-dropdown").val(Number(Et()(".go-to-dropdown").val())<this.state.campaignDaysCnt-1?Number(Et()(".go-to-dropdown").val())+1:this.state.campaignDaysCnt-1),this.goToDate()}},{key:"getMinutes",value:function(e){return 60*Gt()(e).hour()+Gt()(e).minute()}},{key:"updateAssigneeOptions",value:function(e,t){var a=[];this.state.variablesRefs.forEach(function(t){"all"!==t.contingency&&t.contingency!==e||"user"!==t.account||a.push({label:t.name,value:t.name})}),this.setState({assigneeOptions:a},function(){t("assignee","")})}},{key:"clearFilter",value:function(){this.setState({filterContingency:null,filterType:null,tasksList:this.state.originalTaskList,filtered:!1})}},{key:"filterMasterTemplate",value:function(e,t){var a=this,n=t,s={};Object.keys(n).forEach(function(t){s[t]=n[t].filter(function(t){var n=!1,s=!1,r=!1,l=!1;return e.forEach(function(e){e&&("Interactive"==e.value&&(n="INTERACTIVE"===t.type.name),"Text"==e.value&&(r=t.communicationType===e.value.toUpperCase()),"Email"==e.value&&(l=t.communicationType===e.value.toUpperCase()),t.contingency===e.value&&(s=!0)),null==a.state.filterType&&(n=!0,r=!0,l=!0),null==a.state.filterContingency&&(s=!0)}),(n||r||l)&&s})}),this.setState({tasksList:s,filtered:!0})}},{key:"searchMasterTemplate",value:function(e,t){var a=t,n={};Object.keys(a).forEach(function(t){n[t]=a[t].filter(function(t){return(t.label+"").trim().toLowerCase().includes((e+"").trim().toLowerCase())})}),this.setState({tasksList:n,searchParam:e})}},{key:"getContingencyOptions",value:function(){var e=[];Object.keys(this.state.currentCampian.contingencies||{}).forEach(function(t){e.push({label:t,value:t})}),this.setState({contingencyOptions:e})}},{key:"render",value:function(){for(var e=this,t=[],a=function(){var a=e.state.campaignstyles[n],r=s.a.createElement(M.a.Item,{key:a._id,as:"li",eventKey:a.name},s.a.createElement("div",{onClick:function(){return e.changeCampaign(a._id,n)}},a.name),!a.isBySystem&&s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.editCampaign(a)}},s.a.createElement(la.a,null)));t.push(r)},n=0,r=this.state.campaignstyles.length;n<r;n++)a();var l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),emailTo:Tt.string().required("Please enter Email Recipient"),emailSubject:Tt.string().required("Please enter Subject")});if("COMMUNICATION"===this.state.taskType.toUpperCase())if(this.state.showText)l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),emailTo:Tt.string().required("Please enter Email Recipient"),emailSubject:Tt.string().required("Please enter Subject"),emailText:Tt.string().required("Please enter Email Message")});else l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),msgTo:Tt.string().required("Please enter Text Recipient"),msgText:Tt.string().required("Please enter Text Message")});else l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),description:Tt.string().required("Please enter Details")});return s.a.createElement("div",{className:"master-template"},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center trans-listing-head"},s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},"Buyer Agent Master Template")),s.a.createElement(Yt.a,{align:"right"},s.a.createElement(Ct.c,{className:"justify-content-end form-inline"},s.a.createElement(Ut.a,{className:"trans-listing-head-row"},s.a.createElement(Yt.a,{className:"col-auto pl-0 d-flex trans-listing-head-button"},s.a.createElement("div",{className:"mb-0 mx-auto form-group",style:{width:"350px"}},s.a.createElement(M.a,{className:"dropdown-campaign",onSelect:function(t){return e.getActiveCampaign(t)}},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic"},this.state.activeCampaign),s.a.createElement(M.a.Menu,null,t)))),s.a.createElement(Yt.a,{className:"col-auto pl-0 d-flex trans-listing-head-button"},s.a.createElement("div",{className:"mb-0 form-group"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-head d-flex align-items-center",onClick:function(){return e.editCampaign("")}},s.a.createElement(sr.a,{className:"mr-1"})," Create New Template"))),s.a.createElement(Yt.a,{className:"pl-0",style:{paddingRight:"10px"}},s.a.createElement(Ut.a,{className:"mx-0 align-items-center"},s.a.createElement(Yt.a,{className:"px-0 col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"p-0",onClick:function(){e.changeDay("prev")}},s.a.createElement(xr.a,null))),s.a.createElement(Yt.a,{className:"px-0"},s.a.createElement("div",{className:"mb-0 form-group"},s.a.createElement("div",{className:"c-select",style:{width:"60px"}},s.a.createElement("select",{name:"campaignDaysCnt",id:"campaignDaysCnt",className:"form-control form-control-sm form-control-head go-to-dropdown",onChange:function(){return e.goToDate()}},this.renderCampaignDaysDropDown())))),s.a.createElement(Yt.a,{className:"px-0 col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"p-0",onClick:function(){e.changeDay("next")}},s.a.createElement(ds.a,null))))))))),s.a.createElement(Ut.a,{className:"justify-content-end mx-0 align-items-center master-template-filter-row"},s.a.createElement(Yt.a,{xs:"3",className:"pl-0"},s.a.createElement("div",{className:"icon-wrapper"},s.a.createElement("input",{type:"text",className:"form-control form-control-head",placeholder:"Search",onChange:function(t){e.searchMasterTemplate(t.target.value,e.state.originalTaskList)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"activity-filter",show:this.state.showFilterDropdown},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement("img",{src:ks.a,alt:"filter",style:{width:"24px"},onClick:function(){e.setState({showFilterDropdown:!0})}})),s.a.createElement(M.a.Menu,{className:"activity-filter-menu"},s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement("h2",{className:"font-20 color-blue-4 mb-0"},"Filter")),s.a.createElement(Yt.a,{xs:"6",align:"right"},s.a.createElement(x.a,{variant:"link",className:"p-0 font-14",onClick:function(){e.clearFilter(),e.setState({showFilterDropdown:!1})}},"Clear All"))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By Type")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By Type",isMulti:!0,options:Cl,className:"react-select-wrapper react-select-multi",onChange:function(t){e.setState({filterType:t})},value:this.state.filterType}))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By Contingency")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By Contingency",isMulti:!0,options:this.state.contingencyOptions,className:"react-select-wrapper react-select-multi",onChange:function(t){e.setState({filterContingency:t})},value:this.state.filterContingency}))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(x.a,{type:"submit",variant:"primary",className:"btn-blue mr-2 w-140",onClick:function(){e.filterMasterTemplate(wl.concat(e.state.filterContingency,e.state.filterType),e.state.originalTaskList),e.setState({showFilterDropdown:!1})}},"Apply"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({showFilterDropdown:!1})}},"Cancel")))))),s.a.createElement(Yt.a,{className:"col-auto pl-0"},this.state.filtered&&s.a.createElement(x.a,{variant:"link",className:"font-12 py-0 px-2",onClick:function(){e.clearFilter()}},"Clear"))),s.a.createElement("div",{className:"master-template-container"},!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement("div",{className:"master-template-content"},s.a.createElement("div",{className:"master-template-row master-template-header more"},this.renderDaysLayer1()),void 0!==this.state.currentCampian.system&&this.state.currentCampian.system?s.a.createElement(Mn.a,null,s.a.createElement("div",{className:"master-template-body",onScroll:function(){return e.templatesScroll()}},s.a.createElement("div",{className:"master-template-row"},this.renderDefaultDaysTasks()))):s.a.createElement(Mn.a,{onDragEnd:this.onDragEnd},s.a.createElement("div",{className:"master-template-body",onScroll:function(){return e.templatesScroll()}},s.a.createElement("div",{className:"master-template-row"},this.renderDefaultDaysTasks()))),s.a.createElement("div",{className:this.state.addTask+" calendar-add-task add-new-task"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValueAddTask,enableReinitialize:!0,validationSchema:l,onSubmit:function(t,a){a.setSubmitting;e.state.isUpdate?e.updateTaskData(t,"submit"):e.createTaskData(t)}},function(t){t.handleChange;var a=t.errors,n=t.values,r=t.handleBlur,l=t.setFieldValue,o=(t.submitForm,t.touched),i=(t.loginError,t.setErrors);return s.a.createElement(Ct.c,null,s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,null,s.a.createElement(x.a,{variant:"transparent",className:"close-task",onClick:function(){e.addTaskSlide(1,""),e.clearTaskDataFromModal()}},s.a.createElement(j.a,null)),s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{xs:"8"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Title")),s.a.createElement(Yt.a,{xs:"4",align:"right"},s.a.createElement(Ut.a,{className:"justify-content-end mx-0 pr-4"},e.state.dependencyIsActive?s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(x.a,{variant:"transparent",className:"p-0 dep-btn",title:"Check Dependency",onClick:function(){return e.DependencyModal(n,"UPDATE")}},s.a.createElement("img",{src:Ks.a,style:{height:"24px",width:"24px"},alt:"dependency"}))):s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"task-action dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){return e.DependencyModal(n,"ADD")}},"Set Dependency",s.a.createElement(Ls.a,{style:{height:"20px"}}))))))),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Ct.b,{name:"taskTitle",type:"text",value:n.taskTitle,onChange:function(e){return l("taskTitle",e.target.value)},className:"task-add-input form-control"+(a.taskTitle&&o.taskTitle?" is-invalid":""),placeholder:"Write task here"}),s.a.createElement(Ct.a,{name:"taskTitle",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Day"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"eventDay",component:"select",value:n.eventDay,className:"form-control form-control-xs",onChange:function(e){return l("eventDay",e.target.value)}},e.getDaysList()))),s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Time"),s.a.createElement(Cs.a,{selected:new Date(Gt()().startOf("day").add({minutes:n.time}).format("MM DD YYYY h:mm a")),onChange:function(t){return l("time",e.getMinutes(t))},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",className:"form-control time-task form-control-xs pl-1"}))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Contingency"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"contingency",component:"select",value:n.contingency,className:"form-control form-control-xs",onChange:function(t){l("contingency",t.target.value),e.updateAssigneeOptions(t.target.value,l)}},e.getContingenciesByCamp())))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Type"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"taskType",component:"select",value:n.taskType,className:"form-control form-control-xs",onChange:function(t){l("taskType",t.target.value),e.updateAssigneeOptions(n.contingency,l),e.showTaskType(t,n),i({})}},s.a.createElement("option",{value:"COMMUNICATION"},"Communication"),s.a.createElement("option",{value:"INTERACTIVE"},"Interactive"))))),s.a.createElement("div",{style:{backgroundColor:"#f8f8f8"}},"COMMUNICATION"===e.state.taskType?s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 bg-blue-5 py-2 mb-2"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-1"},"Communication Type"),s.a.createElement("div",{className:"form-group mb-0"},s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check1",value:"EMAIL",onChange:function(t){e.showText(t),l("communicationType","EMAIL"),i({})},checked:"EMAIL"===n.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check1"},"Email")),s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check2",value:"TEXT",onChange:function(t){e.showText(t),l("communicationType","TEXT"),i({})},checked:"TEXT"===n.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check2"},"Text"))))),e.state.showText?s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular"},s.a.createElement(Hs.b,{singleLine:!0,name:"emailTo",type:"text",value:n.emailTo,className:"mail-row-mension "+(a.emailTo&&o.emailTo?" is-invalid":""),onChange:function(e){l("emailTo",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"",appendSpaceOnAdd:!0,data:e.state.emailRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"emailTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Subject")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-big"},s.a.createElement(Hs.b,{singleLine:!0,name:"emailSubject",type:"text",value:n.emailSubject,className:"mail-row-mension "+(a.emailSubject&&o.emailSubject?" is-invalid":""),onChange:function(e){l("emailSubject",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.AllRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"emailSubject",component:"div",className:"invalid-feedback",style:{display:"block"}})))):s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular"},s.a.createElement(Hs.b,{singleLine:!0,name:"msgTo",type:"text",value:n.msgTo,className:"mail-row-mension "+(a.msgTo&&o.msgTo?" is-invalid":""),onChange:function(e){l("msgTo",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.textRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"msgTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0"},e.state.showText?s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"emailText",editorState:Il,onEditorStateChange:function(e){var t=Fs()(Object(Bs.convertToRaw)(e.getCurrentContent())),a=Et()("<output>").append(Et.a.parseHTML(t));Et.a.map(a.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var n=a.html();l("emailText",n),Il=e},hashtag:{}}),s.a.createElement(Ct.a,{name:"emailText",component:"div",className:"invalid-feedback",style:{display:"block"}}))):s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Ct.b,{component:"textarea",name:"msgText",rows:"5",className:"form-control font-14",value:n.msgText}),s.a.createElement(Ct.a,{name:"msgText",component:"div",className:"invalid-feedback",style:{display:"block"}})))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mb-2 bg-blue-5 py-2"},s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},s.a.createElement("input",{name:"document",type:"checkbox",className:"custom-control-input",id:"docRequired",value:n.document,defaultChecked:!0,onChange:function(e){l("document",e.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"docRequired"},"Document upload required")))),s.a.createElement(Ut.a,{className:"mx-0 mail-row assign-var-row assign-var-row-first"},s.a.createElement(Yt.a,{className:"col-auto pr-0 assign-var-label"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Assign to")),s.a.createElement(Yt.a,{className:"assign-var-select"},s.a.createElement(ws.a,{onBlur:r,fullWidth:!0,onChange:function(e){l("assignee",e.value)},value:{label:n.assignee,value:n.assignee},className:"react-select-wrapper react-select-multi",name:"assignee",options:e.state.assigneeOptions}),s.a.createElement(Ct.a,{name:"assignee",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,null,s.a.createElement("h5",{className:"font-14 color-blue-4"},"Detail"),s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"description",editorState:xl,onEditorStateChange:function(e){var t=Fs()(Object(Bs.convertToRaw)(e.getCurrentContent())),a=Et()("<output>").append(Et.a.parseHTML(t));Et.a.map(a.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var n=a.html();l("description",n),xl=e},hashtag:{}})),s.a.createElement(Ct.a,{name:"description",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement(Ut.a,{className:"mx-0 py-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement(x.a,{type:"submit",size:"sm",className:"btn-blue w-140"},e.state.isUpdate?"Update Task":"Add Task")))))})))),s.a.createElement(Wa.a,{show:this.state.editCampaign,onHide:function(){return e.editCampaign("")},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 create-template-modal"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValueEditCampaign,enableReinitialize:!0,validationSchema:Tt.object().shape({campainName:Tt.string().required("Please enter Campaign Name"),campaignDays:Tt.string().nullable().trim().required("Please enter Campaign Duration")}),onSubmit:function(t,a){a.setSubmitting;e.state.isCampUpdate?e.updateCampaignData(t):e.createCampaign(t)}},function(t){t.handleChange;var a=t.errors,n=t.values,r=(t.handleBlur,t.setFieldValue),l=(t.submitForm,t.touched);t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin",onKeyDown:e.handleKeyDown},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},e.state.isCampUpdate?"Edit Campaign":"Create Campaign")),s.a.createElement(Wa.a.Body,{className:"pt-0"},e.state.isCampUpdate?"":s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,className:"text-center",style:{backgroundColor:"rgba(214, 245, 255, 0.5)",padding:"15px 0px",borderBottom:"1px solid #c1dce6"}},s.a.createElement("div",null,s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"checkTemplate",value:0,onChange:function(t){return e.selectCampaignCreate(t)}}),s.a.createElement("label",{className:"custom-control-label font-14 color-grey-1 font-500",htmlFor:"checkTemplate"},"Clone Existing Template")),s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"checkTemplate1",value:1,onChange:function(t){return e.selectCampaignCreate(t)}}),s.a.createElement("label",{className:"custom-control-label font-14 color-grey-1 font-500",htmlFor:"checkTemplate1"},"Create New Template")))),e.state.isTemplateOptSelected?"":s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"text-center py-5"},s.a.createElement("img",{src:Tl.a,alt:"no template",className:"image-responsive"}),s.a.createElement("p",{className:"color-dark-blue mt-2",style:{fontSize:"19px"}},"Create new template or clone your existing template")))),e.state.isTemplateOptSelected?s.a.createElement("div",null,s.a.createElement(Ut.a,null,e.state.isCampFromClone&&!e.state.isCampUpdate?s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group mb-0 mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Select Existing Campaign"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"existingTemplate",component:"select",className:"form-control font-14",onChange:function(t){r("selectedCampaign",t.target.value),r("contingencies",e.getContingenciesByCampIdForClone(t.target.value))}},s.a.createElement("option",null,"Select"),e.existingCampaignList())))):"",s.a.createElement(Yt.a,{xs:9},s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Campaign Name"),s.a.createElement(Ct.b,{name:"campainName",type:"text",value:n.campainName,className:"form-control form-control-sm"+(a.campainName&&l.campainName?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"campainName",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:3},s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Days"),s.a.createElement(Ct.b,{name:"campaignDays",type:"text",value:n.campaignDays,className:"form-control form-control-sm"+(a.campaignDays&&l.campaignDays?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"campaignDays",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement("hr",{className:"sep-line mt-0 mb-1"}),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Jn,{isMasterTemplate:!0,contingencies:n.contingencies,setFieldValue:r})))):""),e.state.isTemplateOptSelected?s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{type:"submit",variant:"primary",size:"sm",className:"btn-blue w-140"},e.state.isCampUpdate?"Update":"Create")):"")})),s.a.createElement(Wa.a,{show:this.state.DependencyModal,onHide:function(){return e.DependencyModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 dependency-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Set Dependency")),s.a.createElement(Wa.a.Body,null,s.a.createElement(Zs,{options:this.state.dependencyTasks,actiontaken:this.state.actiontaken,predecessors:this.state.initialValueAddTask.predecessorData,dependencies:function(t){e.closeModal(t)},eventId:this.state.initialValueAddTask.commId}))),s.a.createElement(Wa.a,{show:this.state.moveConfirmationModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement("p",{className:"text-center font-20 color-dark-blue"},"Are you sure you move this task?"),s.a.createElement("div",{className:"px-1"},s.a.createElement("p",{className:"mb-0 font-500 font-14"},"Here is the list of task that will be affected"),s.a.createElement("ul",{className:"dependency-modal-task-list font-12"},this.state.affectedTasks.map(function(e,t){if(e)return s.a.createElement("li",{key:e&&e.title}," Day - ",e&&e.day," ",e&&e.title)})))),s.a.createElement(Wa.a.Footer,{className:"justify-content-center pt-2"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.changeCampaign(e.state.currentCampian._id),e.setState({moveConfirmationModal:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.confirmMove()}},"Yes"))),s.a.createElement(Wa.a,{show:this.state.moveErrorModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},this.state.moveErrorMessage),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.closeErrorModal()}},"OK"))))}}]),t}(s.a.Component),Ol=Object(B.b)(function(e){return{buyerMasterTemplates:e.reducer.buyerMasterTemplates,totalBuyerTemplates:e.reducer.totalBuyerTemplates,isEventCommCreated:e.reducer.isEventCommCreated,addedEventComm:e.reducer.addedEventComm,isMasterTemplateUpdatedBuyer:e.reducer.isMasterTemplateUpdatedBuyer,updatedEventDataBuyer:e.reducer.updatedEventDataBuyer,variablesRefs:e.reducer.variablesRefs,isMasterTemplateTaskDeleted:e.reducer.isMasterTemplateTaskDeleted,BuyerCampDataById:e.reducer.BuyerCampDataById,newCampaign:e.reducer.newCampaign,contingencies:e.reducer.allContingencies,dependencyTasks:e.reducer.dependencyTasks,isCampaignCreated:e.reducer.isCampaignCreated,addedCampaign:e.reducer.addedCampaign}},{getBuyerAgentMasterTemplateAction:$n,updateTaskAction:function(e,t,a,n,s,r){return function(a){return mt.putMethod(ct.buyerAgentMasterTemplate+"?id="+n+t,e,!0).then(function(e){return 200===e.status?(a({type:ke,isMasterTemplateUpdatedBuyer:!0,updatedEventDataBuyer:e.data}),e.data):(a({type:ke,isMasterTemplateUpdatedBuyer:!1,updatedEventDataBuyer:[]}),e.data)})}},createTaskAction:function(e){return function(t){return mt.postMethod(ct.buyerAgentMasterTemplate,e,!0).then(function(e){return 200===e.status?t({type:be,isEventCommCreated:!0,addedEventComm:e.data}):t({type:be,isEventCommCreated:!1,addedEventComm:[]}),e.data})}},deleteTaskAction:function(e){return function(t){var a=ct.buyerAgentMasterTemplate+"?id="+e;return mt.deleteMethod(a,!0).then(function(e){200===e.status?t({type:Ne,isMasterTemplateTaskDeleted:!0}):t({type:Ne,isMasterTemplateTaskDeleted:!1})})}},adminGetVarriableRefAction:Rn,getTasksByCampaignIdAction:function(e){return function(t){return mt.getMethod(ct.buyerAgentMasterTemplate+"?campaign="+e,!0).then(function(e){return 200===e.status?t({type:Te,BuyerCampDataById:e.data.data}):t({type:Te,BuyerCampDataById:[]}),e.data},function(e){return e})}},createCampaignAction:function(e){return function(t){return mt.postMethod(ct.buyerAgentMasterTemplate+"?model=campaign",e,!0).then(function(e){200===e.status?t({type:ye,newCampaign:e.data}):t({type:ye,newCampaign:{}})})}},getAllContigencyAction:Un,GetDependencytasksAction:On,updateDependentTaskAction:function(e,t,a,n,s,r){return function(t){return mt.putMethod(ct.updateBuyerDependentTaskURL+n,e,!0).then(function(e){return 200===e.status?(t({type:le}),e.data):(t({type:le}),e)})}},adminCopyCampaignMaterTemplateAction:jn})(Ml),Rl=[{value:"Email",label:"Email"},{value:"Text",label:"Text"},{value:"Interactive",label:"Interactive"}],jl=function(e,t,a){var n=Array.from(e),s=n.splice(t,1),r=Object(wn.a)(s,1)[0];return n.splice(a,0,r),n},Ul=function(e,t,a,n){var s={};if(e&&t&&a&&n){var r=Array.from(e),l=Array.from(t),o=r.splice(a.index,1),i=Object(wn.a)(o,1)[0];l.splice(0,0,i),s[a.droppableId]=r,s[n.droppableId]=l}return s},Yl=Bs.EditorState.createEmpty(),Ll=Bs.EditorState.createEmpty(),Pl=a(53),Bl=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).id2List={droppable:"items",droppable2:"selected",droppable0:"sd"},a.getList=function(e){return a.state.tasksList[e]||[]},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n)if(t.droppableId===n.droppableId){var s=jl(a.getList(t.droppableId),t.index,n.index),r={items:s};"droppable2"===t.droppableId&&(r={selected:s}),a.setState(r)}else{var l=Ul(a.getList(t.droppableId),a.getList(n.droppableId),t,n),o=a.state.tasksList;o[t.droppableId]=l[t.droppableId],o[n.droppableId]=l[n.droppableId],o[n.droppableId][0].day=n.droppableId.replace("droppable","");var i=a.getDataToPost(o[n.droppableId][0]);a.updateTaskData(i.initialValueAddTask,"drag"),a.setState({tasksList:o})}},a.addTaskSlide=function(e,t){var n=0;0===e&&(n=t.target.getAttribute("data-day")),Yl=Bs.EditorState.createEmpty(),Ll=Bs.EditorState.createEmpty();var s={eventtemplateId:"",eventDay:n,commId:"",taskTitle:"",taskType:"COMMUNICATION",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",detailsMsg:"",contingency:"",time:540};a.setState({isUpdate:!1}),0==e?a.setState({addTask:"open",communicationTask:"",interactiveTask:"",initialValueAddTask:s,taskType:"COMMUNICATION",showText:!0}):a.setState({addTask:"",initialValueAddTask:s})},a.state={adminMasterTemplates:[],addTask:"",communicationTask:"",interactiveTask:"",taskType:"Communication",showText:!0,editCampaign:!1,activeCampaign:"Select",campaignstyles:[],initialValueEditCampian:{campainId:"",campaignDays:0,campainName:"",campaignDesc:"",contingencies:[]},campaignDaysCnt:0,currentCampian:{},tempTemplate:{},initialValueAddTask:{taskTitle:"",taskType:"Communication",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",detailsMsg:"",contingency:"",document:!0,eventDay:0,predecessorData:[],time:540},isUpdate:!1,contingencies:[],showLoader:!0,variablesRefs:[],emailRefVar:[],textRefVar:[],AllRefVar:[],AllRefVarForMapping:[],AllRefVarForEditor:[],showEmailVariableList:!1,showEmailVariableListStyle:{display:"none"},showTextVariableListStyle:{display:"none"},showAllVariableListStyle:{display:"none"},items:[],selected:[],tasksList:{},isCampUpdate:!1,allContingencies:[],isTemplateOptSelected:!1,isCampFromClone:!1,DependencyModal:!1,dependencyIsActive:!1,moveConfirmationModal:!1,affectedTasks:[],moveTaskPostData:{},moveErrorMessage:"",moveErrorModal:!1,assigneeOptions:[{label:"select",value:""}],campContingencies:[],contingencyOptions:[],showFilterDropdown:!1,originalTaskList:{},filterParam:{},filterType:null,filterContingency:null,filtered:!1,searchParam:"",searched:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"closeModal",value:function(e){this.setState({DependencyModal:!this.state.DependencyModal}),this.changeCampaign(this.state.currentCampian._id)}},{key:"templatesScroll",value:function(){var e=Et()(".master-template-body").scrollLeft();Et()(".master-template-header").scrollLeft(e)}},{key:"goToDate",value:function(){var e=Et()(".go-to-dropdown").val(),t=Et()(".master-template-column").outerWidth();Et()(".master-template-body").animate({scrollLeft:t*e},800)}},{key:"getStyle",value:function(e,t){if(!t.isDropAnimating)return e;var a=t.dropAnimation,n=a.moveTo,s=a.curve,r=a.duration,l="translate(".concat(n.x,"px, ").concat(n.y,"px)");return Object(Cn.a)({},e,{background:"#ff8",borderColor:"#e6e67a",transform:"".concat(l," ").concat("scale(1.05)"),transition:"all ".concat(s," ").concat(r+1,"s")})}},{key:"getMinutes",value:function(e){return 60*Gt()(e).hour()+Gt()(e).minute()}},{key:"getDataToPost",value:function(e){var t=e;if("COMMUNICATION"===e.type.name.toUpperCase()){if("EMAIL"===e.template.via.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:0,emailTo:e.template.to,emailSubject:e.template.subject,emailText:e.template.what,msgTo:"",msgText:"",assignee:e.assignee,detailsMsg:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},taskType:"COMMUNICATION",showText:!0};if("TEXT"===e.template.via.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:1,msgTo:e.template.to,msgText:e.template.what,emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,detailsMsg:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},taskType:"COMMUNICATION",showText:!1}}if("INTERACTIVE"===e.type.name.toUpperCase())return{tempTemplate:t,initialValueAddTask:{campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:0,msgTo:"",msgText:"",emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,detailsMsg:e.template.what,contingency:void 0!==e.contingency?e.contingency:"",document:void 0!==e.document&&e.document,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},taskType:"INTERACTIVE",showText:!1}}},{key:"editTask",value:function(e){var t=[];this.state.variablesRefs.forEach(function(a){"all"!==a.contingency&&a.contingency!==e.contingency||"user"!==a.account||t.push({label:a.name,value:a.name})}),this.setState({assigneeOptions:t}),Yl=Bs.EditorState.createEmpty(),Ll=Bs.EditorState.createEmpty();var a=e,n={};if("COMMUNICATION"===e.type.name.toUpperCase()){var s=!0;if("EMAIL"===e.template.via.toUpperCase()){var r=Gs()(e.template.what);if(r){var l=Bs.ContentState.createFromBlockArray(r.contentBlocks);Yl=Bs.EditorState.createWithContent(l)}var o,i=void 0!==e.template.to&&null!==e.template.to?e.template.to.split(" "):[];for(o=0;o<i.length;o++){-1!=this.state.AllRefVarForMapping.indexOf(i[o])&&(i[o]="{("+i[o]+")}")}var c,m=void 0!==e.template.subject&&null!==e.template.subject?e.template.subject.split(" "):[];for(c=0;c<m.length;c++){-1!=this.state.AllRefVarForMapping.indexOf(m[c])&&(m[c]="{("+m[c]+")}")}n={campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],communicationType:0,emailTo:i.join(" "),emailSubject:m.join(" "),emailText:e.template.what,msgTo:"",msgText:"",assignee:e.assignee,detailsMsg:"",contingency:void 0!==e.contingency?e.contingency:"",document:!0,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},s=!0,n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"COMMUNICATION",showText:s})}if("TEXT"===e.template.via.toUpperCase()){var d,u=void 0!==e.template.to&&null!==e.template.to?e.template.to.split(" "):[];for(d=0;d<u.length;d++){-1!=this.state.AllRefVarForMapping.indexOf(u[d])&&(u[d]="{("+u[d]+")}")}n={campaignId:this.state.currentCampian._id,eventtemplateId:e.eventtemplateId,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:1,msgTo:u.join(" "),msgText:e.template.what,emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,detailsMsg:"",contingency:void 0!==e.contingency?e.contingency:[],document:!0,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},s=!1,n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"COMMUNICATION",showText:s})}this.setState({communicationTask:"",addTask:"open",interactiveTask:""})}if("INTERACTIVE"===e.type.name.toUpperCase()){var p=Gs()(e.template.what);if(p){var h=Bs.ContentState.createFromBlockArray(p.contentBlocks);Ll=Bs.EditorState.createWithContent(h)}n={eventtemplateId:e.eventtemplateId,campaignId:this.state.currentCampian._id,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],eventDay:e.day,commId:e._id,taskTitle:e.label,taskType:e.type.name,communicationType:0,msgTo:"",msgText:"",emailTo:"",emailSubject:"",emailText:"",assignee:e.assignee,detailsMsg:e.template.what,contingency:void 0!==e.contingency?e.contingency:"",document:void 0!==e.document&&e.document,predecessor:e.predecessor||[],successor:e.successor||[],time:e.time},n.predecessorData.length>0?this.setState({dependencyIsActive:!0}):this.setState({dependencyIsActive:!1}),this.setState({tempTemplate:a,initialValueAddTask:n,taskType:"INTERACTIVE",showText:!1}),this.setState({communicationTask:"",addTask:"open",interactiveTask:""})}this.setState({isUpdate:!0})}},{key:"showTaskType",value:function(e){this.setState({selectValue:e.target.value}),"COMMUNICATION"==e.target.value?(this.state.initialValueAddTask.taskType="COMMUNICATION",this.setState({taskType:"COMMUNICATION",showText:!0}),0===this.state.initialValueAddTask.communicationType?this.setState({showText:!0}):this.setState({showText:!1})):(this.state.initialValueAddTask.taskType="INTERACTIVE",this.setState({taskType:"INTERACTIVE",showText:!1}))}},{key:"showText",value:function(e){"0"==e.target.value?(this.state.initialValueAddTask.communicationType=0,this.setState({showText:!0})):(this.state.initialValueAddTask.communicationType=1,this.setState({showText:!1}))}},{key:"getActiveCampaign",value:function(e,t){this.setState({activeCampaign:e})}},{key:"componentDidMount",value:function(){var e=this,t=navigator.userAgent;t.match("Macintosh")?Et()(".master-template-header").addClass("mac"):t.match("Windows")&&Et()(".master-template-header").addClass("win"),this.props.getAllContigencyAction().then(function(t){e.setState({allContingencies:t})})}},{key:"createNewCampaign",value:function(){this.setState({editCampaign:!this.state.editCampaign,isCampUpdate:!1}),this.setState({initialValueEditCampian:{campainName:"",campaignDays:"",campaignDesc:"",contingencies:[]}})}},{key:"editCampaign",value:function(e){if(this.setState({editCampaign:!this.state.editCampaign}),""!==e)this.setState({initialValueEditCampian:{campainId:e._id,campainName:e.name,campaignDays:e.campaignDays,campaignDesc:e.description,contingencies:e.contingencies},isCampUpdate:!0,isTemplateOptSelected:!0});else{for(var t={},a=0;a<this.state.allContingencies.length;a++)t[this.state.allContingencies[a].name]=this.state.allContingencies[a].name;this.setState({initialValueEditCampian:{campainName:"",campaignDays:"",campaignDesc:"",contingencies:t},isCampUpdate:!1,isTemplateOptSelected:!1})}}},{key:"updateCampaignData",value:function(e){var t=this;this.setState({editCampaign:!this.state.editCampaign,showLoader:!0});var a=e.contingencies,n={name:e.campainName,description:e.campaignDesc,campaignDays:e.campaignDays,contingencies:a};this.props.adminUpdateMaterTemplateAction(n,"campaign",e.campainId,0,0,0).then(function(a){for(var n=t.state.campaignstyles,s=0;s<n.length;s++)n[s]._id===e.campainId&&(n[s].contingencies=t.props.updatedEventData.contingencies,n[s].campaignDesc=t.props.updatedEventData.description,n[s].name=t.props.updatedEventData.name,n[s].campaignDays=t.props.updatedEventData.campaignDays);t.setState({campaignstyles:n}),t.changeCampaign(e.campainId),t.setState({showLoader:!1})})}},{key:"selectCampaignCreate",value:function(e){0==e.target.value?this.setState({isTemplateOptSelected:!0,isCampFromClone:!0}):this.setState({isTemplateOptSelected:!0,isCampFromClone:!1})}},{key:"createCampaign",value:function(e){var t=this;this.setState({showLoader:!0});var a=e.contingencies;if(this.state.isTemplateOptSelected&&this.state.isCampFromClone){var n={campaign:e.selectedCampaign,name:e.campainName,description:"",campaignDays:e.campaignDays,contingencies:a};this.props.adminCopyCampaignMaterTemplateAction(n).then(function(e){var a=t.state.campaignstyles;a.push(t.props.addedCampaign),t.setState({campaignstyles:a}),t.changeCampaign(t.props.addedCampaign._id),t.setState({showLoader:!1})})}else{var s={name:e.campainName,description:e.campaignDesc,campaignDays:e.campaignDays,contingencies:a};this.props.adminCreatCampaignMaterTemplateAction(s).then(function(e){var a=t.state.campaignstyles;a.push(t.props.addedCampaign),t.setState({campaignstyles:a}),t.changeCampaign(t.props.addedCampaign._id),t.setState({showLoader:!1})})}this.setState({editCampaign:!this.state.editCampaign})}},{key:"existingCampaignList",value:function(){for(var e=[],t=0,a=this.state.campaignstyles.length;t<a;t++){var n=this.state.campaignstyles[t],r=s.a.createElement("option",{value:n._id,key:"camp-"+n._id},n.name);e.push(r)}return e}},{key:"updateTaskData",value:function(e,t){var a=this;"drag"!==t&&this.setState({showLoader:!0});var n={},s={};if("INTERACTIVE"===e.taskType){var r=void 0!==e.assignee&&null!==e.assignee&&""!==e.assignee?e.assignee.replace("{(","").replace(")}",""):"";n={to:e.assignee,via:"",subject:"",what:e.detailsMsg,document:e.document},s={eventtemplate:{_id:e.eventtemplateId,predecessor:e.predecessor,successor:e.successor,eventType:e.taskType,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],day:e.eventDay,title:e.taskTitle,contingency:e.contingency,campaign:this.state.currentCampian._id,assignee:r,description:e.detailsMsg,document:e.document,time:e.time}}}else{if(0===e.communicationType)n={to:e.emailTo.replace("{(","").replace(")}",""),via:"EMAIL",subject:e.emailSubject.replace("{(","").replace(")}",""),what:e.emailText};else n={to:e.msgTo.replace("{(","").replace(")}",""),via:"TEXT",subject:"",what:e.msgText};s={eventtemplate:{predecessor:e.predecessor,successor:e.successor,_id:e.eventtemplateId,eventType:e.taskType,predecessorData:e.predecessorData?e.predecessorData:[],successorData:e.successorData?e.successorData:[],day:e.eventDay,title:e.taskTitle,contingency:e.contingency,campaign:this.state.currentCampian._id,time:e.time},communicationtemplate:{template:n,eventtemplateId:e.eventtemplateId}}}this.props.adminUpdateMaterTemplateAction(s,"both",0,e.eventtemplateId,e.commId,0).then(function(t){if(void 0!=t&&t.length>0){var n=t||[];a.setState({moveConfirmationModal:!0,affectedTasks:n,moveTaskPostData:{postData:s,model:"both",eventtemplateId:e.eventtemplateId,communicationtemplateId:e.commId,type:0}})}else void 0!=t&&t.hasOwnProperty("message")?a.setState({moveErrorModal:!0,moveErrorMessage:t.message}):(a.setState({showLoader:!0}),a.props.adminUpdateDependentTasksAction(s,"both",0,e.eventtemplateId,e.commId,0).then(function(e){a.setState({showLoader:!1}),a.changeCampaign(a.state.currentCampian._id)}))}),this.setState({addTask:""})}},{key:"createTaskData",value:function(e){var t=this;this.setState({showLoader:!0});var a={campaign:this.state.currentCampian._id,title:e.taskTitle,day:e.eventDay,contingency:e.contingency,eventType:e.taskType,time:e.time};if("INTERACTIVE"===e.taskType)a.assignee=e.assignee.replace("{(","").replace(")}",""),a.description=e.detailsMsg,a.document=e.document;else if(0===e.communicationType){var n=e.emailTo.replace("{(","").replace(")}",""),s=e.emailSubject.replace("{(","").replace(")}","");a.communicationType="EMAIL",a.communicationTo=n,a.communicationSubject=s,a.description=e.emailText}else{var r=e.msgTo.replace("{(","").replace(")}","");a.communicationType="TEXT",a.communicationTo=r,a.description=e.msgText}this.props.adminCreatEventCommMaterTemplateAction(a).then(function(e){t.changeCampaign(t.state.currentCampian._id)}),this.setState({addTask:""}),this.setState({initialValueAddTask:{taskTitle:"",taskType:"Communication",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",detailsMsg:"",contingency:"",document:!0,eventDay:0,time:540}})}},{key:"deleteTask",value:function(e){var t=this,a=e.eventtemplateId;this.props.adminDelEventCommunicationAction(a).then(function(e){t.changeCampaign(t.state.currentCampian._id)})}},{key:"clearTaskDataFromModal",value:function(){this.setState({initialValueAddTask:{taskTitle:"",taskType:"Communication",communicationType:0,emailTo:"",emailSubject:"",emailText:"",msgTo:"",msgText:"",assignee:"",detailsMsg:"",contingency:"",document:!0,eventDay:0,time:540}})}},{key:"DependencyModal",value:function(e,t){var a=this;if(e){var n=e.eventDay,s=e.eventtemplateId,r=e.campaignId;this.props.GetDependencytasksAction(r,n,s,"ADMIN").then(function(e){200==e.status&&a.setState({DependencyModal:!a.state.DependencyModal,dependencytasklist:a.props.dependencyTasks,actiontaken:t})})}else this.setState({DependencyModal:!this.state.DependencyModal})}},{key:"componentWillMount",value:function(){var e=this;this.props.adminGetVarriableRefAction().then(function(t){for(var a=[],n=[],s=[],r=[],l=[],o=0,i=e.props.variablesRefs.length;o<i;o++)s.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name}),r.push(e.props.variablesRefs[o].name),l.push({text:e.props.variablesRefs[o].name,value:e.props.variablesRefs[o].name.replace("@",""),url:""}),"EMAIL"===e.props.variablesRefs[o].communicationtype&&a.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name}),"TEXT"===e.props.variablesRefs[o].communicationtype&&n.push({id:e.props.variablesRefs[o].name,display:e.props.variablesRefs[o].name});e.setState({variablesRefs:e.props.variablesRefs,emailRefVar:a,textRefVar:n,AllRefVar:s,AllRefVarForEditor:l,AllRefVarForMapping:r})}),this.loadDefaultTemplateData()}},{key:"loadDefaultTemplateData",value:function(){var e=this;this.props.adminGetMaterTemplateAction().then(function(t){for(var a=[],n=0,s=e.props.adminMasterTemplates.length;n<s;n++){var r=e.props.adminMasterTemplates[n],l={_id:r._id,name:r.name,description:r.description,campaignDays:r.campaignDays,createdDate:r.createdDate,modifiedDate:r.modifiedDate,contingencies:r.contingencies};a.push(l)}e.setState({campaignstyles:a}),e.setState({campaignDaysCnt:e.props.adminMasterTemplates[0].campaignDays,activeCampaign:e.props.adminMasterTemplates[0].name}),e.setState({currentCampian:e.props.adminMasterTemplates[0]},function(){e.getContingencyOptions()});var o="",i={};void 0!==e.props.adminMasterTemplates&&(o=e.props.adminMasterTemplates[0]);var c=[];if(void 0!==o&&""!==o&&null!==o){var m=o.events;for(n=0,s=m.length;n<s;n++)c["day"+m[n].day]=c["day"+m[n].day]||[],c["day"+m[n].day].push(m[n])}for(n=0,s=e.state.campaignDaysCnt;n<s;n++){for(var d=void 0!==c["day"+n]?c["day"+n]:[],u=[],p=0;p<d.length;p++){if("COMMUNICATION"===d[p].type.name)for(var h=void 0!==d[p]&&void 0!==d[p].communication?d[p].communication:[],g=0;g<h.length;g++){var f;(f=h[g]).type=d[p].type,f.predecessor=d[p].predecessor,f.predecessorData=d[p].predecessorData?d[p].predecessorData:[],f.successorData=d[p].successorData?d[p].successorData:[],f.successor=d[p].successor,f.eventType=d[p].eventType,f.isActive=d[p].isActive,f.day=d[p].day,f.label=d[p].title,f.contingency=d[p].contingency,f.modifiedDate=d[p].modifiedDate,f.time=d[p].time,u.push(f)}else(f={template:d[p].template})._id=d[p]._id,f.eventtemplateId=d[p]._id,f.predecessor=d[p].predecessor,f.predecessorData=d[p].predecessorData?d[p].predecessorData:[],f.successorData=d[p].successorData?d[p].successorData:[],f.successor=d[p].successor,f.type=d[p].type,f.eventType=d[p].eventType,f.isActive=d[p].isActive,f.day=d[p].day,f.label=d[p].title,f.contingency=d[p].contingency,f.modifiedDate=d[p].modifiedDate,f.time=d[p].time,u.push(f)}u.sort(function(e,t){return e.modifiedDate>t.modifiedDate?-1:1}),i["droppable"+n]=u}e.setState({tasksList:i,originalTaskList:i}),e.setState({showLoader:!1})})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"getContingenciesByCamp",value:function(){var e=this.state.currentCampian,t=[];for(var a in t.push(s.a.createElement("option",{value:"",key:"contingencies0"},"Select")),e.contingencies)e.contingencies.hasOwnProperty(a)&&t.push(s.a.createElement("option",{value:a,key:a},a));return t}},{key:"renderDaysLayer1",value:function(){for(var e=this,t=[],a=0,n=this.state.campaignDaysCnt;a<n;a++)t.push(s.a.createElement("div",{className:"master-template-column",key:a},s.a.createElement("div",null,s.a.createElement("h2",null,"Day ",a),s.a.createElement(x.a,{variant:"primary",className:"btn-blue","data-day":a,onClick:function(t){e.addTaskSlide(0,t)}},s.a.createElement(sr.a,{className:"mr-2"}),"Add New Task"))));return t}},{key:"getDaysList",value:function(){for(var e=[],t=0,a=this.state.campaignDaysCnt;t<a;t++)e.push(s.a.createElement("option",{value:t,key:t},t));return e}},{key:"renderDefaultDaysTasks",value:function(){for(var e=this,t=[],a=function(){var a=e.state.tasksList["droppable"+n]||[];t.push(s.a.createElement("div",{className:"master-template-column",key:"day-task"+n},s.a.createElement(Mn.c,{droppableId:"droppable"+n},function(t,n){return s.a.createElement("div",{ref:t.innerRef,style:(n.isDraggingOver,{background:"#fff",width:"100%"})},a.map(function(t,a){return s.a.createElement(Mn.b,{className:"demos",key:t._id,draggableId:t._id,index:a},function(a,n){return s.a.createElement("div",Object.assign({className:"card-single",ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:e.getStyle(a.draggableProps.style,n)}),s.a.createElement(M.a,{alignRight:!0,className:"dropdown-action card-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-folder1",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{href:"",onClick:function(){return e.editTask(t)}},"Edit"),s.a.createElement(M.a.Item,{href:"",onClick:function(){return e.deleteTask(t)}},"Delete"))),s.a.createElement("div",{className:"card-single-content",onClick:function(){return e.editTask(t)}},s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,null,"INTERACTIVE"===t.type.name?s.a.createElement(yl.a,{className:"card-type"}):s.a.createElement("div",null,"EMAIL"===t.template.via?s.a.createElement(wt.a,{className:"card-type"}):s.a.createElement(bl.a,{className:"card-type"})))),s.a.createElement("h2",{title:t.label},s.a.createElement(Dl.a,{text:t.label,maxLine:"2",ellipsis:"...",trimRight:!0,basedOn:"letters"}))))})}),t.placeholder)})))},n=0,r=this.state.campaignDaysCnt;n<r;n++)a();return t}},{key:"renderCampaignDaysDropDown",value:function(){for(var e=[],t=0,a=this.state.campaignDaysCnt;t<a;t++){var n=s.a.createElement("option",{value:t,key:"campDay-"+t},t);e.push(n)}return e}},{key:"getEmailVariableListDropDown",value:function(){for(var e=this.state.emailRefVar,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"showEmailVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showEmailVariableListStyle:{display:"block"}})}},{key:"getTextVariableListDropDown",value:function(){for(var e=this.state.textRefVar,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&!0===e.shiftKey?e.preventDefault():"Enter"===e.key&&!1===e.shiftKey&&e.preventDefault()}},{key:"showTextVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showTextVariableListStyle:{display:"block"}})}},{key:"hideEmailTextVariableList",value:function(){this.setState({showEmailVariableListStyle:{display:"none"},showTextVariableListStyle:{display:"none"}})}},{key:"getAllVariableListDropDown",value:function(){for(var e=this.state.variablesRefs,t=[],a=0,n=e.length;a<n;a++){var r=s.a.createElement("li",{"data-val":e[a].name,key:e[a].name},e[a].name);t.push(r)}return t}},{key:"showAllVariableList",value:function(e){var t=e.keyCode||e.which;"@"===String.fromCharCode(t)&&this.setState({showAllVariableListStyle:{display:"block"}})}},{key:"changeCampaign",value:function(e){var t=this;this.setState({showLoader:!0,addTask:""}),this.props.adminGetCampDataByIdAction(e).then(function(e){t.setState({campaignDaysCnt:t.props.campDataById[0].campaignDays,activeCampaign:t.props.campDataById[0].name}),t.setState({currentCampian:t.props.campDataById[0]},function(){t.getContingencyOptions()});var a="",n={};void 0!==t.props.campDataById&&(a=t.props.campDataById[0]);var s=[];if(void 0!==a&&""!==a&&null!==a)for(var r=a.events,l=0,o=r.length;l<o;l++)s["day"+r[l].day]=s["day"+r[l].day]||[],s["day"+r[l].day].push(r[l]);for(l=0,o=t.state.campaignDaysCnt;l<o;l++){for(var i=void 0!==s["day"+l]?s["day"+l]:[],c=[],m=0;m<i.length;m++){if("COMMUNICATION"===i[m].type.name)for(var d=void 0!==i[m]&&void 0!==i[m].communication?i[m].communication:[],u=0;u<d.length;u++){var p;(p=d[u]).type=i[m].type,p.eventType=i[m].eventType,p.isActive=i[m].isActive,p.predecessor=i[m].predecessor,p.predecessorData=i[m].predecessorData?i[m].predecessorData:[],p.successorData=i[m].successorData?i[m].successorData:[],p.successor=i[m].successor,p.day=i[m].day,p.label=i[m].title,p.contingency=i[m].contingency,p.modifiedDate=i[m].modifiedDate,p.time=i[m].time,c.push(p)}else(p={template:i[m].template})._id=i[m]._id,p.eventtemplateId=i[m]._id,p.predecessor=i[m].predecessor,p.predecessorData=i[m].predecessorData?i[m].predecessorData:[],p.successorData=i[m].successorData?i[m].successorData:[],p.successor=i[m].successor,p.type=i[m].type,p.eventType=i[m].eventType,p.isActive=i[m].isActive,p.day=i[m].day,p.label=i[m].title,p.contingency=i[m].contingency,p.modifiedDate=i[m].modifiedDate,p.time=i[m].time,c.push(p);p.predecessorData.length>0?t.setState({dependencyIsActive:!0}):t.setState({dependencyIsActive:!1})}c.sort(function(e,t){return e.modifiedDate>t.modifiedDate?-1:1}),n["droppable"+l]=c}t.setState({tasksList:n,originalTaskList:n,showLoader:!1})})}},{key:"getContingenciesByCampIdForClone",value:function(e){for(var t=this.state.campaignstyles,a=[],n=0;n<t.length;n++)t[n]._id===e&&(a=t[n].contingencies);return a}},{key:"changeDay",value:function(e){"prev"==e?Et()(".go-to-dropdown").val(Et()(".go-to-dropdown").val()-1>=0?Et()(".go-to-dropdown").val()-1:0):Et()(".go-to-dropdown").val(Number(Et()(".go-to-dropdown").val())<this.state.campaignDaysCnt-1?Number(Et()(".go-to-dropdown").val())+1:this.state.campaignDaysCnt-1),this.goToDate()}},{key:"confirmMove",value:function(){var e=this;this.setState({moveConfirmationModal:!1,showLoader:!0}),this.props.adminUpdateDependentTasksAction(this.state.moveTaskPostData.postData,"both",0,this.state.moveTaskPostData.eventtemplateId,this.state.moveTaskPostData.communicationtemplateId,this.state.moveTaskPostData.type).then(function(t){e.setState({showLoader:!1}),e.changeCampaign(e.state.currentCampian._id)})}},{key:"closeErrorModal",value:function(){this.setState({moveErrorModal:!1}),this.changeCampaign(this.state.currentCampian._id)}},{key:"updateAssigneeOptions",value:function(e,t){var a=[];this.state.variablesRefs.forEach(function(t){"all"!==t.contingency&&t.contingency!==e||"user"!==t.account||a.push({label:t.name,value:t.name})}),this.setState({assigneeOptions:a},function(){t("assignee","")})}},{key:"clearFilter",value:function(){this.setState({filterContingency:null,filterType:null,tasksList:this.state.originalTaskList,filtered:!1})}},{key:"filterMasterTemplate",value:function(e,t){var a=this,n=t,s={};Object.keys(n).forEach(function(t){s[t]=n[t].filter(function(t){console.log(t);var n=!1,s=!1,r=!1,l=!1;return e.forEach(function(e){e&&("Interactive"==e.value&&(n="INTERACTIVE"===t.type.name),"Text"==e.value&&(r=t.template.via===e.value.toUpperCase()),"Email"==e.value&&(l=t.template.via===e.value.toUpperCase()),t.contingency===e.value&&(s=!0)),null==a.state.filterType&&(n=!0,r=!0,l=!0),null==a.state.filterContingency&&(s=!0)}),(n||r||l)&&s})}),this.setState({tasksList:s,filtered:!0})}},{key:"searchMasterTemplate",value:function(e,t){var a=t,n={};Object.keys(a).forEach(function(t){n[t]=a[t].filter(function(t){return(t.label+"").trim().toLowerCase().includes((e+"").trim().toLowerCase())})}),this.setState({tasksList:n,searchParam:e})}},{key:"getContingencyOptions",value:function(){var e=[];Object.keys(this.state.currentCampian.contingencies||{}).forEach(function(t){e.push({label:t,value:t})}),this.setState({contingencyOptions:e})}},{key:"render",value:function(){for(var e=this,t=[],a=function(){var a=e.state.campaignstyles[n],r=s.a.createElement(M.a.Item,{key:a._id,as:"li",eventKey:a.name},s.a.createElement("div",{onClick:function(){return e.changeCampaign(a._id)}},a.name),s.a.createElement(x.a,{variant:"transparent",onClick:function(){return e.editCampaign(a)}},s.a.createElement(la.a,null)));t.push(r)},n=0,r=this.state.campaignstyles.length;n<r;n++)a();var l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),emailTo:Tt.string().required("Please enter Email Recipient"),emailSubject:Tt.string().required("Please enter Subject")});if("COMMUNICATION"===this.state.taskType)if(this.state.showText)l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),emailTo:Tt.string().required("Please enter Email Recipient"),emailSubject:Tt.string().required("Please enter Subject"),emailText:Tt.string().required("Please enter Email Message")});else l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),msgTo:Tt.string().required("Please enter Text Recipient"),msgText:Tt.string().required("Please enter Text Message")});else l=Tt.object().shape({taskTitle:Tt.string().required("Please enter Task Title"),taskType:Tt.string().required("Please select Task Type"),communicationType:Tt.string().required("Please select Communication Type"),assignee:Tt.string().required("Please enter Assign To"),detailsMsg:Tt.string().required("Please enter Details")});return s.a.createElement(s.a.Fragment,null,"BUYERAGENT"===localStorage.getItem("usertype")?s.a.createElement(Ol,null):s.a.createElement("div",{className:"master-template"},s.a.createElement(Ut.a,{className:"ml-0 mr-0 page-head-row page-head-row-big align-items-center trans-listing-head"},s.a.createElement(Yt.a,{className:"col-auto"},s.a.createElement("h4",{className:"title-med mt-0 pt-1"},"Master Template")),s.a.createElement(Yt.a,{align:"right"},s.a.createElement(Ct.c,{className:"justify-content-end form-inline"},s.a.createElement(Ut.a,{className:"trans-listing-head-row"},s.a.createElement(Yt.a,{className:"col-auto pl-0 d-flex trans-listing-head-button"},s.a.createElement("div",{className:"mb-0 mx-auto form-group",style:{width:"350px"}},s.a.createElement(M.a,{className:"dropdown-campaign",onSelect:function(t,a){return e.getActiveCampaign(t,a)}},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic"},this.state.activeCampaign),s.a.createElement(M.a.Menu,null,t)))),s.a.createElement(Yt.a,{className:"col-auto pl-0 d-flex trans-listing-head-button"},s.a.createElement("div",{className:"mb-0 form-group"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-head d-flex align-items-center",onClick:function(){return e.editCampaign("")}},s.a.createElement(sr.a,{className:"mr-1"})," Create New Campaign"))),s.a.createElement(Yt.a,{className:"pl-0",style:{paddingRight:"10px"}},s.a.createElement(Ut.a,{className:"mx-0 align-items-center"},s.a.createElement(Yt.a,{className:"px-0 col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"p-0",onClick:function(){e.changeDay("prev")}},s.a.createElement(xr.a,null))),s.a.createElement(Yt.a,{className:"px-0"},s.a.createElement("div",{className:"mb-0 form-group"},s.a.createElement("div",{className:"c-select",style:{width:"60px"}},s.a.createElement("select",{name:"campaignDaysCnt",id:"campaignDaysCnt",className:"form-control form-control-sm form-control-head go-to-dropdown",onChange:function(){return e.goToDate()}},this.renderCampaignDaysDropDown())))),s.a.createElement(Yt.a,{className:"px-0 col-auto"},s.a.createElement(x.a,{variant:"transparent",className:"p-0",onClick:function(){e.changeDay("next")}},s.a.createElement(ds.a,null))))))))),s.a.createElement(Ut.a,{className:"justify-content-end mx-0 align-items-center master-template-filter-row"},s.a.createElement(Yt.a,{xs:"3",className:"pl-0"},s.a.createElement("div",{className:"icon-wrapper"},s.a.createElement("input",{type:"text",className:"form-control form-control-head",placeholder:"Search",onChange:function(t){e.searchMasterTemplate(t.target.value,e.state.originalTaskList)}}),s.a.createElement("span",{className:"form-control-icn"},s.a.createElement(_a.a,null)))),s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"activity-filter",show:this.state.showFilterDropdown},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement("img",{src:ks.a,alt:"filter",style:{width:"24px"},onClick:function(){e.setState({showFilterDropdown:!0})}})),s.a.createElement(M.a.Menu,{className:"activity-filter-menu"},s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement("h2",{className:"font-20 color-blue-4 mb-0"},"Filter")),s.a.createElement(Yt.a,{xs:"6",align:"right"},s.a.createElement(x.a,{variant:"link",className:"p-0 font-14",onClick:function(){e.clearFilter(),e.setState({showFilterDropdown:!1})}},"Clear All"))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By Type")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By Type",isMulti:!0,options:Rl,className:"react-select-wrapper react-select-multi",onChange:function(t){e.setState({filterType:t})},value:this.state.filterType}))),s.a.createElement(Ut.a,{className:"mb-3"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h4",{className:"font-12 color-blue-4"},"By Contingency")),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(ws.a,{isClearable:!1,closeMenuOnSelect:!1,placeholder:"By Contingency",isMulti:!0,options:this.state.contingencyOptions,className:"react-select-wrapper react-select-multi",onChange:function(t){e.setState({filterContingency:t})},value:this.state.filterContingency}))),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(x.a,{type:"submit",variant:"primary",className:"btn-blue mr-2 w-140",onClick:function(){e.filterMasterTemplate(Pl.concat(e.state.filterContingency,e.state.filterType),e.state.originalTaskList),e.setState({showFilterDropdown:!1})}},"Apply"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.setState({showFilterDropdown:!1})}},"Cancel")))))),s.a.createElement(Yt.a,{className:"col-auto pl-0"},this.state.filtered&&s.a.createElement(x.a,{variant:"link",className:"font-12 py-0 px-2",onClick:function(){e.clearFilter()}},"Clear"))),s.a.createElement("div",{className:"master-template-container"},!0===this.state.showLoader&&s.a.createElement("div",{className:"page-loader"},s.a.createElement("div",{className:"page-loader-inner"},s.a.createElement("div",{className:"spinner-border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))),s.a.createElement("div",{className:"master-template-content"},s.a.createElement("div",{className:"master-template-row master-template-header more"},this.renderDaysLayer1()),s.a.createElement(Mn.a,{onDragEnd:this.onDragEnd},s.a.createElement("div",{className:"master-template-body",onScroll:function(){return e.templatesScroll()}},s.a.createElement("div",{className:"master-template-row"},this.renderDefaultDaysTasks()))),s.a.createElement("div",{className:this.state.addTask+" calendar-add-task add-new-task"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValueAddTask,enableReinitialize:!0,validationSchema:l,onSubmit:function(t,a){a.setSubmitting;e.state.isUpdate?e.updateTaskData(t,"submit"):e.createTaskData(t)}},function(t){t.handleChange;var a=t.errors,n=t.values,r=t.handleBlur,l=t.setFieldValue,o=(t.submitForm,t.touched),i=(t.loginError,t.setErrors);return s.a.createElement(Ct.c,null,s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,null,s.a.createElement(x.a,{variant:"transparent",className:"close-task",onClick:function(){e.clearTaskDataFromModal(),e.addTaskSlide(1,"")}},s.a.createElement(j.a,null)),s.a.createElement(Ut.a,{className:"align-items-center"},s.a.createElement(Yt.a,{xs:"8"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Title")),s.a.createElement(Yt.a,{xs:"4",align:"right"},s.a.createElement(Ut.a,{className:"justify-content-end mx-0 pr-4"},e.state.dependencyIsActive?s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(x.a,{variant:"transparent",className:"p-0 dep-btn",title:"Check Dependency",onClick:function(){return e.DependencyModal(n,"UPDATE")}},s.a.createElement("img",{src:Ks.a,style:{height:"24px",width:"24px"},alt:"dependency"}))):s.a.createElement(Yt.a,{className:"col-auto px-0"},s.a.createElement(M.a,{alignRight:!0,className:"task-action dropdown-action"},s.a.createElement(M.a.Toggle,{variant:"transparent",id:"dropdown-basic",className:"p-0"},s.a.createElement(Ha.a,null)),s.a.createElement(M.a.Menu,null,s.a.createElement(M.a.Item,{onClick:function(){return e.DependencyModal(n,"ADD")}},"Set Dependency ",s.a.createElement(Ls.a,{style:{height:"20px"}}))))))),s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Ct.b,{name:"taskTitle",type:"text",value:n.taskTitle,onChange:function(e){return l("taskTitle",e.target.value)},className:"task-add-input form-control"+(a.taskTitle&&o.taskTitle?" is-invalid":""),placeholder:"Write task here"}),s.a.createElement(Ct.a,{name:"taskTitle",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Day"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"eventDay",component:"select",value:n.eventDay,className:"form-control form-control-xs",onChange:function(e){return l("eventDay",e.target.value)}},e.getDaysList()))),s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Time"),s.a.createElement(Cs.a,{selected:new Date(Gt()().startOf("day").add({minutes:n.time}).format("MM DD YYYY h:mm a")),onChange:function(t){return l("time",e.getMinutes(t))},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:30,timeCaption:"Time",dateFormat:"h:mm aa",className:"form-control time-task form-control-xs pl-1"}))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Contingency"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"contingency",component:"select",value:n.contingency,className:"form-control form-control-xs",onChange:function(t){l("contingency",t.target.value),e.updateAssigneeOptions(t.target.value,l)}},e.getContingenciesByCamp())))),s.a.createElement(Ut.a,{className:"mx-0 mt-2 mb-2"},s.a.createElement(Yt.a,{xs:"12",sm:"4"},s.a.createElement("h5",{className:"font-14 color-blue-4"},"Task Type"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"taskType",component:"select",value:n.taskType,className:"form-control form-control-xs",onChange:function(t){l("taskType",t.target.value),e.updateAssigneeOptions(n.contingency,l),e.showTaskType(t),i({})}},s.a.createElement("option",{value:"COMMUNICATION"},"Communication"),s.a.createElement("option",{value:"INTERACTIVE"},"Interactive"))))),s.a.createElement("div",{style:{backgroundColor:"#f8f8f8"}},"COMMUNICATION"===e.state.taskType?s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 bg-blue-5 py-2 mb-2"},s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-1"},"Communication Type"),s.a.createElement("div",{className:"form-group mb-0"},s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check1",value:0,onChange:function(t){e.showText(t),l("communicationType",0),i({})},checked:0===n.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check1"},"Email")),s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"check2",value:1,onChange:function(t){e.showText(t),l("communicationType",1),i({})},checked:1===n.communicationType?"checked":""}),s.a.createElement("label",{className:"custom-control-label color-grey-1",htmlFor:"check2"},"Text"))))),e.state.showText?s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular"},s.a.createElement(Hs.b,{singleLine:!0,name:"emailTo",type:"text",value:n.emailTo,className:"mail-row-mension "+(a.emailTo&&o.emailTo?" is-invalid":""),onChange:function(e){console.log(e.target.value),l("emailTo",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.emailRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"emailTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Subject")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-big"},s.a.createElement(Hs.b,{singleLine:!0,name:"emailSubject",type:"text",value:n.emailSubject,className:"mail-row-mension "+(a.emailSubject&&o.emailSubject?" is-invalid":""),onChange:function(e){console.log(e.target.value),l("emailSubject",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.AllRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"emailSubject",component:"div",className:"invalid-feedback",style:{display:"block"}})))):s.a.createElement(Ut.a,{className:"mx-0 mail-row"},s.a.createElement(Yt.a,{className:"col-auto pr-0"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"To")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-regular"},s.a.createElement(Hs.b,{singleLine:!0,name:"msgTo",type:"text",value:n.msgTo,className:"mail-row-mension "+(a.msgTo&&o.msgTo?" is-invalid":""),onChange:function(e){console.log(e.target.value),l("msgTo",e.target.value)},style:qs},s.a.createElement(Hs.a,{trigger:"@",appendSpaceOnAdd:!0,data:e.state.textRefVar,markup:"{(__id__)}"})),s.a.createElement(Ct.a,{name:"msgTo",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0"},e.state.showText?s.a.createElement(Yt.a,{xs:"12"},s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"emailText",editorState:Yl,onEditorStateChange:function(e){var t=Fs()(Object(Bs.convertToRaw)(e.getCurrentContent())),a=Et()("<output>").append(Et.a.parseHTML(t));Et.a.map(a.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var n=a.html();n.replace("<p>","").replace("</p>","").replace(/\s/g,"").length?l("emailText",n):l("emailText",""),Yl=e},hashtag:{}})),s.a.createElement(Ct.a,{name:"emailText",component:"div",className:"invalid-feedback",style:{display:"block"}})):s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Ct.b,{component:"textarea",name:"msgText",rows:"5",className:"form-control font-14",value:n.msgText}),s.a.createElement(Ct.a,{name:"msgText",component:"div",className:"invalid-feedback",style:{display:"block"}})))):s.a.createElement("div",null,s.a.createElement(Ut.a,{className:"mx-0 mb-2 bg-blue-5 py-2"},s.a.createElement(Yt.a,null,s.a.createElement("div",{className:"custom-control custom-checkbox custom-control-inline"},s.a.createElement("input",{name:"document",type:"checkbox",className:"custom-control-input",id:"docRequired",value:n.document,defaultChecked:!0,onChange:function(e){l("document",e.target.checked)}}),s.a.createElement("label",{className:"custom-control-label",htmlFor:"docRequired"},"Document upload required")))),s.a.createElement(Ut.a,{className:"mx-0 mail-row assign-var-row assign-var-row-first"},s.a.createElement(Yt.a,{className:"col-auto pr-0 assign-var-label"},s.a.createElement("h5",{className:"font-14 color-blue-4 mb-0"},"Assign to")),s.a.createElement(Yt.a,{className:"mail-row-field mail-row-field-large assign-var-select assign-var-select"},s.a.createElement(ws.a,{onBlur:r,fullWidth:!0,onChange:function(e){l("assignee",e.value)},value:{label:n.assignee,value:n.assignee},className:"react-select-wrapper react-select-multi",name:"assignee",options:e.state.assigneeOptions}),s.a.createElement(Ct.a,{name:"assignee",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement("hr",{className:"mt-2 mb-2"}),s.a.createElement(Ut.a,{className:"mx-0"},s.a.createElement(Yt.a,null,s.a.createElement("h5",{className:"font-14 color-blue-4"},"Detail"),s.a.createElement("div",{className:"editor-main"},s.a.createElement(zs.Editor,{wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",mention:{separator:" ",trigger:"@",suggestions:e.state.AllRefVarForEditor},toolbar:{options:["inline","list","link","blockType"],inline:{inDropdown:!1,options:["bold","italic"]},list:{inDropdown:!0,options:["unordered","ordered"]},link:{inDropdown:!1,options:["link"]},blockType:{inDropdown:!1,options:["Blockquote"]}},name:"detailsMsg",editorState:Ll,onEditorStateChange:function(e){var t=Fs()(Object(Bs.convertToRaw)(e.getCurrentContent())),a=Et()("<output>").append(Et.a.parseHTML(t));Et.a.map(a.find("a.wysiwyg-mention"),function(e,t){var a=Et()(e).html();e.replaceWith(a)});var n=a.html();n.replace("<p>","").replace("</p>","").replace(/\s/g,"").length?l("detailsMsg",n):l("detailsMsg",""),Ll=e},hashtag:{}}),s.a.createElement(Ct.a,{name:"detailsMsg",component:"div",className:"invalid-feedback",style:{display:"block"}}))))),s.a.createElement(Ut.a,{className:"mx-0 py-3"},s.a.createElement(Yt.a,{xs:"6"},s.a.createElement(x.a,{type:"submit",size:"sm",className:"btn-blue w-140"},e.state.isUpdate?"Update Task":"Add Task")))))})))),s.a.createElement(Wa.a,{show:this.state.editCampaign,onHide:function(){return e.editCampaign("")},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 create-template-modal"},s.a.createElement(Ct.d,{validateOnBlur:!0,initialValues:this.state.initialValueEditCampian,enableReinitialize:!0,validationSchema:Tt.object().shape({campainName:Tt.string().required("Please enter Campaign Name"),campaignDays:Tt.string().nullable().trim().required("Please enter Campaign Duration")}),onSubmit:function(t,a){a.setSubmitting;e.state.isCampUpdate?e.updateCampaignData(t):e.createCampaign(t)}},function(t){t.handleChange;var a=t.errors,n=t.values,r=(t.handleBlur,t.setFieldValue),l=(t.submitForm,t.touched);t.loginError;return s.a.createElement(Ct.c,{className:"form-sm form-admin",onKeyDown:e.handleKeyDown},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},e.state.isCampUpdate?"Edit Campaign":"Create Campaign")),s.a.createElement(Wa.a.Body,{className:"pt-0"},e.state.isCampUpdate?"":s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:12,className:"text-center",style:{backgroundColor:"rgba(214, 245, 255, 0.5)",padding:"15px 0px",borderBottom:"1px solid #c1dce6"}},s.a.createElement("div",null,s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"checkTemplate",value:0,onChange:function(t){return e.selectCampaignCreate(t)}}),s.a.createElement("label",{className:"custom-control-label font-14 color-grey-1 font-500",htmlFor:"checkTemplate"},"Clone Existing Template")),s.a.createElement("div",{className:"custom-control custom-radio custom-radio-sm custom-control-inline"},s.a.createElement("input",{name:"communicationType",type:"radio",className:"custom-control-input",id:"checkTemplate1",value:1,onChange:function(t){return e.selectCampaignCreate(t)}}),s.a.createElement("label",{className:"custom-control-label font-14 color-grey-1 font-500",htmlFor:"checkTemplate1"},"Create New Template")))),e.state.isTemplateOptSelected?"":s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"text-center py-5"},s.a.createElement("img",{src:Tl.a,alt:"no template",className:"image-responsive"}),s.a.createElement("p",{className:"color-dark-blue mt-2",style:{fontSize:"19px"}},"Create new template or clone your existing template")))),e.state.isTemplateOptSelected?s.a.createElement("div",null,s.a.createElement(Ut.a,null,e.state.isCampFromClone?s.a.createElement(Yt.a,{xs:12},s.a.createElement("div",{className:"form-group mb-0 mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Select Existing Campaign"),s.a.createElement("div",{className:"c-select"},s.a.createElement("select",{name:"existingTemplate",component:"select",className:"form-control font-14",onChange:function(t){r("selectedCampaign",t.target.value);e.getContingenciesByCampIdForClone(t.target.value);r("contingencies",e.getContingenciesByCampIdForClone(t.target.value))}},s.a.createElement("option",null,"Select"),e.existingCampaignList())))):"",s.a.createElement(Yt.a,{xs:9},s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Campaign Name"),s.a.createElement(Ct.b,{name:"campainName",type:"text",value:n.campainName,className:"form-control form-control-sm"+(a.campainName&&l.campainName?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"campainName",component:"div",className:"invalid-feedback",style:{display:"block"}}))),s.a.createElement(Yt.a,{xs:3},s.a.createElement("div",{className:"form-group mt-3"},s.a.createElement("label",{className:"form-label",htmlFor:"email"},"Days"),s.a.createElement(Ct.b,{name:"campaignDays",type:"text",value:n.campaignDays,className:"form-control form-control-sm"+(a.campaignDays&&l.campaignDays?" is-invalid":"")}),s.a.createElement(Ct.a,{name:"campaignDays",component:"div",className:"invalid-feedback",style:{display:"block"}})))),s.a.createElement("hr",{className:"sep-line mt-0 mb-1"}),s.a.createElement(Ut.a,null,s.a.createElement(Yt.a,{xs:"12"},s.a.createElement(Jn,{isMasterTemplate:!0,contingencies:n.contingencies,setFieldValue:r})))):""),e.state.isTemplateOptSelected?s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{type:"submit",variant:"primary",size:"sm",className:"btn-blue w-140"},e.state.isCampUpdate?"Update":"Create")):"")})),s.a.createElement(Wa.a,{show:this.state.DependencyModal,onHide:function(){return e.DependencyModal()},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med1 dependency-modal"},s.a.createElement(Wa.a.Header,{closeButton:!0},s.a.createElement(Wa.a.Title,{id:"example-custom-modal-styling-title"},"Set Dependency")),s.a.createElement(Wa.a.Body,null,s.a.createElement(Zs,{options:this.state.dependencyTasks,actiontaken:this.state.actiontaken,predecessors:this.state.initialValueAddTask.predecessorData,dependencies:function(t){e.closeModal(t)},eventId:this.state.initialValueAddTask.eventtemplateId}))),s.a.createElement(Wa.a,{show:this.state.moveConfirmationModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0"},s.a.createElement("p",{className:"text-center font-20 color-dark-blue"},"Are you sure you move this task?"),s.a.createElement("div",{className:"px-1"},s.a.createElement("p",{className:"mb-0 font-500 font-14"},"Here is the list of task that will be affected"),s.a.createElement("ul",{className:"dependency-modal-task-list font-12"},this.state.affectedTasks.map(function(e,t){if(e)return s.a.createElement("li",{key:e.title}," Day - ",e.day," ",e.title)})))),s.a.createElement(Wa.a.Footer,{className:"justify-content-center pt-2"},s.a.createElement(x.a,{variant:"primary",className:"btn-blue btn-outlined w-140",onClick:function(){e.changeCampaign(e.state.currentCampian._id),e.setState({moveConfirmationModal:!1})}},"Cancel"),s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.confirmMove()}},"Yes"))),s.a.createElement(Wa.a,{show:this.state.moveErrorModal,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",className:"modal-med modal-400 modal-delete",centered:!0,backdrop:!1},s.a.createElement(Wa.a.Body,{className:"pb-0 text-center"},this.state.moveErrorMessage),s.a.createElement(Wa.a.Footer,null,s.a.createElement(x.a,{variant:"primary",className:"btn-blue w-140",onClick:function(){e.closeErrorModal()}},"OK")))))}}]),t}(s.a.Component),Vl=Object(B.b)(function(e){return{adminMasterTemplates:e.reducer.adminMasterTemplates,totalAdminTemplates:e.reducer.totalAdminTemplates,isEventCommCreated:e.reducer.isEventCommCreated,addedEventComm:e.reducer.addedEventComm,isMasterTemplateUpdated:e.reducer.isMasterTemplateUpdated,updatedEventData:e.reducer.updatedEventData,variablesRefs:e.reducer.variablesRefs,isMasterTemplateTaskDeleted:e.reducer.isMasterTemplateTaskDeleted,campDataById:e.reducer.campDataById,isCampaignCreated:e.reducer.isCampaignCreated,addedCampaign:e.reducer.addedCampaign,contingencies:e.reducer.allContingencies,dependencyTasks:e.reducer.dependencyTasks}},{adminGetMaterTemplateAction:function(){return function(e){return mt.getMethod(ct.AdminGetMaterTemplateUrl,!0).then(function(t){200===t.status?e({type:X,adminMasterTemplates:t.data.data,totalAdminTemplates:t.data.total}):e({type:X,adminMasterTemplates:{},totalAdminTemplates:0})})}},adminUpdateMaterTemplateAction:function(e,t,a,n,s,r){var l=ct.AdminUpdateBothMaterTemplateUrl;return"campaign"===t&&(l=(l=ct.AdminUpdateCampMaterTemplateUrl.replace("{model}",t)).replace("{campaignId}",a)),"both"===t&&(l=ct.AdminUpdateBothMaterTemplateUrl.replace("{eventTempId}",n),l=0===r?l.replace("{commuId}",s):l.replace("&communicationtemplateId={commuId}","")),function(t){return mt.putMethod(l,e,!0).then(function(e){return 200===e.status?(t({type:J,isMasterTemplateUpdated:!0,updatedEventData:e.data}),e.data):(t({type:J,isMasterTemplateUpdated:!1,updatedEventData:[]}),e.data)})}},adminCreatEventCommMaterTemplateAction:function(e){return function(t){return mt.postMethod(ct.AdminCreatEventCommMaterTemplateUrl,e,!0).then(function(e){200===e.status?t({type:$,isEventCommCreated:!0,addedEventComm:e.data}):t({type:$,isEventCommCreated:!1,addedEventComm:[]})})}},adminDelEventCommunicationAction:function(e){return function(t){var a=ct.AdminDeleteEventCommMaterTemplateUrl.replace("{eventtemplateId}",e);return mt.deleteMethod(a,!0).then(function(e){200===e.status?t({type:ee,isMasterTemplateTaskDeleted:!0}):t({type:ee,isMasterTemplateTaskDeleted:!1})})}},adminGetVarriableRefAction:Rn,adminGetCampDataByIdAction:function(e){var t=ct.AdminGetCampDataByIdMaterTemplateUrl;return t=t.replace("{campId}",e),function(e){return mt.getMethod(t,!0).then(function(t){200===t.status?e({type:te,campDataById:t.data.data}):e({type:te,campDataById:[]})})}},adminCreatCampaignMaterTemplateAction:function(e){return function(t){return mt.postMethod(ct.AdminCreatCampaignMaterTemplateUrl,e,!0).then(function(e){200===e.status?t({type:ae,isCampaignCreated:!0,addedCampaign:e.data}):t({type:ae,isCampaignCreated:!1,addedCampaign:[]})})}},getAllContigencyAction:Un,adminCopyCampaignMaterTemplateAction:jn,GetDependencytasksAction:On,adminUpdateDependentTasksAction:function(e,t,a,n,s,r){return function(t){return mt.putMethod(ct.uploadDependentTaskURL+n,e,!0).then(function(e){return 200===e.status?(t({type:re}),e.data):(t({type:re}),e)})}}})(Bl),Fl=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"checkLoggedIn",value:function(){var e=localStorage.getItem("usertype");null!==e&&"ADMIN"===e.toUpperCase()?this.props.history.push("/RegistrationRequests"):this.props.history.push("/transactions")}},{key:"render",value:function(){return localStorage.getItem("accessToken")&&this.checkLoggedIn(),s.a.createElement("div",null,s.a.createElement(kt,null),s.a.createElement("div",{className:"thank-you-msg"},s.a.createElement(ya.a,null,s.a.createElement("span",null,s.a.createElement(Sn.a,null)),s.a.createElement("div",null,"Thanks for registering with us, Our team will review your application and you will be notified once your account is Approved."))))}}]),t}(s.a.Component),_l=a(654),Gl=a.n(_l),zl=function(e){function t(e){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"error-page"},s.a.createElement("img",{src:Gl.a,alt:"Access Denied"}),s.a.createElement("p",null,"You are not Authorise to access this page"))}}]),t}(s.a.Component),Hl=(a(1357),a(1358),a(86)),ql=a(655),Wl={isAuthenticated:!1,users:[],buyerAgents:[],profileData:{},isMasterTemplateUpdated:!1,isEventCommCreated:!1,isMasterTemplateTaskDeleted:!1,status:!1};var Kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wl,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object.assign({},e,{status:t.status,RegMessage:t.RegMessage});case F:return Object.assign({},e,{isAuthenticated:t.isAuthenticated,LoginMessage:t.LoginMessage});case q:return Object.assign({},e,{users:t.users,totalUsers:t.totalUsers});case z:return Object.assign({},e,{isAuthenticated:!1});case W:return Object.assign({},e,{status:t.status,UserMessage:t.UserMessage});case Q:return Object.assign({},e,{buyerAgents:t.buyerAgents,totalBuyerAgents:t.totalBuyerAgents});case _:return Object.assign({},e,{profileData:t.profileData});case G:return Object.assign({},e,{updatedProfileData:t.updatedProfileData});case Z:return Object.assign({},e,{invieAgentMsg:t.invieAgentMsg,checkStatus:t.checkStatus});case X:return Object.assign({},e,{adminMasterTemplates:t.adminMasterTemplates,totalAdminTemplates:t.totalAdminTemplates});case J:return Object.assign({},e,{isMasterTemplateUpdated:t.isMasterTemplateUpdated,updatedEventData:t.updatedEventData});case $:return Object.assign({},e,{isEventCommCreated:t.isEventCommCreated,addedEventComm:t.addedEventComm});case se:return Object.assign({},e,{variablesRefs:t.variablesRefs});case ee:return Object.assign({},e,{isMasterTemplateTaskDeleted:t.isMasterTemplateTaskDeleted});case te:return Object.assign({},e,{campDataById:t.campDataById});case ae:case ne:return Object.assign({},e,{isCampaignCreated:t.isCampaignCreated,addedCampaign:t.addedCampaign});case oe:return Object.assign({},e,{contingencies:t.contingencies});case he:case ge:return Object.assign({},e,{contactResponse:t.contactResponse});case ue:return Object.assign({},e,{contacts:t.contacts});case Ee:return Object.assign({},e,{roles:t.roles});case pe:return Object.assign({},e,{contact:t.contact});case De:return Object.assign({},e,{buyerMasterTemplates:t.buyerMasterTemplates,totalBuyerTemplates:t.totalBuyerTemplates});case be:return Object.assign({},e,{isEventCommCreated:t.isEventCommCreated,addedEventComm:t.addedEventComm});case ke:return Object.assign({},e,{isMasterTemplateUpdatedBuyer:t.isMasterTemplateUpdatedBuyer,updatedEventDataBuyer:t.updatedEventDataBuyer});case Te:return Object.assign({},e,{BuyerCampDataById:t.BuyerCampDataById});case ye:return Object.assign({},e,{newCampaign:t.newCampaign});case ie:return Object.assign({},e,{isTrascationCreated:t.isTrascationCreated,createTransactionData:t.createTransactionData});case Ce:return Object.assign({},e,{transactions:t.transactions});case Ce:return Object.assign({},e,{allContingencies:t.allContingencies});case we:return Object.assign({},e,{tasks:t.tasks});case Ae:return Object.assign({},e,{taskDetails:t.taskDetails});case ce:return Object.assign({},e,{transactionData:t.transactionData});case me:return Object.assign({},e,{updatedTransData:t.updatedTransData});case H:return Object.assign({},e,{forgotdata:t.forgotdata});case K:return Object.assign({},e,{tokenfailed:t.tokenfailed});case de:return Object.assign({},e,{isDTransDeleted:t.isDTransDeleted});case je:return Object.assign({},e,{vendorUsers:t.vendorUsers,totalVendors:t.totalVendors});case Ue:case Ye:case Pe:return Object.assign({},e,{UserMessage:t.UserMessage,status:t.status});case Be:return Object.assign({},e,{users:t.users,status:t.status});case Ve:return Object.assign({},e,{dependencyTasks:t.dependencyTasks});case Fe:return Object.assign({},e,{dependencyTasks:t.dependencyTasks,status:t.status,statusMessage:t.statusMessage});case Qe:return Object.assign({},e,{vendorTransactions:t.vendorTransactions});case Ze:return Object.assign({},e,{vendorTasks:t.vendorTasks});case Xe:return Object.assign({},e,{transactionStatus:t.transactionStatus});case Je:return Object.assign({},e,{transactionTaskStatus:t.transactionTaskStatus});case $e:return Object.assign({},e,{buyerTransactions:t.buyerTransactions});case et:return Object.assign({},e,{buyerTasks:t.buyerTasks});case at:return Object.assign({},e,{transactionActivities:t.transactionActivities});case nt:return Object.assign({},e,{activityUsers:t.activityUsers});case lt:return Object.assign({},e,{buyers:t.buyers,totalbuyers:t.totalbuyers});case Le:return Object.assign({},e,{upcomingTasksData:t.upcomingTasksData});case rt:return Object.assign({},e,{valuesData:t.valuesData});case st:return Object.assign({},e,{dashboardTranscations:t.dashboardTranscations,countTransactions:t.countTransactions});default:return e}},Ql=Object(Hl.e)(Object(Hl.c)({reducer:Kl}),Object(Hl.d)(Object(Hl.a)(ql.a))),Zl=Object(u.a)(),Xl=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={miniActive:"",sidebar:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(B.a,{store:Ql},s.a.createElement("div",null,s.a.createElement(p.a,{history:Zl},s.a.createElement(h.d,null,s.a.createElement(bt,{exact:!0,path:"/dashboard",miniActive:this.state.miniActive,component:Fa,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/transactions",miniActive:this.state.miniActive,component:En,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/transactions/create",miniActive:this.state.miniActive,component:rs,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/transactions/detail/:transId",miniActive:this.state.miniActive,component:Ir,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/calendar",miniActive:this.state.miniActive,component:Ur,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/contacts",miniActive:this.state.miniActive,component:Gr,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/documents",miniActive:this.state.miniActive,component:Ns,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/RegistrationRequests",miniActive:this.state.miniActive,component:Xr,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/BuyerAgent",miniActive:this.state.miniActive,component:$r,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/Vendors",miniActive:this.state.miniActive,component:tl,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/Buyers",miniActive:this.state.miniActive,component:nl,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/BuyerAgent/create",miniActive:this.state.miniActive,component:ol,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/UserProfile",miniActive:this.state.miniActive,component:vl,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/UserProfile/:id",onEnter:this.requireAuth,miniActive:this.state.miniActive,component:vl,onUpdate:function(t){return e.setState({miniActive:t})}}),null!=localStorage.getItem("usertype")&&"BUYERAGENT"==localStorage.getItem("usertype").toUpperCase()?s.a.createElement(bt,{exact:!0,path:"/MasterTemplate",miniActive:this.state.miniActive,component:Ol,onUpdate:function(t){return e.setState({miniActive:t})}}):s.a.createElement(bt,{exact:!0,path:"/MasterTemplate",miniActive:this.state.miniActive,component:Vl,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(bt,{exact:!0,path:"/AccessDenied",miniActive:this.state.miniActive,component:zl,onUpdate:function(t){return e.setState({miniActive:t})}}),s.a.createElement(h.b,{path:"/ThankYou",component:Fl}),s.a.createElement(h.b,{path:"/login",component:xt}),s.a.createElement(h.b,{path:"/register",component:da}),s.a.createElement(h.b,{path:"/forgotpassword",component:ha}),s.a.createElement(h.b,{path:"/resetpassword/:token?",component:Ea}),": ",s.a.createElement(h.a,{to:{pathname:"/login"}})))))}}]),t}(n.Component);a(1359),a(1360);l.a.render(s.a.createElement(Xl,null),document.getElementById("root"))},139:function(e,t,a){e.exports=a.p+"static/media/Ring-Preloader.2407b512.gif"},164:function(e,t,a){e.exports=a.p+"static/media/folder.27ce7528.svg"},186:function(e,t,a){e.exports=a.p+"static/media/filter.3e3d084f.svg"},191:function(e,t,a){e.exports=a.p+"static/media/dependancy-icon.d8c56e7f.svg"},227:function(e,t,a){e.exports=a.p+"static/media/user.51a573f4.jpeg"},230:function(e,t,a){e.exports=a.p+"static/media/logo-admin.0bf587a3.png"},257:function(e,t,a){e.exports=a.p+"static/media/transaction.ec9031fd.jpg"},286:function(e,t,a){e.exports=a.p+"static/media/logo.521485aa.png"},305:function(e,t,a){e.exports=a.p+"static/media/no-template.2f924086.jpg"},410:function(e,t,a){e.exports=a.p+"static/media/fb-icn.8b471286.svg"},411:function(e,t,a){e.exports=a.p+"static/media/tw-icn.1e8a5d31.svg"},57:function(e,t,a){e.exports=a.p+"static/media/no-record.5014e0bf.png"},638:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTMwOTQ3MzRDRDkzMTFFOUI1MzFFQ0M1RTJEQzQwMEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTMwOTQ3MzVDRDkzMTFFOUI1MzFFQ0M1RTJEQzQwMEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENEZFMjQ3NUNENkYxMUU5QjUzMUVDQzVFMkRDNDAwRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENEZFMjQ3NkNENkYxMUU5QjUzMUVDQzVFMkRDNDAwRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrYBh9oAAAEDSURBVHjaYvz//z/DQAAmhgECI89iFmoZxKgZ7gGkWIF4y//rK//TxWKgpfZAygLK/QrE+2ge1EBLTYGUI5KQHVDMkqYWAy1QB1JeWKTcoHI0C+oHQDwJiEWBOAoqtgyIXwPxN5pZDExEP4HUT6Dv2JGEPwHF31MlcQEN1gRS16BcLaDB1+mVj9lwsEdLrlGLRy0ePhb/xcGmbbUILMlAZXMD1RoCwKKSF1oByCAJywDFP4MqAqCFn2kV1A5AfBvUqkAS2wIVc6RZHAN9tBlI5WCRKgHKbaJp4gJaMB1I1SMJtQLF+iluuRDboAfG6wQgxQXE6cQ05qhm8WgBMmQtBggwAM5mSyALkLInAAAAAElFTkSuQmCC"},639:function(e,t,a){e.exports=a.p+"static/media/no-transaction.974f0e63.png"},640:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDRGRTI0NzNDRDZGMTFFOUI1MzFFQ0M1RTJEQzQwMEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDRGRTI0NzRDRDZGMTFFOUI1MzFFQ0M1RTJEQzQwMEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENEZFMjQ3MUNENkYxMUU5QjUzMUVDQzVFMkRDNDAwRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENEZFMjQ3MkNENkYxMUU5QjUzMUVDQzVFMkRDNDAwRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiYSBO0AAAD4SURBVHjaYvz//z/DQAAmhgECI89iFmoZxKgZPgFIcQFx+v/rK//TxWKgpXVAKh/KfQXENQT1UJqqgZZmAqlpaMJFQF/308xioKW+QGoDlrTyD4gDgZZvolXiOgDEqkDsgyTmAxXbT9OghvpcH0hdgHINgD69SFHiAhoIY4oCcTaUPRWIX4MYQAtono+ZcbBHS65Ri0ctHj4W/8LBpm21CCzBroMKOmo2BNihlTsfkhiI/ROIv0FpmrRAFIA4As03USBPAvEKIL5JqzgGGbwNi/guSiwlNnGdRqtbDwHxcXo19g4CMScQsxKq4Imuw0d7EsPeYoAAAwAqTEHoa5iwhAAAAABJRU5ErkJggg=="},650:function(e,t,a){e.exports=a.p+"static/media/no-contact.288ee24e.jpg"},654:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVYAAAGsCAYAAACGpo/8AAAACXBIWXMAAAsSAAALEgHS3X78AAAc1ElEQVR4nO3df5Abd3nH8Ue/7qfPki3HsTGxncSBQiBxSoYMtMMdDMxQyo+QoYVmKAQoUGYaMJA/OgNNDIX+F/KjdKaElrgMpaXTOCkQQqcEbEqhgdA4JDQDiZOzEwN2I1uy75fuTlLn2dM6sk57J90+2l2t3q8ZzfnOp9Vqdfe5R9/9fp9N1Go1gcixw0d3i8jVIjIhIjtFZAeHBVjmYRE5VL/ds+3i7ZMcouX6OliPHT6qAbpHRK4TkWwEdgnoNRq0+/S27eLtRV69JX0ZrPXq9FYRGY/A7gBxUKoH7F4Cts+C9djhozl94UXkIxHYHSCONGA1XG/t51e3b4L12OGjE/W/qIydAt13UIfY+nUMti+C9djhozqGemcEdgXoJ1q9Tmy7ePuhfnvVkxHYh646dvjoPkIVCIWeED5QL2z6Sqwr1nqovjsCuwL0u7duu3j7Pf1yDGIbrLz9ByKlr4YFYhms9elUD0VgVwA854iI7O6H6VixG2OtT6nqm7ccQA/ZUZ+ZE3txPHm1lylVQGS9pT71MdZiNRRQX6L6VAR2BYC3I9su3r4zzscnbhXr3gjsA4CV7Yj7FKzYVKxUq0BPiXXVGqeKte8mIQM9bEecx1oJVgBhie3vbCyCtT5vlZkAQG+hYo242E/fAGJoR/3cSOykY/KEdndjo9XCSakefUaqTx/rxuaBnpB64S5JXvB8SYwMd2N3J+K4aCAuwWr+V6/8z/tl4f4D1psFes83RBLDwzLwjmsk88qrrHc/lhVrXIYCTCtWQhU4V212Vsp3/qNUfvG49ZHpyrvNsMUlWM0uBFibmSVUAQ/lr+23PjS5OB7r2De67lT16Wd6a4eBAHG+oT0EKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIwRrABgjGAFAGMEKwAYS3NAo6Vaq8nCwmK/HwasYHAgw+GJOII1QmbL83Lq9JQTroCXTDot+eyYpFO84YwqXpkIIVTRjoXFRSlNTXOsIoxgjQj9ZSFU0a75RYaLooxgjYhqlVBF+9LJFEcrwghWADDGyauIG8xkZHCAl6mfTc+VpVKphnoEKps3y8xrX+38e+bYcUkmk7Lx/LzzEcvxGxtxGqrrR0f6/TD0tfL8YqjBWs1m5cy1b5fa4KDz+eJs2fl44tgJ2XLBln5/eVrizw2AFVWz68+GaqOF8jwHzgPBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADDGNa8QWbPVmjyzsHStp0sGudwzegfBikjaXyrLgennrqm0MZWU928clm0Z3mQh+vgpReQ8MLNwTqiqk5WqfPHkLC8WegLBisjRYG1Fw/XxcoUXDJFHsKKnPDG/yAuGyCNYETnllPeJqhcOZXjBEHkEKyLleCIlM7lcy10aGBqUh0bGeMEQeQQrImNOErI/MyqDQ4OS37pZ1mWWKteBhMi6dSOy8fxN8ngyIz9JDfKiIdKYboXIuDczIqXE0t/6LZmk/P5I7ezf/qcHRA4ml/59f3pYtlcX5fwaJ7IQTaEGa6lQ3CkiB0RkBz8f/e2R1IBTjapMrSqvnDp1zvG4YH5OLirPyJODI87nWtm+Z/6MDEmt3w8dIijsoYC9hCp0XPU76eGzx+HKmZJsqCyfctX4da1s72+4DxAlYQfrzmgdDoRBhwDKknAeWSvTi8szLfdioF7JakUr9SpXb0DUcPIKodJK9URi6STVaLUir5g+JclEQrYOj8hYJiOpREKGUik5b2jI+Vwr1stnz5zdZb2/Oy4LRAU/kQjNL5MZebDhDP/EmYJTleYHByWVTEh2YEC2jozIpqEhGUylnM/142/NTTmVrdJK967MKC8iIoVgRSi0ytQhAJc7frouk3HC04uGrla0WtlqhatONI3RwlZirtxye8kk8eGFI4NQ3Jt+blz1/MWyU4VmkknJDaw8ZqqhumFwcGm8dfq5mQNa+f4yyaqsbkidOCGj3/r2OVvWUN28bXNcnqI55rEicD9ID8nR5NKPnp6IGj9z0gnMTYNDbe3KcCrlVLayUJbLZs/Iz4aXVmNpBby9fJopWF0w8Mijzk2t++LtMXt29qhYESgN1B+kngvQiamTTvW5oT6u2i6tbLXCvWz2tFPxSn28dT/jrYgAghWB0SWrOgTg0rf/5y+UZSSddqrQTmmFq5WuVrzuFCwnuNPtVb5AtxCsCEzjklU9UaUnrNoZV/XizhxoHm/Vivh4gku5IDwEKwKhjVMal6yOnyk4/95YP8u/VqPptFPx6vQrrYBdOiQwJ2vfLuAHwYqu0+qxcfmpVpfrqpWz46R+6XZ0IUHzktfG6VxAkMIO1gMhPz66zBlXbQg4baSi1eWQe2bfgDOjYGhpXLVxySstBhGWsKdb3Wq0nZuMtgNj9zcsWXXHVbW61CEAS2fHaufnncf40egGZ+t6IosWgwhaqMGazeeK9Q5XvkwVTxOsEaQT9hubpGg1qSeaNg4N+RpX9aIV8Fyl4jRxOZ4edFoMlusV87XzU8xvRWAYY0VXeC1ZHVtlyapf7skwfbzGJa9MwUKQejpYS4Xi3lKhyDhtBGljlMZWgHrG3m2k0k0aqvn6kteJ+swDYckrAtazwVoqFHfXx1bHI7A7aODVCnDjQDAnkjTA3RaDWrm6GufRAt3Uyz9lV0dgH9BEVz41tgLUqVVrWbLqV7Y+lctZ3dWw5JUWgwgCf75hZq4puLRBii5Z1ZNKa1my6lerJa+MtyIIBCvM7G8YV9UqURuk+Fmy6pdWyG6LQW324tIlr253LaAbCFaY0In4ja0AXzFVH1c1nq/aKbfF4Pn1FoOuu1jyii4iWOGb15LVrNGSVb/WZzJnWwy6S17LTSvCAEsEK3yZa+qB6l6PSpesaoOUKHAr56Xx1gJLXtF1BCt8adUKsBtLVv3SilUrV62kG1sMaqVNi0FYI1ixZrpctbEVoC5ZVZu6tGTVLx1r1UpaK2ptBuOixSCsEaxYk+NNV0Z1l6xatQLsFq2kW7UYvJ+rvMIQwYo10SGAxiWr2vhk0LAVYLe4LQYH6hW2O96q1XdjwxjAD4IVHfNaspqP2LiqF62o3SWvlzdMwdLnxZJXWOjlnyKar4RAG5k0LlnVRida/eV9XmIlaDoVTCtsdxaDsOQVhno2WLP5nAbrbSJyMAK70xe8WgGu63IrwG5x/xhoxd3YYvA7jLfCp55+35PN5/Zk87mJCOxKX9BLVzcuWdVqL8wlq35pqLpLXhunYNFiEH4xoIS2aOOSxiWr2tjEORE02NsNTbyWvGplzhQsrJXzm1IqFLUF3+6AjuKhbD53j/tJqVDcoxfa5BWMLg1UbVzi0oYmTivAoaFAWwF2i1bc5UrFWfJ6PDPgXNalXF9Rdu3CVDg7hZ6WLhWKO0Xk7iCfRKlQvDCbz03qFQC4EGC0OVdZTT83rur0N10oO9fyD6MVYLdo5X18btapxO/OnS8LieTSH5T0kPzu4lxsnieCkQypYbT7mIyPRlyrJau9PK7qRStvnSnQPN6qlTpLXtGpZEhvw3nr3wO0QUnjktXx+jWkNvbY1Kp2adMYrcTda3S5WPKKTnHyCi15tQKM+pJVv/T5tVrySotBdIJgxTJzTb1KtWGJ2wow6ktW/XKXvKrGJa+0GEQnCFYsc3/DktUotwLsFncMufkqr3oii/FWtINgxTl0YnxjMxKt2vSETlzHVb24LQa1uYzbYtC96gDjrVgNwYqzvJasjvXoklW/3D8mehwal7xylVeshmDFWXc1XGXVPTOugZqN2dSqdrkdu5yrvNZnRAhLXtEGghUOr1aAGwf6+4SN/mFxWww2jrc2zu8FmnFx9RhLjo5I5sIdqz7Bydl5efCZ5yqy127JyaYdm2S9ttaL8dSqdm3WE1rlsry8VpNfnTgjvyovLi15HcvLn27f1NZWyo8+FoWngoAQrDGlgbrpM5+Q5MjK8y9np2flX66/8eznv/e2N8hr3/aGfj98y7jxuXN6Vm66/kaZnZmV4+UF+fHlV8gb2jheC5NH5dlPfkaq0zOrfi96n5Yjh0J4FpP1j0V+hrpj/TuuWTVU1R033+GEhNr14kvaCol+Njw6LO+/4QNnj8B9//otefx/H1/1iGR2bpehq67s98PXN5L1TlNBNos+mM3n9tX/rU1YSqt8P9YgMbpyqE4/8KDc98GPyxP1UBgeGZY//tA7OdRtuOTFlziVvesLf3mbHP+rm2X+qSMr3jm9ub1hA/Q+ZyggrGbR2XzukEXfgKni6ZrNHsVHbYUjcvpnP5fH/uKz8szwepHhMedrb7/2zbLxvHy/H7a2aWX/P9/9Lzl+siTlmsjkgR/I0w8+JFfu/4rnJlZ6TRAvnJmIqcoKv8VnHn7U+XjB/KxzJYDxqYJs+fWv+v2QdeyNwwln8YDbsKUyNe380fKyUF8ei/jzffKqVCjmAmySXaxXuVjFSsXR2OUvkcGvpmSrVOV1p591vrbhd67ikHbovN0vlVc+shSkeomXqYGMjF58oedGqpSsfcNiVoCO0Y4HdcBKheJ7GsZosQbrL7tULvyDq+U3+78hc5WK7PjQ+2Tkop0cyg5tueZNMn34KTn1wwdkLLtenn/9ByW1ytg2+oNFsAYWqnXXiQjB6lP2ve90blg7DdEX7P1zjiCWYYwVAIwRrABgjGAFAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYxbBelvAL8qtAT8eAHTEdxOWbD63p1Qo3hPQYZ/M5nOTbXwfAITG5GKC2XzuAC8hACxhjBUAjIV6+etSoajX2voeLyqAOAk1WEVkT7wOJxq99GXXyuTk8mtpnSm0N3L0vYM/lbv/7YDz0d3Oq8dfJm99y4S8591vWvX+eh+9/1NHfu382/14xeUvkN27X+h8bGc7QKfCDlbfV2hFNN35D99oGartuvHTd8gtt3112XdryOpNt3/bLTc44diK1/3VQw//0rndKSKfu/2f5PbPfdwJbMAKY6zoCg2stfrwx272DEWXBuO73rtXisUzLf//0KFftPXoGv5vvubjTmULWCFYYc5PtaoBp/dvhz6GhnAr+la/E7odr5AGOkWwwpyfalXfwnfCHYNttiG77uxXdu58nvNWXz960VBtN9CB1RCsMOWnWvW6r55g0hNeOhbaSqu38Vqx6v2+/9075JGfflW+vv/msx9zubGW22kV0MBaEKww1VitegWYl1YBqdtwA1WDstXJqlb30wpV79f8/fr1T9/4gZZ7QLDCCsEKM80Vp06Lape+FW8VbM3baLVNr/t6YYoVuo1ghZnmsdVOgtUrGJsrTq9x0nZnAazEa+oW0CmCFSaaq1UNwE6GArzGZZuD1GubOvm/XV4hPjFxJT8MMEGwwkRztfred72xo+lLXsF44Y6tK37uaveEme7TTZ/6Qsv/030GLIS98gox0Opsvo5j6iT+drVbsa40ZWolui8HDjwoX/ryN1s+lp7QWuu2gWZhB+s+ERkPeR/gU/P8Tw3VTmcE+J2c7/X2XldwrTY3Vvf3ox+51tfjA41CDdZsPrevVCgWddqhz03dZLRL6JAGWnNl+rEP/1HH2+mkurWkU7KYJQBroQ8FZPM5vfqArysQTBVPE6whaV7TrzMBeukttbuUlYoVljh5hTVzO0016sXqT4cKXvWaD9ArAGZ8V6ylQvG6+gX+sgG8LEdE5OpsPncogMfCKpqrVV3VFLX2e1pB6/JWDU0dbtBVWq1OXun/afX65S/tDWU/ES8WFWtQoap20Bw7GlpVq37eTnd6squZ1/CD24BFA1bP/Gu/AK8lrRq6YY31Il4sxliDClXXzoAfDy206peqX2v8utdba+1/6tKmKFJf9eRnrb7X/NZW9A+Azptt1c1Kv3aFR7MXoF3MY8WatArBdoPRT4BajYPqWHCrYLVYGgtw8gqR4DU22xzCXm/VOx3b9eoLwFAALBCsiASvMdJ2K1RWTSFKCFZEQrsVpNdb9U4rVq9rXBHQsMAYK9aknUtY69v4xhNVrlb31UDTW/NUKA3AxrP4rQJRQ7nTWQVel2Hhaq2wQMWKyGjVXUqD1p1poGHYagy01aIEDXT9/uahBN2eXt3V6wRaJz1kAS9UrIgMDUhtP9gchroyyquRilaqzWHoXlFAbzrp361odYrVSu0Fo7jAAb2JihWRoeHXaQMXHSZoHgZormr1cw3ZlUJVt/Gpmz7IDwNMEKyIFJ283+4lUrTCbTUM0OlcVA1VXajApVlghWBF5GjIrTbWqYHqdTnsU6Wptp+SbkeXuRKqsGQxxnqkvoY/KKufjkZP0wpSm6Ho23c9AaUfddxUv65joBqGK42F6vCAnghz1/67DVj0ozve6vYPYHoVusEiWK+u34JQrF91AD1Aw6udaVle/JxM0sCkxyrC4jtY6y38aOMHAHWMsQKAMadiLRWK2t03qJnRh7L53J764+bqb+1zvLAA4iJdKhR3B3wxvvFSobivPoSgTbLfwk8TgDhJBnjiqZH7mDStBhA7jLECgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIxpsN4TwkF1m3RO8oJ2x/zxE3F8Wj1t7kl+3PtFWpuhlArF20Rkd0DPWbtbucG6p97Zym93q3GD/YqVY397p6Q3nyfrL7u03w9FJPzm7m/KmR/9RLIDA/1+KPqC0zbQbeMXtGw+V7RoAjNVPF3r9xeyWWV6Wh674ZPR2qk+N5bJ9Psh6BuMscZUKpHo90MQOekkv279wuKaV6EpFYpXBziE0VOymQEpVypSqVHMR8FgKiWj6Z7+dUMHevaVrjfovjsCuxJJqWRCto6MyEK1KlXCNVSZZFKSvIPoK738JzSMBt09J8PbTyBw/NYBgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIz1crAeisA+AMAyPRus2XxOr3xwMAK7AgDn6Ok+Ztl8bkJodA0gYhhjBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMS4b2aHa614jtSt/W2RDrqM7Jn76kCS+fq/I7FwEngWAbiJYO1C79EVOsK7pvi+7wvmY+Npdoew7gOAwFNCJ5231dffaRRcGvccAQkCwBqnD4QMAvYlgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIyx8spAtVJpeyO1XRe1/vrComSmZ5Z9PTE0IJWhoRW3mTh5SpInT3X9eQJoD8HqQ7ValeHRYUlnMu1v5IYPe/7XhjXuSnVmVmb2fUVSP/u51VMD4ANDAT4kU8nOQrVb+zEyLEN/eE3o+wFgCcHqQyqVisy+pDflI7AXAIRgBQB7BCsAGCNYfdCTVwDQjGD14fTJUmT2pfjv90dgLwAI0638mZuZlclfPClj2bG2t5P40X+3/HqlUpXZ+fllXx9Ip2RglZkHC//3rJz+zx/K80dHu/l0AbSJYPWpPDvn3NqV3P/1lt85v7AoJ89MLfv6uuFBWTc8HN0DAGAZhgJ80HmsANCMZPBh3fr2hwC6vi8RWKgAYAlDAT4MDg/JeVs3S3mu3PZGkh4BWJaEzKeWvxxj6YyMrRKaqWRSRtO8lEBU8Nvok4ar3tqVHBho+Z0arOUW4aihut7jPgCiiaEAADBGsAKAMYIVAIwRrABgjGAFAGMEKwAYI1gBwBjzWA3MzszK39/yd/LEY0/Ixk0b5X0f/RPZtmNbzz8vAGtDxWrg23fdJ8eOHJM/+8T1zsUFNWQB9C+C1cDJZ0/Ky191lex60S556zuvkZmZ2Z5/TgDWjqEAA+Ovn5DPf/avnQ39+PsPyMTrx3v8GQHwg2A1oJWq3g5++4CzMQ1aAP2LoQAjGqyu4REaUwP9jGAFAGMEKwAYI1gBwBjBamyI8VWg7zErwIjOBNj1okuclVcA+hvBakRnAjTODADQvxgKAABjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIwRrABgjAUCQTpV7J/nChgqFYq3ishHAjqmJRGZyOZzh9a6ASrWDiQefEhkbm7t9/+P74aw10AsBBWqKisie/xsgIq1E6dOSfKWv5HalVd0ft8nn5LE4adC3HkAHdjp52ARrJ06dYrKE8CKGAoAAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrgF7wcMD7eI+fO7OkFUAvuFpErgtoPyez+dw+PxsgWAFEXjafmxSRvb3ySjEUAADGqFgBhCaZSl1eKhQPdOHxD2XzOaenaqlQ3C0itwb4HPcRrABCk0hITkTGu/D446VCcV/9KgB7u/QYXnYzFAAgribqzysX8PPLEqwA4iroQD2LYAUAYwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBRBXxbCeF8EKIK7c5i6TAT+/IzRhARCaWs2pKrtxdYBb6w1Y1J76x50BPE99PnsJVgChqVYqD2fzuYluPn42nysGePUBB0MBAGCMihVAaFZodO28pXbfztebVe8NqGOVjsnuqVe6a0KwAgjNKo2udzeMi2r4ZgPaz/F6uK75GlsMBQCIqh0N+xVUqLp8jfsSrABgjGAFAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrgKgqNexXKeB99NUcmyYsAEKzSqPrfQ3/3hNgT9WinwYsQrACCFO7ja6z+dy+pqCNNIYCAMAYFSuA0CSTyZ2lQtHX224PB7L5XKsG2oEgWAGEJpFMaM/Vm7rw+DeVCsULs/lc0FdodTAUACCuunqRwpUQrADiKojLXbdEsAKAMYIVAIwRrABgjGAFAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghVAXB0K63kRrADiSPu83hPW86K7FYDQVBYrB9tpdN1rqFgBwBjBCgDGCFYAMEawAoAxTl4BWFVl82aZf8Eu59sqJ5cu8T+WG9NrVnHwWiBYAayoms3KmWvfLrXBQefb5urBOjs9K1su2MLBa4E/NwBWVM2uPxuqjRbK8xw4DwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIwRrABgjGAFAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBQBjBCsAGEtzQKNtsVKV8vxCvx+Gvlat1UJ9+umjT8vAoz+X+Zdces7XN27Oh7ZPUUewRtzMXNm5AWEavfc+56bWffF2XotVMBQAAMYIVgAwRrBGRCbDqAwQFwRrRCQTCVk3MtTvhwFt4mcl2iiTIiS3blQy6bRUKpV+PxRYwcjQkKRT1ERRRrBGzOjQYL8fAqDn8WcPAIwRrABgjGAFAGMEKwAYI1gBwBjBCgDGCFYAMEawAoAxghUAjBGsAGCMYAUAYwQrABgjWAHAGMEKAMYIVgAwRrACgDGCFQCMEawAYIxgBQBjBCsAGCNYAcAYwQoAxghWADBGsAKAMYIVAIwRrABgLM0BPdfArotkw11fjtIuAZFy+mSRF2QVVKxNEkODkdofAL2HYAUAYwQrABgjWAHAGMEKAMYIVgAwFpfpVp+y2lCtJrmF+YXdVtsDYuiA4VOajN3hEZH/B2cUCWC64aG+AAAAAElFTkSuQmCC"},661:function(e,t,a){e.exports=a(1361)},686:function(e){e.exports=[{firstname:"Michael",lastname:"Duffey",role:"Home Inspector",email:"michaelbduffey@dayrep.com",mobileNumber:7877787784,isDefault:!0,_id:7},{firstname:"Lucifer",lastname:"Morningstar",role:"Wood Inspector",email:"misddasdsuffey@dayrep.com",mobileNumber:7877787784,isDefault:!1,_id:1},{firstname:"Radon",lastname:"Duffey",role:"Radon Inspector",email:"misddasdsuffey@dayrep.com",mobileNumber:7877787784,isDefault:!1,_id:6}]},69:function(e,t,a){e.exports=a.p+"static/media/property-placeholder.a902e70c.jpg"},847:function(e,t){},849:function(e,t){},882:function(e,t){},883:function(e,t){}},[[661,1,2]]]);
//# sourceMappingURL=main.24bdefcc.chunk.js.map